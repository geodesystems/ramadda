<?xml version="1.0" encoding="utf-8"?>
<types supercategory="Geoscience">

  <type name="type_point_hydro"  description="" super="type_point" category="Point Data" foruser="false">
  </type>

  <type name="type_point_hydro_waterml"  super="type_point_hydro" description="WaterML"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="icon" value="/point/waterml.png"/>
     <property name="record.file.class" value="org.ramadda.geodata.point.WaterMLFile"/>
     <column  name="site_code"  type="enumerationplus" label="Site Code" cansearch="true"/>
     <column  name="site_name"  label="Site Name" cansearch="true"/>
  </type>



  <type name="type_hydro_colorado"  super="type_point_hydro" description="Colorado DNR Stream Gage"  handler="org.ramadda.data.services.PointTypeHandler">
    <property name="fbxxxixed_url" value="https://dwr.state.co.us/Rest/GET/api/v2/telemetrystations/telemetrytimeseriesday/?format=csv&amp;abbrev=${site_id}&amp;endDate=${date format=MM/dd/yy}&amp;parameter=GAGE_HT%2CDISCHRG&amp;startDate=${date offset=&quot;-1 week&quot; z=MST}&amp;START=${date format=MM/dd/yy}"/>
    <property name="fixed_url" value="https://dwr.state.co.us/Rest/GET/api/v2/telemetrystations/telemetrytimeseriesday/?format=csv&amp;abbrev=${site_id}&amp;endDate=${date format=MM/dd/yy}&amp;parameter=GAGE_HT%2CDISCHRG&amp;startDate=${date offset=&quot;-1 week&quot; z=MST}"/>    
     <property name="icon" value="/point/co.png"/>
     <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
     <property name="map.chart.field" value="discharge"/>
     <column  name="site_id"  label="Site ID" cansearch="true"/>

 <property name="record.properties">
csvcommands1=-skip,2,-makefields,parameter,measValue
csvcommands2=measDate,,-addheader, measdate.type date   measdate.format {yyyy-MM-dd}   dischrg.unit cfs  gage_ht.unit ft,-print
  </property>
<wiki>
<![CDATA[
+section  title="Stream Gage: {{field name=site_id}} - {{name}}"
{{description}}
----
+row
+col-md-8
{{group showMenu="true" layoutType="table" layoutColumns="1" showTitle="false"}}
{{display type="linechart" showTitle="false" layoutHere="false" fields="discharge" vAxisMinValue="0"}}
{{display type="barchart" showTitle="false" layoutHere="false" fields="gage_height"}}
-col
+col-md-4
{{map}}
-col
-row
]]>

</wiki>
  </type>

  <!--
      Look for data at
      https://data.usbr.gov/time-series/search?v=1
      Look at the location details, e.g
      https://data.usbr.gov/location/3540
      The 3540 is the RISE ID entry attribute
      If specified the location and other metadata are extracted
  -->
  <type name="type_hydro_usbr_rise"  super="type_point_hydro" description="USBR RISE Hyrdo"
	handler="org.ramadda.geodata.point.RiseTypeHandler">
     <property name="icon" value="/point/rise.png"/>
     <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
     <property name="form.date.show" value="false"/>
     <property name="form.properties.show" value="false"/>
     <column  name="rise_id"  label="RISE ID" type="string"/>
     <column  name="location_type"  label="Location Type" type="enumerationplus"/>     
<property name="record.properties">
csvcommands1=-skiplines,7,-notpattern,0,includes:SERIES\,QUERY\,DOWNLOAD\,SITE\,Location
csvcommands2=-notpattern,2,includes:[\,(,-lengthgreater,0
csvcommands3=0,-set,datetime_utc,0,datetime
csvcommands4=-set,7,0,timestep2,-notcolumns
csvcommands5=location\,units\,aggregation\,timestep\,resulttype\,timestep2,-notpattern,parameter,^$,-makefields
csvcommands6=parameter,result,datetime, ,-decimate
csvcommands7=1,7,-change,datetime,.*(....-..-..).*
csvcommands8=$1,-sort,datetime,-addheader,default.type double datetime.type date datetime.format yyyy-MM-dd,-print
</property>
<wiki>
<![CDATA[
+section  title="RISE Data:  {{name}}"
{{description}}
----
+row
+col-md-8
{{group layoutType="table" layoutColumns="1" showTitle="false"}}
{{display_download showMenu="false"}}
{{display type="linechart"  showMenu="true" showTitle="false"  vAxisMinValue="0" fields="#2"}}
{{display type="linechart"  showMenu="true" showTitle="false"  vAxisMinValue="0" fields="#3"}}
{{display type="linechart"  showMenu="true" showTitle="false"  vAxisMinValue="0" fields="#4"}}
-col
+col-md-4
{{map}}
{{properties message="" decorate=true metadata.types="enum_tag"  includeTitle="false"}}
<table class="formtable">
     {{field name="altitude"  row.label="Altitude:"}}
     {{field name="location_type"  row.label="Type:"}}
</table>
-col
-row
]]>
</wiki>
</type>



  <type name="type_usgs_gauge"  description="USGS Stream Gauge" super="type_point_hydro"
	newfields="station_id,tags,quit"
	handler="org.ramadda.geodata.point.UsgsGaugeTypeHandler">
<!--
     <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
-->

     <property name="form.header.new">
       <![CDATA[
		+note
		Just need to specify the Station  ID.
		See the maps at [https://maps.waterdata.usgs.gov/mapper/index.html USGS]
		-note
       ]]>
     </property>    
     <property name="icon" value="/point/usgs.png"/>
     <property name="record.file.cacheok" value="true"/>
     <property name="form.properties.show" value="false"/>
     <property name="form.area.show" value="false"/>
     <property name="form.location.show" value="true"/>
     <property name="form.altitude.show" value="true"/>
     <property name="form.date.show" value="false"/>
     <property name="form.resource.show" value="false"/>
 <property name="record.properties">
fields=agency[label="Agency" type=string],station_id[label="Station ID" type=string],date[type=date format="yyyy-MM-dd HH:mm" label="Date"],timezone[label="Timezone" type=string],discharge[unit="cfs" label="Discharge" type=double],skip[type=string],gauge_height[unit="feet" label="Gauge Height" type=double],skip[type=string]
point.csvcommands=-delimiter,tab,-skip,2,-print
     </property>
     <column  name="station_id"  label="Station ID" type="enumerationplus" cansearch="true"/>
     <column  name="period"  label="Period" type="int"  default="30"/>
     <column  name="county"  label="County" type="enumerationplus" cansearch="true"/>
     <column  name="state"  label="State" type="enumerationplus" cansearch="true"/>
     <column  name="huc"  type="enumerationplus" label="HUC" cansearch="true"/>
     <column  name="homepage"  label="USGS page" type="url"/>
<wiki>
<![CDATA[
+section title={{name}}
:rem If you use this as the description then remove the description tag below
{{description wikify=true}}
{{group showMenu=true  targetDiv="${entryid}_group" }}
<div id="{{entryid}}_group"></div> 
{{display type=linechart showMenu=true fields=discharge}}
{{display type=linechart showMenu=true fields=gauge_height}}
{{display_download showMenu=false}}
{{display_table showMenu=false}}
:vspace 1em
----
+row
+col-md-6
{{information  details="true"  showTitle="false"  }} 
-col
+col-6
Data courtesy of [https://waterdata.usgs.gov USGS]
{{map}}
<table class="formtable">
{{field name="altitude"  row.label="Altitude:"}}
</table>
-col
-row
-section
]]>
</wiki>
</type>


<type name="type_usgs_gauge_file"  description="USGS File" super="type_point_hydro"
      handler="org.ramadda.data.services.PointTypeHandler">
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
     <property name="icon" value="/point/usgs.png"/>
     <property name="record.file.cacheok" value="true"/>
     <property name="form.area.show" value="false"/>
     <property name="form.location.show" value="true"/>
 <property name="record.properties">
csvcommands1=-inputcomment,#,-delimiter,tab,-cut
csvcommands2=1,-addheader,peak_dt.type date peak_va.type double gage_ht.type double
     </property>
     <column  name="station_id"  label="Station ID" type="string" />
     <column  name="state"  label="State" type="enumeration" />
     <column  name="huc"  type="enumeration" label="HUC"/>
     <column  name="homepage"  label="USGS page" type="url"/>
<wiki>
<![CDATA[
+section title={{name}}
{{description wikify=true}}
{{display_linechart fields="gage_ht|peak_va" }} 
{{display_download }} 
{{display_table }} 
-section
:br
+row
+col-md-9
{{information  details="true"  showTitle="false"  }} 
-col
+col-3
Data courtesy of [https://waterdata.usgs.gov USGS]
{{map}}
-col
-row
-section
]]>
</wiki>
</type>




</types>
