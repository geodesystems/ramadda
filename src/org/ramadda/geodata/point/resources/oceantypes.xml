<types supercategory="Geoscience" category="Ocean and Water Data">

  <type name="type_point_ocean"  description="" super="type_point" foruser="false">
  </type>

<type name="type_point_ex02" description="EX02 Base" super="type_point_ocean" foruser="false"
      handler="org.ramadda.data.services.PointTypeHandler">
  <property name="icon" value="/point/exo2.png"/>
  <property name="form.resource.show" value="false"/>
  <property name="form.properties.show" value="false"/>
  <property name="form.date.show" value="false"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
<!--
    The record.properties defines the set of csv commands used to clean up the input file
-->
<property name="record.properties">
csvcommands1=-bom,-encoding,UTF-16LE
csvcommands2=-skiplines,9,-concat,date_mm_dd_yyyy\,time_hh_mm_ss,_csvcommandspace_
csvcommands3=date,-firstcolumns,date,-notcolumns,date_mm_dd_yyyy\,time_hh_mm_ss\,time_fract_sec
csvcommands4=-addheader,date.type_csvcommandspace_date_csvcommandspace_date.format_csvcommandspace_{MM/dd/yyyy_csvcommandspace_HH:mm:ss},-print
</property>
<column  name="station"  label="Station" type="enumerationplus" cansearch="true">
   <property name="record_field" value="site_name"/>
</column>
<column  name="serial_number"  label="Serial Number" type="enumerationplus" cansearch="true"/>


<!-- specify the default wiki here for backwards compatability -->
<wiki>
<![CDATA[
+section title="Station: {{field name=station}} - {{name}}"
<div style='text-align:right;'> 
<span style='display:inline-block;margin-right:10px'>{{fromdate  format="yyyy-MM-dd HH:mm z"}}</span>
<span style='display:inline-block;'>{{resource  message="" title="Download Data"}}</span>
</div> 
{{description wikify=true}}
{{property max=10000}}
{{group showMenu=true}}
{{display_profile showMenu=true yAxisReverse=true marginTop=25  profileMode=markers
profileMode="lines+markers"
markerSize=8
indexField=".*depth.*" 
symbol1=circle
symbol2=diamond
fields=".*temp.*,sal.*" 
}} 

:heading Table
{{display_download showMenu=false}} 
{{display_table showMenu=false}}
-section
]]>
</wiki>
</type>


<type name="type_point_ex02_sonde" description="EX02 Sonde" super="type_point_ex02" foruser="true">
</type>

<type name="type_point_ex02_timeseries" description="EX02 Time Series" super="type_point_ex02" foruser="true">
<wiki>
<![CDATA[
+section title="Station: {{field name=station}} - {{name}}"
<div style='text-align:right;'> 
<span style='display:inline-block;margin-right:10px'>{{fromdate  format="yyyy-MM-dd HH:mm z"}}</span>
<span style='display:inline-block;'>{{resource  message="" title="Download Data"}}</span>
</div> 
{{description wikify=true}}
{{group showMenu=true}}
{{display_linechart showMenu=true fields=".*temp.*,sal.*" }} 

:heading Table
{{display_download showMenu=false showDateSelect=true}} 
{{display_table showMenu=false}}
-section
]]>
</wiki>
</type>




  <type name="type_point_ocean_netcdf_track"  super="type_point_ocean" description="NetCDF Track Data"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="isTrajectory" value="true"/>
     <property name="icon" value="/point/glider.png"/>
     <property name="record.file.class" value="org.ramadda.geodata.point.ocean.NetcdfOceanTrajectoryFile"/>
     <column  name="platform"  type="enumerationplus" label="Platform" cansearch="true"/>
  </type>

  <type name="type_point_ocean_netcdf_glider"  super="type_point_ocean_netcdf_track" description="NetCDF Glider Data"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="isTrajectory" value="true"/>
     <property name="icon" value="/point/glider.png"/>
  </type>

  <type name="type_point_ocean_netcdf_easycurrents"  super="type_point_ocean_netcdf_track" description="NetCDF Easycurrents Data"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="icon" value="/point/easycurrents.png"/>

<!--
These don't define the fields or their order. They just define the default attributes
-->

     <property name="record.properties">
			fields=v[chartable=""false],u[chartable=""false],speed[chartable="true" sortorder="2"],direction[chartable="true" sortorder="1"]
     </property>

  </type>

  <type name="type_point_ocean_cnv"  super="type_point_ocean" description="SeaBird CNV Data"
	handler="org.ramadda.data.services.PointTypeHandler" pattern=".*\.cnv">
     <property name="icon" value="/point/sbe.png"/>
     <property name="isTrajectory" value="true"/>
     <property name="form.area.show" value="false"/>
     <property name="form.location.show" value="true"/>
     <property name="record.file.class" value="org.ramadda.geodata.point.ocean.CnvPointFile"/>
     <property name="record.pattern.date.format" value="MMM dd yyyy HH:mm:ss"/>
     <property name="record.patterns"
	       value="date:.*NMEA +UTC +\(Time\) += +(.*?)\n,latitude:.*Latitude =(.*?)\n,longitude:.*Longitude += *(.*?)\n,station:.*Station: +(.*?)\n"/>

     <column  name="station"  label="Station ID" type="enumerationplus" cansearch="true"/>

<wiki>
<![CDATA[+section title={{name}}
{{property max=20000}}
{{group }}
:navtop
:heading Profiles
+row tight=true
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=10 
profileMode="lines+markers" markerSize=8 symbol1=circle
indexField="depsm|prdm" fields="t.*c"
}}
-col
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=10 
profileMode="lines+markers" markerSize=8 symbol1=circle 
indexField="depsm|prdm" fields="sal00"
}}
-col
-row
:heading Table
{{display_download iconSize=12pt}}
{{display_table}}
----
:heading Metadata
<div style='max-height:200px;overflow-y:auto;'>
{{description wikify=true}}
</div>
:br
+row
+col-8
{{information details="true"}}
-col
+col-4
{{mapentry zoomLevel=6}}
-col
-row
-section
]]>
</wiki>


  </type>

  <type name="type_point_ocean_ooi_dmgx"  super="type_point_ocean" description="OOI Data"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="icon" value="/point/ooi.png"/>
     <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
     <property name="record.properties">
delimiter=
position.required=false
skiplines=1
dateformat=yyyy/MM/dd HH:mm:ss
fields=date[type="string" isdate="true"],time[type="string" istime="true"],ax_g[searchable="true" chartable="true"], ay_g[searchable="true" chartable="true"], az_g[searchable="true" chartable="true"], rx_rad_s[searchable="true" chartable="true"], ry_rad_s[searchable="true" chartable="true"],  rz_rad_s[searchable="true" chartable="true"],  mx_gauss[searchable="true" chartable="true"],  my_gauss[searchable="true" chartable="true"],  mz_gauss[searchable="true" chartable="true"], t_sec[]
     </property>

  </type>

  <type name="type_point_ocean_csv_easycurrents"  super="type_point_ocean" description="CSV Easycurrents Data"  handler="org.ramadda.data.services.PointTypeHandler">
     <property name="icon" value="/point/easycurrents.png"/>
     <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
     <property name="record.properties">
delimiter=,
position.required=false
skiplines=11
dateformat=yyyy-MM-dd HH:mm:ss
fields=date[type="string" isdate="true"] time[type="string" istime="true"],LATITUDE[isLatitude="true"],LONGITUDE[isLongitude="true"],CURRENT_DIRECTION[searchable="true" chartable="true" sortorder="1"],CURRENT_SPEED[searchable="true" chartable="true" sortorder="2"],X[searchable="true" chartable="true"],Y[searchable="true" chartable="true"],QC[searchable="true" chartable="true"],HDOP[searchable="true" chartable="true"],VDOP[searchable="true" chartable="true"],PDOP[searchable="true" chartable="true"],RSSI[searchable="true" chartable="true"],SATELLITES[searchable="true" chartable="true"]
     </property>
	<wiki><![CDATA[
+inset
		
			<table border="0" width=100% cellspacing=0 cellpadding=0 height="100%">
				<tr>
					<td  valign=top width="70%">
						<div class="entry-page-main">
:title {{name}}
						{{information details="true"}}
						
						{{chart  width="800"  height="600"  fields="CURRENT_SPEED"  fromdate=""  todate=""  }}
						{{chart  width="800"  height="600"  fields="CURRENT_DIRECTION"  fromdate=""  todate=""  }}
						{{chart  width="800"  height="600"  fields="CURRENT_SPEED,CURRENT_DIRECTION"  fromdate=""  todate=""  }}
						
						</div>
						</td>
						<td valign="center" align="center" height="100%" width="6"><div class="entry-page-divider"> </div></td>
						<td  valign=top width="28%">
						<div class="entry-page-info">
						<p>
						{{tools includeicon="true" title="Links" message=""}}
						</p>
						<p>
						'''Date period:'''<br/>
						{{fromdate }}<br/>
						{{todate }}
						</p><p>
						{{map message="" width="250" height="250"  box.maxheight="300" block.show="true" block.title="Map" block.open="true"}}
						</p><p>
						{{list includeicon="true" details="false" entries="siblings,links" exclude="this" message="" box.maxheight="200" box.class="entry-sidebox" block.show="true" block.title="Related" block.open="true"}}
						
						</p>
						
						</div>
					</td>
				</tr>
			</table>
-inset
			]]>
			</wiki>

  </type>	
  
  <type   name="type_point_ocean_csv_sado_position"  super="type_point_ocean" 
	  description="SADO Position Data"  handler="org.ramadda.data.services.PointTypeHandler">
    <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
    <property name="isTrajectory" value="true"/>
    <property name="record.properties">
      delimiter=,
      position.required=false
      skiplines=1
      fields=date[type="date" isdate="true" format="dd-mm-yyyy HH:mm:ss"],longitude[isLongitude="true"],latitude[isLatitude="true"],COURSE[searchable="true" chartable="true" sortorder="1"],velocity[searchable="true" chartable="true" sortorder="5"],depth[searchable="true" chartable="true" sortorder="10"],cog[searchable="true" chartable="true"],sog[searchable="true" chartable="true"],sensor_date[searchable="true" chartable="true" type="date" format="dd-mm-yyyy HH:mm:ss"]
    </property>
  </type>
  
  <type   name="type_point_ocean_csv_sado_TTS"  super="type_point_ocean" 
	  description="SADO TTS Data"  handler="org.ramadda.data.services.PointTypeHandler">
    <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
    <property name="record.properties">
      delimiter=,
      position.required=false
      skiplines=1
      dateformat=dd-mm-yyyy HH:mm:ss
      fields=fecha[type="string" isdate="true"] time[type="string" istime="true"],salinity[searchable="true" chartable="true" sortorder="20"],temperature[searchable="true" chartable="true" sortorder="30"],fluor[searchable="true" chartable="true" sortorder="1"],sigmat[searchable="true" chartable="true" sortorder="10"],sensor_date[type="string" searchable="true" chartable="true"]
    </property>
  </type>
	
  <type   name="type_point_ocean_csv_sado_meteo"  super="type_point_ocean" 
	  description="SADO Meteo Data"
	  handler="org.ramadda.data.services.PointTypeHandler">
    <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
    <property name="record.properties">
      delimiter=,
      position.required=false
      skiplines=1
      dateformat=dd-mm-yyyy HH:mm:ss
      fields=fecha[type="string" isdate="true"] time[type="string" istime="true"],wind_mean_speed[searchable="true" chartable="true" sortorder="20"],wind_speed[searchable="true" chartable="true" sortorder="30"],wind_direction[searchable="true" chartable="true" sortorder="1"],air_temperature[searchable="true" chartable="true" sortorder="10"],humidity[searchable="true" chartable="true" sortorder="10"],solar_radiation[searchable="true" chartable="true" sortorder="10"],pressure[searchable="true" chartable="true" sortorder="10"],water_temperature[searchable="true" chartable="true" sortorder="10"],sensor_date[type="string" searchable="true" chartable="false"]		 
    </property>
  </type>
	

<type name="type_ndbc_buoy" 
description="NDBC Buoy Data" 
super="type_point" 
handler="org.ramadda.geodata.point.NdbcBuoyTypeHandler"
editfields="station,data_type,_default"	>

  <property name="search.tabs" value="map,list"/>
  <property name="icon" value="/point/noaa.gif"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="form.date.show" value="false"/>
  <property name="form.resource.show" value="false"/>
  <property name="form.properties.show" value="false"/>
  <property name="form.header.new">
<![CDATA[+note\nJust need to specify the Station ID. See the map at <a target=_map href=https://www.ndbc.noaa.gov/>nbdc.noaa.gov</a>\n-note]]></property>    
<column  name="station"  label="Station ID" type="string" cansearch="true"
	 bulkuploadhelp="Or upload a file of site ids. One per line. No header label."
	 addbulkupload="true"	 
/>
  <column  name="data_type"  label="Data Type" type="enumeration" cansearch="true"
	   values="txt:standard meteorological data,drift:meteorological data from drifting buoys,cwind:continuous winds data,adcp:acoustic doppler current profiler,ocean:oceanographic data, tide:tide data,spec:spectral wave summary"/>  


<property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
<property name="record.properties">
picky=false
csvcommands1=-delimiter,spaces,-inputcomment,,-cut
csvcommands2=1,-numcolumns,-1,-set,0,0,yy
csvcommands3=-set,1,0,month,-combine
csvcommands4=yy\,month\,dd\,hh\,mm,-,date,-firstcolumns,date
csvcommands5=-indateformat,yyyy-MM-dd-HH-mm,,-convertdate,date,-sortby,date,up,string
csvcommands6=-notcolumns,yy\,month\,dd\,hh\,mm,-change,1-50,MM,NaN
#convert kts to m/s use the .* pattern since this is a wildcard and the field might not exist
csvcommands7=-addheader,steepness.type enumeration wwd.type enumeration swd.type enumeration wdir.unit degT wspd.unit m/s gst.unit m/s  wvht.unit m   dpd.unit sec   apd.unit  sec mwd.unit degT   pres.unit hPa  atmp.unit C  wtmp.unit  C dewp.unit  C vis.unit  nmi ptdy.unit   hPa tide.unit ft date.format_csvcommandspace_{yyyy-MM-dd_csvcommandspace_hh:mm:ss},-print
</property>
<property name="mapglyphs">
props:fontSize:0px,iconSize:75,canvasWidth:500,canvasHeight:100,fill:#efefef,borderWidth:2,borderColor:#000,font:bold 36px sans-serif
image,pos:nw,dx:10,dy:10-ch,width:60,height:60,url:${icon}
label,pady:5,pos:nw,dx:80,dy:10-ch,label:${entryname}  
label,pos:s,dx:cw2,dy:-10,font:36px sans-serif,label:${match  pattern="(atmp|spd01)" suffix=" ${unit}" prefixLabel=true}
</property>

<property name="bubble">
<![CDATA[
+section  title={{name}}
{{display_linechart showMenu=true fields="atmp|spd01|#2"}} 
{{display_linechart showMenu=true fields="pres|dir01|#3"}} 
-section
]]></property>

<wiki>
<![CDATA[
+section title="Station {{field name=station}} - {{name}}"
:navtop
+toggle Buoy Information
+row
+col-9
{{description wikify=true}}
-col
+col-3
<a target=_site href="https://www.ndbc.noaa.gov/station_page.php?station={{field  name=station}}">NDBC Site</a>
&nbsp;
<a target=_site href="https://www.ndbc.noaa.gov/data/realtime2/{{field name=station}}.{{field name=data_type raw=true}}">Raw Data</a>
{{mapentry height=200px}}
-col
-row
-toggle
:heading Chart
{{property max="20000"}}
{{group}}
{{display_linechart showMenu=true fields="atmp|spd01|#2"}} 
{{display_linechart showMenu=true fields="pres|dir01|#3"}} 
:heading Table
{{display_download}}
{{display_table  includeDate=false }} 
-section
]]>
</wiki>
</type>



<!--
Below is an type definition for the SOFAR buoy file format
The type name can be anything but it is good to have it be prefaced with type_...

The super is the super type, i.e., the base type type_point
The category and supercategory are for showing this type in the
New->Choose Type form

The handler is the default PointTypeHandler
-->
<type name="type_buoy_sofar" 
description="SOFAR Buoy Data" 
super="type_point" 
handler="org.ramadda.data.services.PointTypeHandler">
<!--
define the icon for this type. This is in the plugins htdocs/point directory 
-->
  <property name="icon" value="/point/sofar.png"/>
<!--
This is the main class for handling text/csv data files
-->

  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
<!--   Some properties for what we show in the edit form  -->
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="form.altitude.show" value="true"/>
  <property name="form.date.show" value="false"/>
  <property name="form.properties.show" value="false"/>
<!-- This defines a metadata attribute. It should get filled out by the record.patterns below -->
<column  name="device"  label="Device" type="enumerationplus" cansearch="true"/>
<column  name="cast_duration"  label="Cast Duration" type="double" cansearch="false"/>
<column  name="samples_per_second"  label="Samples/Second" type="double" cansearch="false"/>


  <!-- This is a set of pattern matching for pulling out latitude, longitude and date from the text header
       It is of the form:
       field1:pattern,field2:pattern,...
 -->
  <property name="record.pattern.date.format" value="yyyy-MM-dd HH:mm:ss"/>
  <property name="record.patterns"
	    value="latitude:.*Start +latitude_comma_(.*?)\n,longitude:.*Start +longitude_comma_(.*?)\n,date:.*Cast +time +\(UTC\)_comma_(.*)\n,elevation:.*Start +altitude_comma_(.*?)\n,device:.*Device_comma_(.*?)\n,cast_duration:.*Cast +duration +\(Seconds\)_comma_(.*?)\n,samples_per_second:.*Samples +per +second_comma_(.*?)\n"/>
  <!-- These are properties for the CsvFile code when parsing the file
       the sofar buoy header has % for a delimiter
       The firstLineDefinesFields flag specifies that the first non comment line in the file is a comma separated list
       of field names and possibly units
-->
<property name="record.properties">
commentLineStart=%
firstLineDefinesFields=true                                                          
</property>

<!-- for the map -->
<property name="bubble">
<![CDATA[
+section  title={{name}}
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="temperature,conductivity"
}}
-section
]]></property>


<!-- This is the data icons for the IMDV map -->
<property name="mapglyphs">
props:fontSize:0px,iconSize:75,canvasWidth:500,canvasHeight:100,fill:#efefef,borderWidth:2,borderColor:#000,font:bold 36px sans-serif
image,pos:nw,dx:10,dy:10-ch,width:60,height:60,url:${icon}
label,pady:5,pos:nw,dx:80,dy:10-ch,label:${entryname}  
label,pos:s,dx:cw2,dy:-10,font:36px sans-serif,label:${match  pattern="(atmp)" suffix=" ${unit}" prefixLabel=true}
</property>
<!-- The default wiki display for this entry -->
<wiki>
<![CDATA[
+section title={{name}}
:navtop
{{description wikify=true}}

:heading Plots
{{group hAxisTitle=Depth tooltip="${default}"}}    
+row tight=true
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="temperature,conductivity"
}}
-col
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="salinity,density"
}}
-col
-row
:heading Table
{{display_download}}
{{display_table  includeUnits=false}}
:heading Buoy Information
+row
+col-8
{{information}}
-col
+col-4
{{mapentry}}
-col
-row

-section
]]>
</wiki>
</type>

<type name="type_buoy_sofar_api" 
      description="SOFAR Buoy Data from API" 
      super="type_point" 
      newfields="name,spotter_id,_default"	
      handler="org.ramadda.data.services.PointTypeHandler">
  <property name="search.tabs" value="map,list"/>
  <property name="icon" value="/point/sofar.png"/>
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
  <property name="record.processresource" value="true"/>
  <property name="form.header.new">
    <![CDATA[+note\nJust need to specify a name and  the Spotter ID. Make sure you have the property:<i>property.sofar.api.key</i> set in your RAMADDA\n-note]]>
  </property>    
  <!--   Some properties for what we show in the edit form  -->
  <property name="form.resource.show" value="false"/>
  <property name="form.area.show" value="true"/>
  <property name="form.altitude.show" value="false"/>
  <property name="form.date.show" value="false"/>
  <property name="form.properties.show" value="false"/>


<!-- These is a template that gets filled out with the spotter_id of this entry -->


  <property name="fixed_url" value="https://api.sofarocean.com/api/wave-data?spotterId=${spotter_id}&amp;limit=500&amp;includeWindData=true&amp;includeSurfaceTempData=true&amp;includeTrack=true&amp;includeBarometerData=true"/>

  <!-- This gets passed as an http argument and is the authentication for the request
       get the api key from https://spotter.sofarocean.com/overview
       then set the below property in a repository.properties file
       property.sofar.api.key=your API key
  -->
  <property name="request_arg1" value="token:${sofar.api.key}"/>

  <column  name="spotter_id"  label="Spotter ID" type="string" cansearch="true"/>

<!-- These commands convert the JSON to the standard CSV -->


  <property name="record.properties">
    csvcommands1=-goeasy,-indateformat,yyyy-MM-dd'T'HH:mm:ss,,-jsonjoin,data.surfaceTemp\,data.wind\,data.waves,timestamp,:...000Z,,NaN,-columnsbefore,0,timestamp_comma_degrees,-sortby,timestamp,up,date,-addheader,timestamp.format {yyyy-MM-dd'T'HH:mm:ss} degrees.unit C timestamp.type date peakperiod.label {Peak Period} meandirectionalspread.label {Mean Directional Spread} meandirection.label {Mean Direction} peakdirection.label {Peak Direction} timestamp.label {Timestamp} meanperiod.label {Mean Period}  significantwaveheight.label {Significant Wave Height} peakdirectionalspread.label {Peak Directional Spread} ,-print
  </property>


  <!-- for the map -->
  <property name="bubble">
<![CDATA[
+section  title={{name}}
{{display_linechart fields="degrees"}}
{{display_linechart fields="significantwaveheight"}} 
-section
]]></property>


<!-- This is the data icons for the IMDV map -->
<property name="mapglyphs">
props:fontSize:0px,iconSize:75,canvasWidth:500,canvasHeight:100,fill:#efefef,borderWidth:2,borderColor:#000,font:bold 36px sans-serif
image,pos:nw,dx:10,dy:10-ch,width:60,height:60,url:${icon}
label,pady:5,pos:nw,dx:80,dy:10-ch,label:${entryname}  
label,pos:s,dx:cw2,dy:-10,font:36px sans-serif,label:${match  pattern="(degrees|significantwaveheight)" suffix=" ${unit}" prefixLabel=true}
</property>
<!-- The default wiki display for this entry -->
<wiki>
<![CDATA[
+section title="{{name}}"
:navtop
{{description wikify=true}}
+row 
+col-6
{{display_map height=400px   width="100%" showLast=50 
 initBoundsUseAllRecords=true  initBoundsPadding="0.05" 
doAnimation=true animationMode=cumulative animationInitRange="-50,end"
#showOverviewMap=true overviewMapWidth=240 overviewMapHeight=120  overviewMapResolution=6
showGraticules=true
isTrajectory=true   showPoints=true  tooltip="none"
radius=4 colorBy=degrees strokeWidth=0 pathStrokeWidth=0.25 colorTable=plotly_bluered
}}
-col
+col-6
{{display_template  onlyShowSelected=true filterFields="" labelStyle="max-width:250px;width:250px;"
template="${default}" }}
-col
-row

:heading Charts
{{display_linechart fields="degrees"}}
{{display_linechart fields="significantwaveheight"}} 

:heading Table
{{display_download}}
{{display_table }} 

-section
:vspace 1em
+section ----
:heading Information
{{information details="true"}}                                                                     
-section
]]>
</wiki>
</type>



<!-- a duplicate of the sofar type -->
<type name="type_ctd_castaway" 
description="Castaway CTD Data" 
super="type_point" 
handler="org.ramadda.data.services.PointTypeHandler">
  <property name="search.tabs" value="map,list"/>
  <property name="icon" value="/point/sontek.png"/>
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="form.altitude.show" value="true"/>
  <property name="form.date.show" value="false"/>
  <property name="form.properties.show" value="false"/>
  <column  name="device"  label="Device" type="enumerationplus" cansearch="true"/>
  <column  name="cast_duration"  label="Cast Duration" type="double" cansearch="false"/>
  <column  name="samples_per_second"  label="Samples/Second" type="double" cansearch="false"/>
  <property name="record.pattern.date.format" value="yyyy-MM-dd HH:mm:ss"/>
  <property name="record.patterns"
	    value="latitude:.*Start +latitude_comma_(.*?)\n,longitude:.*Start +longitude_comma_(.*?)\n,date:.*Cast +time +\(UTC\)_comma_(.*)\n,elevation:.*Start +altitude_comma_(.*?)\n,device:.*Device_comma_(.*?)\n,cast_duration:.*Cast +duration +\(Seconds\)_comma_(.*?)\n,samples_per_second:.*Samples +per +second_comma_(.*?)\n"/>
<property name="record.properties">
commentLineStart=%
firstLineDefinesFields=true                                                          
</property>
<property name="bubble">
<![CDATA[
+section  title={{name}}
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="temperature,conductivity"
}}
-section
]]></property>


<property name="mapglyphs">
props:fontSize:0px,iconSize:75,canvasWidth:500,canvasHeight:100,fill:#efefef,borderWidth:2,borderColor:#000,font:bold 36px sans-serif
image,pos:nw,dx:10,dy:10-ch,width:60,height:60,url:${icon}
label,pady:5,pos:nw,dx:80,dy:10-ch,label:${entryname}  
label,pos:s,dx:cw2,dy:-10,font:36px sans-serif,label:${match  pattern="(atmp)" suffix=" ${unit}" prefixLabel=true}
</property>
<wiki>
<![CDATA[
+section title={{name}}
:navtop
{{description wikify=true}}
:heading Plots
{{group hAxisTitle=Depth tooltip="${default}"}}    
+row tight=true
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="temperature,conductivity"
}}
-col
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="salinity,density"
}}
-col
-row
:heading Table
{{display_download}}
{{display_table  includeUnits=false}}
:heading Buoy Information
+row
+col-8
{{information}}
-col
+col-4
{{mapentry}}
-col
-row
-section
]]>
</wiki>
</type>



<type name="type_buoy_nortekadcp" 
description="NORTEK ADCP Buoy" 
super="type_point" 
handler="org.ramadda.data.services.PointTypeHandler">
  <property name="search.tabs" value="map,list"/>
  <property name="icon" value="/point/nortek.png"/>
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="form.properties.show" value="false"/>
  <column  name="instrument"  label="Instrument" type="enumerationplus" cansearch="true"/>
  <property name="record.pattern.date.format" value="yyyy-MM-dd HH:mm:ss"/>
  <property name="record.patterns"
	    value="latitude:.*Latitude_comma_(.*?)_comma_,longitude:.*Longitude_comma_(.*?)_comma_,instrument:.*Instrument +ID_comma_(.*?)\n"/>
<property name="record.properties">
record.type.time=date
record.type.default=double
commentLineStart=%
fieldRow=-2
stripBom=true
record.type.time=date
record.format.time=MM/dd/yyyy hh:mm:ss a
</property>
<property name="bubble">
<![CDATA[
+section  title={{name}}
{{display_profile showMenu=true yAxisReverse=true marginTop=40  profileMode=markers
profileMode="lines+markers" markerSize=8 symbol1=circle symbol2=diamond
indexField="depth" fields="temperature,conductivity"
}}
-section
]]></property>


<property name="mapglyphs">
props:fontSize:0px,iconSize:75,canvasWidth:500,canvasHeight:100,fill:#efefef,borderWidth:2,borderColor:#000,font:bold 36px sans-serif
image,pos:nw,dx:10,dy:10-ch,width:60,height:60,url:${icon}
label,pady:5,pos:nw,dx:80,dy:10-ch,label:${entryname}  
label,pos:s,dx:cw2,dy:-10,font:36px sans-serif,label:${match  pattern="(atmp)" suffix=" ${unit}" prefixLabel=true}
</property>

<wiki>
<![CDATA[
+section title={{name}}
:navtop
:heading Charts
{{display_linechart fields=temperature}} 
{{display_linechart height=250px  vAxisSelectedFields=true 
fields="lower_speed,upper_speed"}} 
+row
+col-3
-col
+col-6
{{display_profile showMenu=true yAxisReverse=true marginTop=40                                                                           
profileMode="lines+markers" markerSize=2 symbol1=circle                                                                                     
indexField="depth" fields="temperature"                                                                                                         
}} 
-col
-row

:heading Table
{{display_download }} 
{{display_table }}

:heading Instrument Information
+row
+col-8
{{information}}
-col
+col-4
{{mapentry}}
-col
-row
-section
]]>
</wiki>
</type>

<type name="type_point_islr" description="Interagency Sea Level Rise (ISLR)" super="type_point_ocean"  foruser="true"
      pattern=".*sl_taskforce_scenarios.*xlsx"
      handler="org.ramadda.geodata.point.ISLRTypeHandler">
  <property name="icon" value="/point/nasa.png"/>
  <property name="form.properties.show" value="false"/>
  <property name="form.date.show" value="false"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
  <property name="form.header.new">
<![CDATA[+note\nDownload the XLS files from <a target=_data href=https://sealevel.nasa.gov/task-force-scenario-tool/>sealevel.nasa.gov</a>\n-note]]></property>    

<column  name="station"  label="Station" type="string" cansearch="false"/>
<column name="convert_commands" type="clob"   rows="5" columns="60" label="Convert Text"  canedit="false"  showinhtml="false" bgroup="Convert"/>
<property name="record.properties">
xls.sheet=2
csvcommands1=-combineinplace,scenario\,quantile,-
csvcommands2=scenario_quantile,-melt,4-20,year,rise
csvcommands3=-makefields,scenario_quantile,rise,year,
csvcommands4=-scale,1-15,0,0.00328084,0
csvcommands5=-addheader, default.unit feet
</property>
<property name="bubble">
<![CDATA[
+section  title={{name}}
{{group}}
{{display_linechart showMenu=true fields="high_50"}}
{{display_linechart showMenu=true fields="int_50"}} 
{{display_linechart showMenu=true fields="intlow_50"}}
-section
]]></property>


<wiki>
<![CDATA[
+section title={{name}}
:navtop
{{description wikify=true}}
{{group}}
+row
+col-9
{{display_linechart showMenu=true fields="high_50"}}
{{display_linechart showMenu=true fields="int_50"}} 
{{display_linechart showMenu=true fields="intlow_50"}}
-col
+col-3
+center
{{resource  message="" title="Download File"}}
-center
{{mapentry}}
+center
View station: 
<a target=_other href="https://sealevel.nasa.gov/task-force-scenario-tool/?psmsl_id={{field name=station}}">@NASA</a>
<a target=_other href="https://psmsl.org/data/obtaining/stations/{{field name=station}}.php">@PSMSL</a>


-center
-col
-row
:heading Table
{{display_download}}
{{display_table}}

----

:heading Information
Data is from the [https://sealevel.nasa.gov/task-force-scenario-tool/ Interagency Sea Level Rise Scenario Tool]
{{information details=true}}
-section
]]>
</wiki>
</type>



<type name="type_point_ex0profiler"  description="EX0 Profiler"  super="type_point" 
	handler="org.ramadda.data.services.PointTypeHandler"
	pattern="(?i).*pfl.*\.dat">
  <property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
  <property name="icon" value="/point/exo2.png"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="subset.area.show" value="false"/>
  <property name="subset.date.show" value="true"/>     
<property name="record.properties">
<![CDATA[
record.searchsuffix.pfl_counter=Enter one or more profile numbers. One per row
record.searchsuffix.derived_counter=Enter one or more profile numbers. One per row	 
missing=-7999

csvcommands1=-cleaninput,-skip,1,-cut,1\,2
csvcommands2=-trendcounter,_rs232dpt,Derived Counter,-columnsafter,pfl_counter
csvcommands3=derived_counter,-addheader, timestamp.type date  timestamp.format {yyyy-MM-dd HH:mm:ss} default.type double default.searchable true record.searchable false timestamp.searchable false pfl_counter.type enumeration   derived_counter.type enumeration

]]></property>

<wiki>
<![CDATA[
+section title={{name}}
{{description wikify=true}}
{{property max="20000"}}
{{group 
showLegend=false  marginRight=0 markerSize=8 profileMode=lines+markers  
convertData="groupTime(field=derived_counter);" 

}}

+row
+col-6
{{display_fieldslist  showPopup=true  numericOnly=true fields=temp_c selectOne=true
fieldsSelected.shareGroup="profile1"}} 
{{display_profile height=300px marginTop=10  indexField=_rs232dpt  setRangeFromAllValues=true
filteredTimes.accept=true
fields=temp_c fieldsSelected.acceptGroup="profile1" 
doAnimation=true animationStartAtEnd=true animationMode=frame  animationDateFormat=yyyymmddhhmm
yAxisReverse=true yAxisTitle=Depth
}} 
{{display_fieldslist  showPopup=true  numericOnly=true fields=cond_s_cm selectOne=true
fieldsSelected.shareGroup="profile2"}} 
{{display_profile height=300px marginTop=10  indexField=_rs232dpt  setRangeFromAllValues=true
filteredTimes.accept=true
fields=cond_s_cm  fieldsSelected.acceptGroup="profile2" 
doAnimation=true animationStartAtEnd=true animationMode=frame  animationDateFormat=yyyymmddhhmm
yAxisReverse=true yAxisTitle=Depth
}} 
-col
+col-6
+tabs
+tab Table
{{display_fieldslist  showPopup=true  numericOnly=true  fieldsSelected.shareGroup="table"   }}
{{display_download  fieldsSelected.acceptGroup="table"}}
{{display_table    fieldsSelected.acceptGroup="table"
propagateFilteredTimes=true
filterFields=derived_counter  height=80vh fields=timestamp,derived_counter,pfl_counter,_rs232dpt,temp_c
}}
-tab
+tab Selected Record
{{display_template  onlyShowSelected=true filterFields="" labelStyle="max-width:200px;width:200px;"
template="${default}" }}
-tab
-tabs
-col
-row
:vspace
----
:vspace
:heading Information
+row
+col-9
{{information details=true}}
-col
+col-3
{{mapentry hideIfNoLocations=true width="100%" height="300px"}}
-col
-row
-section
]]>
</wiki>
</type>

<type name="type_noaa_tides" 
description="NOAA Tides" 
super="type_point" 
handler="org.ramadda.geodata.point.NoaaTidesTypeHandler"
editfields="station_id,_default"	>

  <property name="search.tabs" value="map,list"/>
  <property name="icon" value="/point/noaa.gif"/>
  <property name="form.area.show" value="false"/>
  <property name="form.location.show" value="true"/>
  <property name="date.nullok" value="true"/>
  <property name="form.resource.show" value="true"/>
  <property name="form.properties.show" value="false"/>
  <property name="form.header.new"><![CDATA[]]></property>    
  <property name="form.header.new">
<![CDATA[+note\nView station IDS at <a target=_map href=https://tidesandcurrents.noaa.gov/stations.html?type=Water+Levels>NOAA Tides and Currents Site</a>\n-note]]></property>    

  <column  name="station_id"  label="Station ID" type="string" cansearch="true" />
  <column  name="station_name"  label="Station Name" type="string" cansearch="true"/>
  <column  name="state"  label="State" type="enumeration" cansearch="true"/>    
  <column  name="tidal"  label="Tidal" type="boolean" cansearch="true"/>
  <column  name="flood_stage_minor"  label="Flood Stage Minor" default="NaN" type="double"   cansearch="false"/>
  <column  name="flood_stage_moderate"  label="Flood Stage Moderate" default="NaN"  type="double"   cansearch="false"/>
  <column  name="flood_stage_major"  label="Flood Stage Major" default="NaN"  type="double"   cansearch="false"/>        

  <column  name="fields"  label="Fields to show in chart" type="string" cansearch="false" showinhtml="false" default="#2"/>    
<property name="record.file.class" value="org.ramadda.data.point.text.CsvFile"/>
<property name="record.properties">
</property>
<wiki>
<![CDATA[
+section title="{{name}}"
:navtop
+row
+col-9
{{description wikify=true}}
:heading Chart
{{property max="20000"}}
{{group}}
{{display_barchart showMenu=true height="300px"
vAxisSharedRange=true  vAxisMinValue=0 fields="property:fields"}} 
:heading Table
{{display_download}}
{{display_table  includeDate=false }} 
-col
+col-3
<b>Station:</b> {{field name=station_id}}
<a target=_other href="https://tidesandcurrents.noaa.gov/stationhome.html?id={{field name=station_id}}">
NOAA Site</a>
:vspace 1em
+center
{{image src="::*" message="" width="90%"}}
-center
:vspace 1em
{{mapentry hideIfNoLocations=true width="100%" height=300px}}
-col
-row
:vspace 1em
----
:heading Information
{{information details=true}}
-section
]]>
</wiki>
</type>


<type name="type_noaa_tides_base"  foruser="false"
description="NOAA Tides - Base " 
super="type_noaa_tides" >
  <column  name="days"  label="Days" type="int" 
	 default="-1"
	 help="Override the # of days offset from the end date&lt;br&gt;Max: 6 minutes: 31 days; Hourly Height and High Low: 365 days"
	 cansearch="false"/>  
  <column name="datum" label="Datum" type="enumeration" default="MLLW"
	  values="file:/org/ramadda/geodata/point/resources/noaadatums.txt"/>
</type>


<type name="type_noaa_tides_waterlevel" 
description="NOAA Tides - Water Level" 
super="type_noaa_tides_base" 
editfields="station_id,product,days,date,_default">
  <property name="form.date.help" value="Optionally specify a date range"/>

  <property name="form.header.new">
<![CDATA[+note\nEither specify a station and product or upload a file.<br>View station IDS at <a target=_map href=https://tidesandcurrents.noaa.gov/map/index.html>NOAA Tides and Currents Site</a>\n-note]]></property>    



  <column  name="product"  label="Product" type="enumeration" values="water_level:6 Minutes,hourly_height:Hourly Height,high_low:High Low" cansearch="true"/>
<property name="record.properties">
csvcommands1=-dateformat,yyyy-MM-dd HH:mm,GMT,-convertdate,date_time
csvcommands2=-addheader, date_time.type date date_time.format {yyyy-MM-dd HH:mm} ty.label {Water level height} ty.type enumeration quality.type enumeration ty.enumeratedValues {HH:Higher High water;H:High water;L:Low water;LL:Lower Low water}
</property>
<wiki>
<![CDATA[
+section title="{{name}}"
:navtop
+row
+col-9
{{description wikify=true}}
:heading Charts
{{property max="20000"}}
{{group filterFields=ty hideFilterWidget=true}}
{{display_filter}} 
{{display_linechart showMenu=true height=300px fields="water_level"
vAxisSharedRange=true
fixedLine0="value:${property:flood_stage_minor},label:Minor flood stage,lineWidth:1,color:green,lineDashStyle:1;1"
fixedLine1="value:${property:flood_stage_moderate},label:Moderate flood stage,lineWidth:1,color:blue,lineDashStyle:1;1"
fixedLine2="value:${property:flood_stage_major},label:Major flood stage,lineWidth:2,color:red,lineDashStyle:4;1"
}}
:heading Table
{{display_download}}
{{display_table }} 
-col
+col-3
<b>Station:</b> {{field name=station_id}}
<a target=_other href="https://tidesandcurrents.noaa.gov/stationhome.html?id={{field name=station_id}}">NOAA Site</a>
<br>
<b>Datum:</b> {{field name=datum}}<br>
:vspace 1em
+center
{{image src="::*" message="" width="90%"}}
-center
:vspace 1em
{{mapentry hideIfNoLocations=true width="100%" height=300px}}
-col
-row
:vspace 1em
----
:heading Information
{{information details=true}}
-section
]]>
</wiki>
</type>



<type name="type_noaa_tides_monthly" 
description="NOAA Tides - Monthly Mean" 
super="type_noaa_tides_base" editfields="station_id,days,date,_default">

<property name="record.properties">
csvcommands1=-combine,year\,month,-,date,-notcolumns
csvcommands2=year\,month,-firstcolumns,date,-change,1-20
csvcommands3=^$,NaN,-addheader, date.format {yyyy-MM} highest.label   {Highest Tide} mhhw.label      {Mean Higher-High Water} mhw.label       {Mean High Water} msl.label       {Mean Sea Level} mtl.label       {Mean Tide Level} mlw.label       {Mean Low Water} mllw.label      {Mean Lower-Low Water} dtl.label       {Mean Diurnal Tide Level} gt.label        {Great Diurnal Range} mn.label        {Mean Range of Tide} dhq.label       {Mean Diurnal High Water Inequality} dlq.label       {Mean Diurnal Low Water Inequality} hwi.label       {Greenwich High Water Interval} lwi.label       {Greenwich Low Water Interval} lowest.label    {Lowest Tide}
</property>
<wiki>
<![CDATA[
+section title="{{name}}"
:navtop
+row
+col-9
{{description wikify=true}}
:heading Charts
{{property max="20000"}}
{{group
fixedLine0="value:${property:flood_stage_minor},label:Minor flood stage,lineWidth:1,color:green,lineDashStyle:1;1"
fixedLine1="value:${property:flood_stage_moderate},label:Moderate flood stage,lineWidth:1,color:blue,lineDashStyle:1;1"
fixedLine2="value:${property:flood_stage_major},label:Major flood stage,lineWidth:2,color:red,lineDashStyle:4;1"
}}
{{display_linechart showMenu=true height=200px fields="highest" vAxisSharedRange=true
}}
{{display_linechart showMenu=true height=200px fields="mhw" vAxisSharedRange=true }} 
-col
+col-3
<b>Station:</b> {{field name=station_id}}
<a target=_other href="https://tidesandcurrents.noaa.gov/stationhome.html?id={{field name=station_id}}">
NOAA Site</a>
:vspace 1em
+center
{{image src="::*" message="" width="90%"}}
-center
:vspace 1em
{{mapentry hideIfNoLocations=true width="100%" height=300px}}
-col
-row
:vspace 1em
:heading Table
{{display_download}}
{{display_table }} 


:vspace 1em
----
:heading Information
{{information details=true}}
-section
]]>
</wiki>
</type>


<type name="type_noaa_tides_trend" 
description="NOAA Tides - Sea Level Trend" 
super="type_noaa_tides" 
editfields="station_id,_default">
<property name="form.date.show" value="false"/>
  <property name="form.header.new">
    <![CDATA[
+note
Download the CSV file from the tidesandcurrents.noaa.gov site for the station, e.g.
<a target=_other href=https://tidesandcurrents.noaa.gov/sltrends/sltrends_station.shtml?id=8575512>
https://tidesandcurrents.noaa.gov/sltrends/sltrends_station.shtml?id=8575512	      
</a>
-note]]></property>    

<property name="record.properties">
csvcommands1=-skiplines,5,-notcolumns,6-10,-combine
csvcommands2=year\,month,-,date,-change,date
csvcommands3=-(.)$,-0$1,-firstcolumns,date,-addheader
csvcommands4= year.type enumeration month.type enumeration date.format yyyy-MM
</property>
<wiki>
<![CDATA[
+section title="{{name}}"
:navtop
+row
+col-9
{{description wikify=true}}
{{display_linechart vAxisSharedRange=true height=300px fields=monthly_msl,linear_trend}} 
:heading Table
{{display_download}}
{{display_table}}

-col
+col-3
<b>Station:</b> {{field name=station_id}}
<a target=_other
href="https://tidesandcurrents.noaa.gov/sltrends/sltrends_station.shtml?id={{field name=station_id}}">
NOAA Site</a>
:vspace 1em
+center
{{image src="::*" message="" width="90%"}}
-center
:vspace 1em
{{mapentry hideIfNoLocations=true width="100%" height=300px}}
-col
-row
:vspace 1em
----
:heading Information
{{information details=true}}
-section
]]>
</wiki>
</type>









</types>
