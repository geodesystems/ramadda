set blocks {
<option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_01_bg_500k.zip">Alabama</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_02_bg_500k.zip">Alaska</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_04_bg_500k.zip"> Arizona</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_05_bg_500k.zip"> Arkansas</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_06_bg_500k.zip"> California</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_08_bg_500k.zip"> Colorado</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_09_bg_500k.zip"> Connecticut</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_10_bg_500k.zip"> Delaware</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_11_bg_500k.zip"> District of Columbia</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_12_bg_500k.zip"> Florida</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_13_bg_500k.zip"> Georgia</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_15_bg_500k.zip"> Hawaii</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_16_bg_500k.zip"> Idaho</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_17_bg_500k.zip"> Illinois</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_18_bg_500k.zip"> Indiana</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_19_bg_500k.zip"> Iowa</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_20_bg_500k.zip"> Kansas</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_21_bg_500k.zip"> Kentucky</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_22_bg_500k.zip"> Louisiana</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_23_bg_500k.zip"> Maine</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_24_bg_500k.zip"> Maryland</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_25_bg_500k.zip"> Massachusetts</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_26_bg_500k.zip"> Michigan</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_27_bg_500k.zip"> Minnesota</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_28_bg_500k.zip"> Mississippi</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_29_bg_500k.zip"> Missouri</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_30_bg_500k.zip"> Montana</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_31_bg_500k.zip"> Nebraska</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_32_bg_500k.zip"> Nevada</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_33_bg_500k.zip"> New Hampshire</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_34_bg_500k.zip"> New Jersey</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_35_bg_500k.zip"> New Mexico</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_36_bg_500k.zip"> New York</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_37_bg_500k.zip"> North Carolina</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_38_bg_500k.zip"> North Dakota</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_39_bg_500k.zip"> Ohio</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_40_bg_500k.zip"> Oklahoma</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_41_bg_500k.zip"> Oregon</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_42_bg_500k.zip"> Pennsylvania</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_44_bg_500k.zip"> Rhode Island</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_45_bg_500k.zip"> South Carolina</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_46_bg_500k.zip"> South Dakota</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_47_bg_500k.zip"> Tennessee</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_48_bg_500k.zip"> Texas</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_49_bg_500k.zip"> Utah</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_50_bg_500k.zip"> Vermont</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_51_bg_500k.zip"> Virginia</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_53_bg_500k.zip"> Washington</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_54_bg_500k.zip"> West Virginia</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_55_bg_500k.zip">Wisconsin</option>
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_56_bg_500k.zip"> Wyoming</option>
    <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_60_bg_500k.zip"> American Samoa</option> 
      <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_66_bg_500k.zip"> Guam</option> 
        <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_69_bg_500k.zip"> Commonwealth of the Northern Mariana Islands</option> 
  <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_72_bg_500k.zip"> Puerto Rico</option>  
    <option value= "https://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_78_bg_500k.zip"> U.S. Virgin Islands</option> 
    </select>}

set tracts {
<option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_01_tract_500k.zip">Alabama</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_02_tract_500k.zip">Alaska</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_04_tract_500k.zip"> Arizona</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_05_tract_500k.zip"> Arkansas</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_06_tract_500k.zip"> California</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_08_tract_500k.zip"> Colorado</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_09_tract_500k.zip"> Connecticut</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_10_tract_500k.zip"> Delaware</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_11_tract_500k.zip"> District of Columbia</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_12_tract_500k.zip"> Florida</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_13_tract_500k.zip"> Georgia</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_15_tract_500k.zip"> Hawaii</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_16_tract_500k.zip"> Idaho</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_17_tract_500k.zip"> Illinois</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_18_tract_500k.zip"> Indiana</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_19_tract_500k.zip"> Iowa</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_20_tract_500k.zip"> Kansas</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_21_tract_500k.zip"> Kentucky</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_22_tract_500k.zip"> Louisiana</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_23_tract_500k.zip"> Maine</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_24_tract_500k.zip"> Maryland</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_25_tract_500k.zip"> Massachusetts</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_26_tract_500k.zip"> Michigan</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_27_tract_500k.zip"> Minnesota</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_28_tract_500k.zip"> Mississippi</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_29_tract_500k.zip"> Missouri</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_30_tract_500k.zip"> Montana</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_31_tract_500k.zip"> Nebraska</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_32_tract_500k.zip"> Nevada</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_33_tract_500k.zip"> New Hampshire</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_34_tract_500k.zip"> New Jersey</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_35_tract_500k.zip"> New Mexico</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_36_tract_500k.zip"> New York</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_37_tract_500k.zip"> North Carolina</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_38_tract_500k.zip"> North Dakota</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_39_tract_500k.zip"> Ohio</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_40_tract_500k.zip"> Oklahoma</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_41_tract_500k.zip"> Oregon</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_42_tract_500k.zip"> Pennsylvania</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_44_tract_500k.zip"> Rhode Island</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_45_tract_500k.zip"> South Carolina</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_46_tract_500k.zip"> South Dakota</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_47_tract_500k.zip"> Tennessee</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_48_tract_500k.zip"> Texas</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_49_tract_500k.zip"> Utah</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_50_tract_500k.zip"> Vermont</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_51_tract_500k.zip"> Virginia</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_53_tract_500k.zip"> Washington</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_54_tract_500k.zip"> West Virginia</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_55_tract_500k.zip">Wisconsin</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_56_tract_500k.zip"> Wyoming</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_60_tract_500k.zip"> American Samoa</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_66_tract_500k.zip"> Guam</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_69_tract_500k.zip"> Commonwealth of the Northern Mariana Islands</option>
  <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_72_tract_500k.zip"> Puerto Rico</option>
    <option value= "http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_78_tract_500k.zip"> U.S. Virgin Islands</option> }

proc state {abbr name fips lat lon} {
    set ::abbrToFips($abbr) $fips
}
source dict.states.tcl
source ~/bin/lib.tcl

proc processHtml {html suffix} {
    puts "<entries>"
    while {[regexp {.*?<option\s+value\s*=\s*"([^"]+?)">\s*([^<]+?)<(.*)$} $html match url name html]} {
        regexp {.*cb_2017_([^_]+)_} $url match fips
        regsub http: $url https: url
         set c [xmlTag fips $fips [list encoded false]]
         puts [xmlTag entry $c [list type geo_shapefile_fips download true url $url name "$name $suffix"]]
     }
     puts "</entries>"
}


#processHtml $tracts {Census Tracts}
processHtml $blocks {Census Blocks}


