<html>
<head>
<title>Extended Edit</title>
  <link rel="stylesheet" type="text/css" href="./default.css" title="Style">

</head>

<body>
<div class="ramadda-documentation">
<div class="ramadda-doc-header">
<div style='padding-top:12px;margin-bottom:4px;'><a href="toc.html#extendededit.html"><span title="Table of contents"><i  style='font-size:16pt;'  class="fa fa-list "></i></span></a> &nbsp; <a href="index.html">RAMADDA User Guide</a>  > <a href="page_ramaddaentries.html">RAMADDA Entries</a> </div>
<table width=100% cellspacing=0 cellpadding=0 >
<tr valign=center><td width=25%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="editing.html"><table><td valign=center><td><span title="Previous: Editing Entries and their Properties"><i  style='font-size:16pt;'  class="fa fa-caret-left "></i></span></td><td>Editing Entries and their Properties</td></tr></table></a></div></div></td>
<td width=50% align=center>
<div class="ramadda-page-title"><a href="#">Section 3.3: Extended Edit</a></div>
</td>
<td align=right width=25%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="access.html"><table><tr valign=center><td>Entry Permissions</td><td><span title="Next: Entry Permissions"><i  style='font-size:16pt;'  class="fa fa-caret-right "></i></span></td></tr></table></a> </div></div> </td>
</tr></table>
</div>

<style type="text/css">
pre {
    margin-left:15px;
}
.ramadda-lheading {
    margin-top:15px;
}
</style>

<div class="ramadda-doc-contents" style="margin-left:20px;">




:navtop

+callout-info
There are a number of other edit capabilities under the Edit-&gt;Extended Edit menu. 
-callout


:heading Setting Metadata
For Folders you can recurse down the entry hierarchy and set the spatial and/or temporal bounds of each entry as the union of its children entry metadata.
When applied the set of entries that have been changed will be shown:

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/extedit_metadata.png?version=946"><img  src="images/extedit_metadata.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/extedit_metadata.png?version=946" ></a></div></div>


<a name="addalias"></a>
:heading Adding Aliases
Any entry can have one or more  aliases, e.g., "mydata". When an entry has an alias then it can be accessed via:
<pre>
https://yourramadda.org/repository/a/mydata
</pre>

An alias is a property and can be added with the entry menu-&gt;Add Alias:
<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/addalias1.png?version=946"><img  src="images/addalias1.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/addalias1.png?version=946" ></a></div></div>

Alternatively, you can go to entry menu-&gt;Add Property and select Add Alias under the
Thumbnails, Page Style, Etc., section:
<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/addalias2.png?version=946"><img  src="images/addalias2.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/addalias2.png?version=946" ></a></div></div>

If you have a number of entries that you want to add an alias for you can do that through the
Extended Edit page:

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/addalias3.png?version=946"><img  src="images/addalias3.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/addalias3.png?version=946" ></a></div></div>

Scroll down to the "Add aliases for children entries" section and provide the template with the ${name} macro. The name will be a cleaned up version (lower case, no spaces, no special characters) of each entry name:
<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/addalias4.png?version=946"><img  src="images/addalias4.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/addalias4.png?version=946" ></a></div></div>

Initially no aliases will be added. Select the entries you want an alias for and press "Add aliases to selected entries".
If an entry already has an alias then no new alias will
be added. If an entry exists somewhere else that has the same alias then the alias won't be added.
You can always go and edit any of these aliases through the entry's Edit Properties section.

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/addalias5.png?version=946"><img  src="images/addalias5.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/addalias5.png?version=946" ></a></div></div>



:heading Change Entry Type
The entry type of the entry you are editing can be changed.
+callout-info
Note: for entries that have special attributes (e.g., Project, Point Data) when you change the type to a different type the special attributes will be deleted.
-callout

:heading Change Descendents Entry Type
You can also recurse down the folder tree and change the type of all entries that match the specified original entry type
and/or a pattern that is matched on the name or the filename of the entry. Note: the pattern is a regular expression.

+callout-info
It is best to first see what entries would be changed. Then when satisfied
check on the "Yes, change them" checkbox.
-callout

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/extedit_changetype.png?version=946"><img  src="images/extedit_changetype.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/extedit_changetype.png?version=946" ></a></div></div>

So, for example, you might have a folder that contains a set of plain File entries that you want to change to be a certain data
type (e.g., Landsat Satellite Data). You would select "File" as the Old Type, Landsat Satellite data as the new type.
If you had a number of File entries but not all are to be changed you can use the pattern (e.g., ".*.hdf")
to match on the File entries that you want to change.
 




:heading Change Descendents URL Path
You can recurse through the descendents and change the entries that have URLs.
<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/extedit_urls.png?version=946"><img  src="images/extedit_urls.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/extedit_urls.png?version=946" ></a></div></div>

:heading File Listing
The Generate File Listing will provide a summary of all of the files in the hierarchy. You 
can choose to only list entries that have a file that is missing or only list entries that are OK.

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/extedit_listing.png?version=946"><img  src="images/extedit_listing.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/extedit_listing.png?version=946" ></a></div></div>

<a name="javascript"></a>
:heading Process with Javascript
This extended edit form allows you to specify some javascript that is called for each entry
down through the entry hierarchy. This enables you to do complex changes across an entire tree of
entries.

+callout-info
You need to check on the "Apply changes to entries" checkbox to have your changes actually applied.
-callout

<div style='text-align:center;' class='ramadda-docs-image'><div><a href="images/extedit_js.png?version=946"><img  src="images/extedit_js.png?version=946"  onload='HtmlUtils.initScreenshot(this);this.onload=null;' style='display:none;'  alt="images/extedit_js.png?version=946" ></a></div></div>

This can be Javascript code with if/else, looping etc.
For example:
<pre>
if(entry.getName()=='') {	
     entry.setName('This entry has no name');
} else {
    ctx.print('entry has a name:' + entry.getName());
}
</pre>



+callout-info
If you have an LLM AI API configured (e.g., ChatGPT, Google Gemini, Anthropic Claude)
you can use the following Extended Edit Javascript commands:
-callout-info

:heading2 Using LLM to add metadata

<pre>
  entry.addLLMMetadata('metadata_type','prompt',check_if_exists)
</pre>

<b> metadata_type:</b>
The metadata type can be found by going to the Add Properties, looking for the type
and looking at the form URL for metadata_type="the type"
:p

<b>prompt:</b> The prompt has to be crafted to tell the LLM  to only return the text
that you desire for the metadata element.
If there are multiple metadata elements specify that they should be separated by a semi-colon.
You have to be stern sometimes. Something to the effect:
<pre>
Extract no more than three keywords from the document. 
Only return the keywords in your response. Do not return anything else except the keyword.
If there are multiple keywords then they must be separated by a semi-colon ;
</pre>

A good way of figuring out the prompt to use is to use the Document Chat facility on the
entry. Go to the Entry Popup Menu and choose "Document Chat". This is an interactive facility
where you can try out the prompt and see the result. Once you have a prompt that gives an
acceptable result 
:p
<b>check_if_exists:</b> true or false. If true check if there already is a 
metadata on the entry. If there is do not add a new one.
:p
For example there is a metadata type "tribe_name". The below call extracts the  tribe name from
the document
<pre>
entry.addLLMMetadata('tribe_name',
'Extract the native american tribe names that are mentioned by  the document. Only return the tribe names in your response. Do not return anything else except the names. If there are multiple names  then they must be separated by a semi-colon ;',true)
</pre>


:heading2 Using LLM to add location
If you have an LLM AI API configured (e.g., ChatGPT, Google Gemini, Anthropic Claude)
you can extract the geographic location (lat/lon) from a document with the command:
<pre>
entry.addLLMGeo('')
</pre>
The default prompt if one is not given is:
<pre>
Give the latitude and longitude of the area that this document describes.
Just give the 2 numbers, nothing else. Give it in the form
&lt;latitude&gt;,&lt;longitude&gt;
</pre>




</div>
<p>

<p>&nbsp;<p>

<div class="ramadda-doc-footer">
<table width=100% cellspacing=0 cellpadding=0 >
<tr><td width=30%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="editing.html"><table><td valign=center><td><span title="Previous: Editing Entries and their Properties"><i  style='font-size:16pt;'  class="fa fa-caret-left "></i></span></td><td>Editing Entries and their Properties</td></tr></table></a></div></div></td>
<td align=right width=30%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="access.html"><table><tr valign=center><td>Entry Permissions</td><td><span title="Next: Entry Permissions"><i  style='font-size:16pt;'  class="fa fa-caret-right "></i></span></td></tr></table></a> </div></div> </td>
</tr></table>
</div>
<p>
</div>
</body>
</html>

