<html>
<head>
<title>Installing RAMADDA on CentOS</title>
  <link rel="stylesheet" type="text/css" href="./default.css" title="Style">

</head>

<body>
<div class="ramadda-documentation">
<div class="ramadda-doc-header">
<div style='padding-top:12px;margin-bottom:4px;'><a href="toc.html#centos.html"><span title="Table of contents"><i  style='font-size:16pt;'  class="fa fa-list "></i></span></a> &nbsp; <a href="index.html">RAMADDA User Guide</a>  > <a href="page_installationandsiteadministration.html">Installation and Site Administration</a> </div>
<table width=100% cellspacing=0 cellpadding=0 >
<tr valign=center><td width=25%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="aws.html"><table><td valign=center><td><span title="Previous: Installing on Amazon AWS"><i  style='font-size:16pt;'  class="fa fa-caret-left "></i></span></td><td>Installing on Amazon AWS</td></tr></table></a></div></div></td>
<td width=50% align=center>
<div class="ramadda-page-title"><a href="#">Section 9.2: Installing RAMADDA on CentOS</a></div>
</td>
<td align=right width=25%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="configuration.html"><table><tr valign=center><td>Configuration Options</td><td><span title="Next: Configuration Options"><i  style='font-size:16pt;'  class="fa fa-caret-right "></i></span></td></tr></table></a> </div></div> </td>
</tr></table>
</div>

<style type="text/css">
pre {
    margin-left:15px;
}
.ramadda-lheading {
    margin-top:15px;
}
</style>

<div class="ramadda-doc-contents" style="margin-left:20px;">


:navtop

+callout-info
Some notes on installing RAMADDA on centos. This is assuming you are running
the stand-alone version of RAMADDA
-callout

You need to hava Java installed. The minimum version is JDK8.0

:heading Firewall
You need to have the http and https (if using a certificate) ports open.
If you are using port 80 then do:

+pre addCopy=true
firewall-cmd --add-port=80/tcp --permanent
-pre

If port 8080 do:
+pre addCopy=true
firewall-cmd --add-port=8080/tcp --permanent
-pre

For https access open port 443
+pre addCopy=true
firewall-cmd --add-port=443/tcp --permanent
-pre

Once you define the ports reload the firewall-
+pre addCopy=true
firewall-cmd --reload
-pre

You can list the firewall settings with:
+pre addCopy=true
firewall-cmd --list-all
-pre

+callout-info
Note: Running with port 80 requires the RAMADDA process to be run as the root user.
If you do not want to run it as root for security reasons you can set the port to
a higher port (e.g., 8080).
If you do this and also have SSL enabled (as described below) the SSL port should also
be set to a high port, e.g. 8443
-callout



:heading Setting up directories
You should set up 2 directories- ramaddahome and ramaddainstall:
+pre addCopy=true
mkdir  ramaddahome
mkdir  ramaddainstall
-pre

The <i>ramaddahome</i> directory is where RAMADDA will store the database, files, etc.
See <a href=installing.html#home>here</a> for more information on the RAMADDA home directory.


:heading Install RAMADDA
See <a href=installing.html#standalone>here</a> for information on installing the stand-alone version
of RAMADDA.

:heading Reinstall RAMADDA
To reinstall RAMADDA on Centos you can use the following script

+pre addDownload=true downloadFile=reinstall.sh addCopy=true
#!/bin/sh

#
#This reinstalls RAMADDA on a centos. It assumes ramadda has been installed as a service
#Run this from the ramaddainstall directory, i.e., the directory that holds the ramaddaserver directory
#

#get the latest release
wget  -O ramaddaserver.zip https://ramadda.org/repository/entry/get/ramaddaserver.zip?entryid=synth%3A498644e1-20e4-426a-838b-65cffe8bd66f%3AL3JhbWFkZGFzZXJ2ZXIuemlw

#stop ramadda
systemctl stop ramadda

#install the new ramadda
rm -r -f ramaddaserver
unzip ramaddaserver.zip

#start ramadda
systemctl start ramadda
-pre


:heading Running RAMADDA
Now, as root you can  run RAMADDA using the ramadda.sh script in the ramaddaserver directory:
+pre addCopy=true
sh &lt;INSTALL_DIR&gt;/ramaddaserver/ramadda.sh
-pre

:heading Defining a service
To have RAMADDA automatically start on machine start you should define a service.
There is a template for a ramadda.service in:
+pre
ramaddaserver/ramadda.service
-pre

Edit this file and change the two lines to point to where you have the  ramadda server directory:
+pre 
ExecStart=/bin/bash -c "&lt;INSTALL_DIR&gt;/ramaddaserver/ramaddaService.sh start wait"
ExecStop=/bin/bash -c "&lt;INSTALL_DIR&gt;/ramaddaserver/ramaddaService.sh stop"
-pre

Note: the wait argument above is used to call wait in ramaddaSerice.sh because otherwise
when the shell process exits it also kills the spawned ramadda.sh process. This is not
the behavior on AWS Linux so the wait argument enables us to use this same ramaddaService script
on both systems

      
Copy this file to:
+pre addCopy=true
/etc/systemd/system/ramadda.service
-pre


To load the service run:
+pre addCopy=true
systemctl daemon-reload
-pre

To enable the service to run on boot do:
+pre addCopy=true
systemctl enable
-pre




To start or start ramadda:
+pre
systemctl start ramadda
systemctl stop ramadda
-pre

To view any service errors:
+pre addCopy=true
journalctl -xe | grep ramadda
-pre



:heading Generating a certificate
See <a href=installing.html#ssljetty>here</a> for information about  setting up a certificate
for https access to your RAMADDA.





</div>
<p>
<div  class="childlist" ><table  width="100%" ></table></div>
<p>&nbsp;<p>

<div class="ramadda-doc-footer">
<table width=100% cellspacing=0 cellpadding=0 >
<tr><td width=30%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="aws.html"><table><td valign=center><td><span title="Previous: Installing on Amazon AWS"><i  style='font-size:16pt;'  class="fa fa-caret-left "></i></span></td><td>Installing on Amazon AWS</td></tr></table></a></div></div></td>
<td align=right width=30%><div class=ramadda-doc-nav-container><div class=ramadda-doc-nav><a href="configuration.html"><table><tr valign=center><td>Configuration Options</td><td><span title="Next: Configuration Options"><i  style='font-size:16pt;'  class="fa fa-caret-right "></i></span></td></tr></table></a> </div></div> </td>
</tr></table>
</div>
<p>
</div>
</body>
</html>

