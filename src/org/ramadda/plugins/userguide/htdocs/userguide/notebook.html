<html>
<head>
<title>RAMADDA Notebooks</title>
  <link rel="stylesheet" type="text/css" href="./default.css" title="Style">

</head>

<body>
<div class="ramadda-documentation">
<table width=100% cellspacing=0 cellpadding=0 ><tr><td width=30%>
<a href="wikidisplay.html"><img src="images/previous.png" border="0"   alt="Previous: Wiki Display Components" title="Previous: Wiki Display Components"></a> <a href="pagestyle.html"><img src="images/next.png" border="0"   alt="Next: Page Styles" title="Next: Page Styles"></a>  <a href="toc.html#notebook.html"><img src="images/table.png" border="0"   alt="Table of contents" title="Table of contents"></a>
</td>
<td width=40% align=center>
<div class="ramadda-page-title"><a href="${root}/userguide/index.html">RAMADDA User Guide</a></div>
</td>
<td width=30%>&nbsp;</td>
</tr></table>
<div class="ramadda-page-heading">Section 5.3: RAMADDA Notebooks</div>

<style type="text/css">
pre {
    margin-left:15px;
}
</style>

<div style="margin-left:20px;">






The Notebook display provides an interactive notebook that can display html, execute javascript and perform other "shell" functions.

<a name="creating"></a><p><div class="ramadda-help-heading">5.3.0 <a href="#creating">Creating a notebook</a></div> 

A notebook can be created for any entry with the following wiki text:
<div style="margin:10p;"><pre>
{{display type=&quot;notebook&quot; showMenu=&quot;false&quot; showTitle=&quot;false&quot;}}
</pre></div>

Notebooks are always associated with an entry. You can have multiple notebooks for an entry using the notebookId attribute:

<div style="margin:10p;"><pre>
//This is the default notebook
{{display type=&quot;notebook&quot; showMenu=&quot;false&quot; showTitle=&quot;false&quot;}}

{{display type=&quot;notebook&quot; notebookId=&quot;notebook2&quot; showMenu=&quot;false&quot; showTitle=&quot;false&quot;}}

{{display type=&quot;notebook&quot; notebookId=&quot;notebook3&quot; showMenu=&quot;false&quot; showTitle=&quot;false&quot;}}
</pre></div>


When a notebook is saved (see below) it is saved as a JSON file and is  attached to the entry as a property. 
The notebook file be accessed and/or deleted through the entry's Edit Properties menu.

<p>

A notebook is made up of a number of notebook cells. Initially there is just one cell.
Each cell has an input area, output area and cell menu. The menu can either be accessed through
the Notebook menu or from the left side link that is shown on mouseover:

<a name="image1"></a><div class="cimg"><a href="images/notebook1.png"><img  src="images/notebook1.png"  alt="Notebook Menu" ></a><br><span class="caption">Image 1: Notebook Menu</span></div>


<a name="editing"></a><p><div class="ramadda-help-heading">5.3.1 <a href="#editing">Editing a notebook</a></div> 
The menubar at the top of the input area is just RAMADADA's wiki text <a href="wiki.html#menubar">menu bar</a>.
Use the following tags to denote and separate the contents within a notebook cell:
<p>
The input of a notebook cell can be any combination of html, wiki text, special "shell" commands or javascript.
The input can either be all one type or a mix of different input types.

<pre>
<i>html:</i>
Regular html text

<i>wiki:</i>
RAMADDA wiki text

<i>sh:</i>
Shell commands

<i>js:</i>
Javascript

</pre>

<a name="context"></a><p><div class="ramadda-help-heading">5.3.2 <a href="#context">Cell Context</a></div> 
Within a cell there is an entry context, a number of entries that can be accessed within the javascript
input and that the wiki is created from. The following entries are available:
<ul>
<li> "base" -  This is the entry that the notebook is defined for
<li> "current"  - The current entry. By default this the base entry base entry but can be changed with the
shell commands.
<li> "parent"  - the parent of the current entry
<li> "root"  - the top-level entry
</ul>


<a name="html"></a><p><div class="ramadda-help-heading">5.3.3 <a href="#html">Html Input</a></div> 
To specify html text start the input with "html:".  
<pre>
<i>html:</i>
html text
</pre>


<a name="wiki"></a><p><div class="ramadda-help-heading">5.3.4 <a href="#wiki">Wiki Input</a></div> 
To specify wiki text start the input with "wiki:" - 
<pre>
<i>wiki:</i>
RAMADDA wiki text
</pre>

The wiki text is just regular RAMADDA wiki text. More information <a href="wikitext.html">here</a>.


<a name="sh"></a><p><div class="ramadda-help-heading">5.3.5 <a href="#sh">Shell Input</a></div> 
To specify shell text start the input with "sh:" - 
<pre>
<i>sh:</i>
shell commands
</pre>

The shell commands allow for easy navigation around the RAMADDA entry hierarchy. 

The following shell commands are supported. All of the "cd" commands change the cell's current entry.
<pre>
<i>sh:</i>
#change current entry to the base entry
cd  

#change current entry to the root
cd  /

#change current entry to the parent of the current entry
cd  ..


#change current entry to the parent of the parent of the current entry
cd  ../..

#change current entry to the "Test" entry under the root
cd  /Test

#change current entry to the first entry found under the root with name that begins with "foo" 
cd  /foo*

#change current entry to the first entry found under the root with name that ends with "bar" 
cd  /*bar

#change current entry to the "Test" entry relative to the current entry
cd  ../Test

#change current entry to the child of the current entry with name "Child" 
cd  Child

#change current entry to the grandchild entry with name "Grandchild" 
cd  Child/Grandchild

#print the current entry
pwd

#show the children tree of the current entry
ls

#print output
echo any output


#shell commands can be on one line, e.g.:
cd /;pwd;ls;cd;pwd

</pre>


<a name="js"></a><p><div class="ramadda-help-heading">5.3.6 <a href="#js">Javascript Input</a></div> 
To specify javascript start the input with "js:" - 
<pre>
<i>js:</i>
javascript code
</pre>

Javacsript input comes in 3 forms - single line expression, single line with a return  or multiple lines with a return.
For example, the below will display the number "3":
<pre>
<i>js:</i>
1+2
</pre>

Here is a single line with a return:
<pre>
<i>js:</i>
return "some string"
</pre>

Here is a multiple line input:
<pre>
<i>js:</i>
var x;
x = 1+2;
return x;
</pre>

The javascript input can have function definitions:
<pre>
<i>js:</i>
function result() {
   return "the result";
}
return result();
</pre>




There are a number of helper functions and pre-defined variables that can be accessed from javascript:
<pre>
<i>js:</i>
//TODO
</pre>


The above described entry context can be accessed with the variables:
<pre>
<i>js:</i>
base
current
parent
root
</pre>

e.g.:

<pre>
state.write(base.getName());
state.write(root.getName());
state.write(current.getName());
state.write(parent.getName());

//Create wiki text for the given entry
state.wiki("{{tree}}", current);
state.wiki(":title {{name}}", root);
</pre>




<a name="running"></a><p><div class="ramadda-help-heading">5.3.7 <a href="#running">Running a notebook</a></div> 
To run a notebook cell either press shift-return in the cell input area or choose "Run This Cell" in the notebook menu.
All of the cells can be run through the notebook menu with the "Run All" command.
A notebook can be configured to run all of the cells when the notebook is first loaded through the "Run on load"
command in the notebook menu.


<a name="commands"></a><p><div class="ramadda-help-heading">5.3.8 <a href="#commands">Notebook Menu Commands</a></div> 
The notebook menu allows one to configure the display and behavior of individual cells or all of the cells.

<a name="image2"></a><div class="cimg"><a href="images/notebookmenu.png"><img  src="images/notebookmenu.png"  alt="Notebook Menu" ></a><br><span class="caption">Image 2: Notebook Menu</span></div>

<ul>
<li> Cell name: Name the current cell. The name is shown in the header (see below)
<li> Run: Either run the current cell or run all cells
<li> New cell: Create a new cell either above the current cell or below the current cell
<li> Clear: Clear the output for the current cell or for all cells
<li> Move: Move the current cell either up or down. Note: when in the cell input pressing control-^ will move the cell up. Pressing control-v will move the cell down.
<li> Show
<ul>
<li> Edit: Show the input edit field
<li> Header: Show the header. Only the cell name is shown in the header
<li> Border: display a line border between cells
</ul>
<li> Inputs: Show or hide all of the input fields
<li> Run on load: Run all of the cells when the notebook is first viewed
<li> Display mode: When true don't show any input fields or the left side menu if the user is not logged in
<li> Save notebook: Save the notebook either without or with the generated output. It is suggested that notebooks are saved without output
and that the cells are ran on notebook load. This is due to that some of the notebook operations (notably javascript) don't get recreated correctly
with just the notebook output saved
<li> Delete: Delete this cell
<li> Help: Show this help
</ul>











</div>
<p>

<p>&nbsp;<p>
<a href="wikidisplay.html"><img src="images/previous.png" border="0"   alt="Previous: Wiki Display Components" title="Previous: Wiki Display Components"></a> <a href="pagestyle.html"><img src="images/next.png" border="0"   alt="Next: Page Styles" title="Next: Page Styles"></a>  <a href="toc.html#notebook.html"><img src="images/table.png" border="0"   alt="Table of contents" title="Table of contents"></a>
<p>
</div>
</body>
</html>

