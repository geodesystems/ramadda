<html>
<head>
  <title>AWS S3 Integration</title>
</head>


<body>
<%nochildlist%>



<subhead intoc="false" id="s3_harvesting">S3 Harvesting</subhead>
The RAMADDA file <a href="harversters.html">harvester</a>
can also harvest a S3 bucket store.

<subhead intoc="false" id="s3_entry">S3 Bucket Entry</subhead>
A S3 Bucket entry type is provided. This allows you to have a "synthetic" set of entries
in RAMADDA that represent the S3 bucket hierarchy. These entries do not exist
in the RAMADDA database but can be viewed and accessed through the web interface.
<p>
TBD


<subhead intoc="false" id="s3_entrytypes">Specifying Entry Types</subhead>
By default when an entry is creating representing a file in S3 RAMADDA will try to figure out
its entry type based on the file name or it will use the basic S3 Bucket entry type. For example,
if you had a number of .zip shapefiles RAMADDA would default to the Zip file entry type.
You can override this by adding one or more Entry Type Pattern properties to the S3 Root
entry. 

Go to the Add Properties of the root entry and, under Miscellaneous, select Entry Type Pattern.
Select the appropriate entry type (e.g., Shapefile) and specify one or more patterns to match with.
Note: the patterns are regular expression not glob style patterns.
[ht::screenshot images/s3/entrytypes.png]


<subhead intoc="false" id="s3_cli">S3 Tools</subhead>
As a convenience RAMADDA provides a S3 command line utility in the <a href="seesv.html">SeeSV</a>
package.
:p
Download and unzip the <href="https://ramadda.org/repository/entry/show?entryid=synth:498644e1-20e4-426a-838b-65cffe8bd66f:L3NlZXN2LnppcA==">seesv.zip</a> and run the s3.sh to get a help listing:
<pre>
sh s3.sh -help
Usage:
S3File 
	&lt;-download  download the files&gt;  
	&lt;-makedirs make a tree when downloading files&gt; 
	&lt;-overwrite overwrite the files when downloading&gt; 
	&lt;-sizelimit size mb (don't download files larger than limit (mb)&gt; 
	&lt;-percent 0-1  (for buckets with many (&gt;100) siblings apply this as percent probablity that the bucket will be downloaded)&gt; 
	&lt;-recurse  recurse down the tree when listing&gt; 
	&lt;-self print out the details about the bucket&gt; ... one or more buckets
</pre>  

Another utility is provided in the RAMADDA repository runtime at the
/aws/s3/list entry point. This provides an interface to the above tool
to do a recursive listing of a bucket store.
Check it out on <a href="https://ramadda.org/repository/aws/s3/list">
https://ramadda.org/repository/aws/s3/list</a>.

Try this out with an example:
<pre>
s3://first-street-climate-risk-statistics-for-noncommercial-use/
</pre>

</body>
