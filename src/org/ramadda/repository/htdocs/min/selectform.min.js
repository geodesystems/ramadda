function SelectForm(t,e,s,l,n){this.id=t,this.entryId=e,this.arg=s,this.outputDivPrefix=l,this.selectValues=n,this.totalSize=0,this.checkboxPrefix="entry_"+this.id+"_",this.arg||(this.arg="select"),this.clearSelect=function(t){for(var e=t;e<10&&(select=this.getSelect(e),0!=select.length);e++)select.html("<select><option value=''>--</option></select>")},this.valueDefined=function(t){return""!=t&&0!=t.indexOf("--")},this.getUrl=function(t){var e=ramaddaBaseUrl+"/entry/show?entryid="+this.entryId,i=this;return $("#"+this.id+" :input").each((function(){var t=$(this).val();"request"!=this.name&&("entryselect"!=this.name||$(this).is(":checked"))&&("radio"!=this.type||$(this).is(":checked"))&&i.valueDefined(t)&&(e+="&"+this.name+"="+encodeURIComponent(t))})),null!=t&&(e+="&request="+t),e},this.formSubmit=function(t,e){$("#"+this.id).find("input[name=request]").val(t),document.getElementById(this.id).submit(),e&&e.preventDefault()},this.bulkdownload=function(t){this.formSubmit("bulkdownload",t)},this.download=function(t){this.formSubmit("download",t)},this.makeKMZ=function(t){this.formSubmit("kmz",t)},this.threddscatalog=function(t){this.formSubmit("threddscatalog",t)},this.makeTimeSeries=function(t){var e=this.getUrl("timeseries");return $("#"+this.outputDivPrefix+"image").html('<img alt="Generating Image...." src="'+e+'">'),!1},this.search=function(t){var e=this.getUrl("search"),i=this;return $("#"+this.outputDivPrefix+"list").html("<img src="+icon_progress+"> Searching..."),$("#"+this.outputDivPrefix+"image").html(""),i.totalSize=0,$.getJSON(e,(function(t){i.processEntryJson(t)})),!1},this.makeImage=function(t){var e=this.getUrl("image");return $("#"+this.outputDivPrefix+"image").html('<img alt="Generating Image...." src="'+e+'">'),!1},this.processEntryJson=function(t){var e=0,i="",s=HtmlUtils.getUniqueId("");if(0==t.length)i="Nothing found";else{for(var l="",n="",r=null,a=createEntriesFromJson(t),h=0;h<a.length;h++){var o=a[h],c=o.getAttributeLabels();if(0==h){r=o.getAttributeNames();for(var d=0;d<c.length;d++)"Collection ID"!=c[d]&&(n+="<th><div class=selectform-table-header>"+c[d]+"</div></th>")}l+="<tr>",l+='<td style=\'padding-left:4px;padding-right:4px;\' width=1><input name="entryselect" type=checkbox checked value="'+o.getId()+'" id="'+this.checkboxPrefix+ +o.getId()+'" ></td><td>',l+="&nbsp;"+o.getLink(o.getIconImage()+" "+o.getName());for(d=0;d<r.length;d++)if("Collection ID"!=c[d]){var u=o.getAttributeValue(r[d]);l+="<td>"+HtmlUtils.div(["class","selectform-table-entry"],u)+"</td>"}l+="</td><td align=right>",l+=o.getFormattedFilesize(),l+="</td>",e+=o.getFilesize(),l+="</tr>"}var g=HtmlUtils.openTag("table",["border",0,"class","selectform-table stripe rowborder ramadda-table","id",s]),f=this.id+"_listcbx";n="<tr><th style='padding-left:4px;padding-right:4px;' width=1><input type=checkbox checked value=true id=\""+f+'"></th><th> <b>'+t.length+" files found</b></th>"+n+"<th align=right><b>Size</b></td></tr>",g+=HtmlUtils.openTag("thead",[]),g+=n,g+=HtmlUtils.closeTag("thead"),g+=HtmlUtils.openTag("tbody",[]),g+=l,g+=HtmlUtils.closeTag("tbody"),i+=g+=HtmlUtils.closeTag("table"),i+=HtmlUtils.leftRight("",GuiUtils.size_format(e))}this.totalSize=e,$("#"+this.outputDivPrefix+"list").html(i),HtmlUtils.formatTable("#"+s,{scrollY:"250",ordering:!0});var m=this,v=$("#"+f);this.getEntryCheckboxes().change((function(t){m.listUpdated()})),v.change((function(t){let e=v.is(":checked");m.getEntryCheckboxes().attr("checked",e),m.listUpdated(),t.stopPropagation()})),this.listUpdated()},this.getEntryCheckboxes=function(){return $(':input[id*="'+this.checkboxPrefix+'"]')},this.listUpdated=function(){var t=this.getEntryCheckboxes(),e=!1;t.each((function(t){$(this).attr("checked")&&(e=!0)}));var i=$(':input[id*="'+this.id+'_do_"]');e?i.show():i.hide()},this.isSelectLinked=function(){return!1},this.select=function(t){this.isSelectLinked()&&this.narrowSelect()},this.narrowSelect=function(){for(var t=0;t<10&&(select=this.getSelect(t),0!=select.length);t++){var e=select.val();this.valueDefined(e)&&"&"+this.arg+t+"="+encodeURIComponent(e)}var i=this.getUrl("metadata");for(t=0;t<10&&(select=this.getSelect(t),0!=select.length);t++){e=select.val();this.valueDefined(e)||this.applyToSelect(i+"&field="+this.arg+t,t)}},this.applyToSelect=function(t,e){var s=this;$.getJSON(t,(function(t){if(t.values){var l="<select>";for(i=0;i<t.values.length;i++){var n=t.values[i],r=n,a=n.indexOf(":");a>=0&&(r=n.substring(a+1),n=n.substring(0,a)),0==n.indexOf("--")&&(n=""),l+="<option value='"+n+"'>"+r+"</option>"}l+="</select>";var h=s.getSelect(e),o=h.val();h.html(l),h.focus(),o&&h.val(o),s.clearSelect(e+1)}else alert("error")}))},this.getSelect=function(t){return $("#"+this.id+"_"+this.arg+t)},this.submit=function(){var t=$("#"+this.id+"_value");return $("#"+this.id+"_image").attr("src",ramaddaBaseUrl+"/icons/"+t.val()),!1},this.listUpdated()}
