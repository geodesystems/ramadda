function SelectForm(t,e,s,n,r){this.id=t,this.entryId=e,this.arg=s,this.outputDivPrefix=n,this.selectValues=r,this.totalSize=0,this.checkboxPrefix="entry_"+this.id+"_",this.arg||(this.arg="select"),this.clearSelect=function(t){for(var e=t;e<10&&(select=this.getSelect(e),0!=select.length);e++)select.html("<select><option value=''>--</option></select>")},this.valueDefined=function(t){return""!=t&&0!=t.indexOf("--")},this.getUrl=function(t){var e=HU.getUrl(RamaddaUtils.getUrl("/entry/show"),ARG_ENTRYID,this.entryId),i=this;return jqid(this.id+" :input").each((function(){var t=$(this).val();"request"!=this.name&&("entryselect"!=this.name||$(this).is(":checked"))&&("radio"!=this.type||$(this).is(":checked"))&&i.valueDefined(t)&&(e+="&"+this.name+"="+encodeURIComponent(t))})),null!=t&&(e+="&request="+t),e},this.formSubmit=function(t,e){jqid(this.id).find("input[name=request]").val(t),document.getElementById(this.id).submit(),e&&e.preventDefault()},this.bulkdownload=function(t){this.formSubmit("bulkdownload",t)},this.download=function(t){this.formSubmit("download",t)},this.makeKMZ=function(t){this.formSubmit("kmz",t)},this.threddscatalog=function(t){this.formSubmit("threddscatalog",t)},this.makeTimeSeries=function(t){var e=this.getUrl("timeseries");return jqid(this.outputDivPrefix+"image").html('<img alt="Generating Image...." src="'+e+'">'),!1},this.search=function(t){var e=this.getUrl("search"),i=this;return jqid(this.outputDivPrefix+"list").html("<img src="+icon_progress+"> Searching..."),jqid(this.outputDivPrefix+"image").html(""),i.totalSize=0,$.getJSON(e,(function(t){i.processEntryJson(t)})),!1},this.makeImage=function(t){var e=this.getUrl("image");return jqid(this.outputDivPrefix+"image").html('<img alt="Generating Image...." src="'+e+'">'),!1},this.processEntryJson=function(t){var e=0,i="",s=HU.getUniqueId("");if(0==t.length)i="Nothing found";else{for(var n="",r="",a=null,l=createEntriesFromJson(t),h=0;h<l.length;h++){var o=l[h],c=o.getAttributeLabels();if(0==h){a=o.getAttributeNames();for(var d=0;d<c.length;d++)"Collection ID"!=c[d]&&(r+="<th><div class=selectform-table-header>"+c[d]+"</div></th>")}n+="<tr>",n+='<td style=\'padding-left:4px;padding-right:4px;\' width=1><input name="entryselect" type=checkbox checked value="'+o.getId()+'" id="'+this.checkboxPrefix+ +o.getId()+'" ></td><td>',n+="&nbsp;"+o.getLink(o.getIconImage()+" "+o.getName());for(d=0;d<a.length;d++)if("Collection ID"!=c[d]){var u=o.getAttributeValue(a[d]);n+="<td>"+HU.div([ATTR_CLASS,"selectform-table-entry"],u)+"</td>"}n+="</td><td align=right>",n+=o.getFormattedFilesize(),n+="</td>",e+=o.getFilesize(),n+="</tr>"}var g=HU.openTag(TAG_TABLE,[ATTR_BORDER,0,ATTR_CLASS,"selectform-table stripe rowborder ramadda-table",ATTR_ID,s]),f=this.id+"_listcbx";r="<tr><th style='padding-left:4px;padding-right:4px;' width=1><input type=checkbox checked value=true id=\""+f+'"></th><th> <b>'+t.length+" files found</b></th>"+r+"<th align=right><b>Size</b></td></tr>",g+=HU.openTag("thead",[]),g+=r,g+=HU.closeTag("thead"),g+=HU.openTag("tbody",[]),g+=n,g+=HU.closeTag("tbody"),i+=g+=HU.closeTag("table"),i+=HU.leftRight("",GuiUtils.size_format(e))}this.totalSize=e,jqid(this.outputDivPrefix+"list").html(i),HU.formatTable("#"+s,{scrollY:"250",ordering:!0});var m=this,v=jqid(f);this.getEntryCheckboxes().change((function(t){m.listUpdated()})),v.change((function(t){let e=v.is(":checked");m.getEntryCheckboxes().attr("checked",e),m.listUpdated(),t.stopPropagation()})),this.listUpdated()},this.getEntryCheckboxes=function(){return $(':input[id*="'+this.checkboxPrefix+'"]')},this.listUpdated=function(){var t=this.getEntryCheckboxes(),e=!1;t.each((function(t){$(this).attr("checked")&&(e=!0)}));var i=$(':input[id*="'+this.id+'_do_"]');e?i.show():i.hide()},this.isSelectLinked=function(){return!1},this.select=function(t){this.isSelectLinked()&&this.narrowSelect()},this.narrowSelect=function(){for(var t=0;t<10&&(select=this.getSelect(t),0!=select.length);t++){var e=select.val();this.valueDefined(e)&&"&"+this.arg+t+"="+encodeURIComponent(e)}var i=this.getUrl("metadata");for(t=0;t<10&&(select=this.getSelect(t),0!=select.length);t++){e=select.val();this.valueDefined(e)||this.applyToSelect(i+"&field="+this.arg+t,t)}},this.applyToSelect=function(t,e){var s=this;$.getJSON(t,(function(t){if(t.values){var n="<select>";for(i=0;i<t.values.length;i++){var r=t.values[i],a=r,l=r.indexOf(":");l>=0&&(a=r.substring(l+1),r=r.substring(0,l)),0==r.indexOf("--")&&(r=""),n+="<option value='"+r+"'>"+a+"</option>"}n+="</select>";var h=s.getSelect(e),o=h.val();h.html(n),h.focus(),o&&h.val(o),s.clearSelect(e+1)}else alert("error")}))},this.getSelect=function(t){return jqid(this.id+"_"+this.arg+t)},this.submit=function(){var t=jqid(this.id+"_value");return jqid(this.id+"_image").attr(ATTR_SRC,RamaddaUtils.getUrl("/icons/"+t.val())),!1},this.listUpdated()}
