var build_date="RAMADDA build date: Fri Dec  2 01:47:04 MST 2022",root=ramaddaBaseUrl,urlroot=ramaddaBaseUrl,icon_close="fas fa-window-close",icon_pin="fas fa-thumbtack",icon_help="fas fa-question-circle",icon_command=ramaddaCdn+"/icons/command.png",icon_rightarrow=ramaddaCdn+"/icons/grayrightarrow.gif",icon_downdart=ramaddaCdn+"/icons/downdart.gif",icon_rightdart=ramaddaCdn+"/icons/rightdart.gif",icon_progress=ramaddaCdn+"/icons/progress.gif",icon_wait=ramaddaCdn+"/icons/wait.gif",icon_information=ramaddaCdn+"/icons/information.png",icon_folderclosed=ramaddaCdn+"/icons/folderclosed.png",icon_folderopen=ramaddaCdn+"/icons/togglearrowdown.gif",icon_folderclosed="fas fa-caret-right",icon_folderopen="fas fa-caret-down",icon_tree_open=ramaddaCdn+"/icons/togglearrowdown.gif",icon_tree_closed=ramaddaCdn+"/icons/togglearrowright.gif",icon_zoom=ramaddaCdn+"/icons/magnifier.png",icon_zoom_in=ramaddaCdn+"/icons/magnifier_zoom_in.png",icon_zoom_out=ramaddaCdn+"/icons/magnifier_zoom_out.png",icon_menuarrow=ramaddaCdn+"/icons/downdart.gif",icon_blank16=ramaddaCdn+"/icons/blank16.png",icon_blank=ramaddaCdn+"/icons/blank.gif",icon_menu=ramaddaCdn+"/icons/menu.png",icon_trash="fas fa-trash-alt";function noop(){}function addHandler(t,r){return null==window.globalHandlers&&(window.globalHandlers={}),r||(r=HtmlUtils.getUniqueId()),window.globalHandlers[r]=t,r}function getHandler(t){return t&&null!=window.globalHandlers?window.globalHandlers[t]:null}var Utils={me:"Utils",pageLoaded:!1,loadFunctions:[],mouseMoveCnt:0,mouseIsDown:!1,entryGroups:new Array,groupList:new Array,tooltipObject:null,entryDragInfo:null,globalEntryRows:{},defineGlobal:function(t,r){Utils.isDefined(window[t])||(window[t]=r)},throttle:function(t,r){let e=0;return function(...a){clearTimeout(e),e=setTimeout((()=>{t.apply(this,a)}),r)}},addLoadFunction:function(t){Utils.loadFunctions.push(t)},getLocalStorage:function(t,r){try{let e=localStorage.getItem(ramaddaBaseEntry+"."+t);return null!==e&&r?JSON.parse(e):e}catch(r){return console.log("Error getting local storage. key="+t),null}},setLocalStorage:function(t,r,e){r&&e&&(r=JSON.stringify(r)),localStorage.setItem(ramaddaBaseEntry+"."+t,r),console.log("writing"+r)},getFileTail:function(t){try{return new URL(t).pathname.replace(/.*\/([^\/]+)$/g,"$1")}catch(t){return null}},isImage:function(t){return!!t&&t.search(/(\.png|\.jpg|\.jpeg|\.gif|\.webp|\.heic)/i)>=0},initDragAndDrop:function(t,r,e,a,n,i){t.attr("contenteditable",!0),t.on("dragover",(e=>{e.stopPropagation(),e.preventDefault(),t.addClass("ramadda-drop-active"),r&&r(e)})),t.on("dragleave",(t=>{e&&e(t)})),t.on("drop",(r=>{t.removeClass("ramadda-drop-active"),r.stopPropagation(),r.preventDefault();let e=r.originalEvent.target.files||r.originalEvent.dataTransfer.files;for(let t=0;t<e.length;t++){let r=e[t];if(!r)continue;if(n&&!r.type.match(n))continue;let i=new FileReader;i.onload=t=>{a&&a(t,r,t.target.result,!0)},i.readAsDataURL(r)}})),t.on("paste",(t=>{let r=(t.clipboardData||t.originalEvent.clipboardData).items;for(let e=0;e<r.length;e++){let n=r[e];if("string"==n.kind){if(!i)continue;if("text/plain"!=n.type)continue;n.getAsString((r=>{a&&a(t,n,r,!1)}));continue}if("file"!=n.kind)continue;t.stopPropagation(),t.preventDefault();let g=new FileReader;g.onload=t=>{a&&a(t,n,t.target.result,!1)};let l=n.getAsFile();g.readAsDataURL(l);break}}))},isPost:function(){let t=$("#request-method");return 0!=t.length&&"POST"==t.attr("content")},max:function(t,r){return isNaN(t)?r:isNaN(r)?t:Math.max(t,r)},min:function(t,r){return isNaN(t)?r:isNaN(r)?t:Math.min(t,r)},toRadians:function(t){return t*Math.PI/180},toDegrees:function(t){return 180*t/Math.PI},getBearing:function(t,r){let e=Utils.toRadians(t.lat),a=Utils.toRadians(t.lon),n=Utils.toRadians(r.lat),i=Utils.toRadians(r.lon),g=Math.cos(n)*Math.sin(i-a),l=Math.cos(e)*Math.sin(n)-Math.sin(e)*Math.cos(n)*Math.cos(i-a),o=Math.atan2(g,l);return o=Utils.toDegrees(o),o=(o+360)%360,o},isReturnKey:function(t){return 13==(t.keyCode||t.which)},getBounds:function(t){if(!t)return null;let r=null,e=null,a=null,n=null;return t.forEach((t=>{r=null===r?t[0]:Math.min(r,t[0]),e=null===e?t[0]:Math.max(e,t[0]),a=null===a?t[1]:Math.min(a,t[1]),n=null===n?t[1]:Math.max(n,t[1])})),{getWidth:function(){return this.maxx-this.minx},getHeight:function(){return this.maxy-this.miny},getCenter:function(){return{x:this.minx+(this.maxx-this.minx)/2,y:this.miny+(this.maxy-this.miny)/2}},minx:r,maxx:e,miny:a,maxy:n}},mergeBounds(t,r){if(null==t)return r;if(null==r)return t;let e={};return e=$.extend(e,t),$.extend(e,{minx:Math.min(t.minx,r.minx),maxx:Math.max(t.maxx,r.maxx),miny:Math.min(t.miny,r.miny),maxy:Math.max(t.maxy,r.maxy)}),e},copyToClipboard:function(t){var r=$("<textarea></textarea>");$("body").append(r),r.val(t).select(),document.execCommand("copy"),r.remove()},isAnonymous:function(){return"anonymous"==ramaddaUser},getIcon:function(t){return ramaddaCdn+"/icons/"+t},imports:{},get:function(t,r,e){return t&&r<t.length?t[r]:e},rotate:function(t,r,e,a,n,i){if(0==n)return{x:parseFloat(e),y:parseFloat(a)};if(i)var g=Math.PI/180*n;else g=Math.PI/-180*n;var l=Math.cos(g),o=Math.sin(g);return{x:l*(e-t)+o*(a-r)+t,y:l*(a-r)-o*(e-t)+r}},splitFirst:function(t,r){let e=t.indexOf(r);return e<0?[t]:[t.substring(0,e),t.substring(e+1)]},debug:!1,split:function(t,r,e,a,n){if(!Utils.isDefined(t))return n;let i=[];r=r??",";let g=new RegExp("\\\\"+r,"g");return t=t.replace(g,"_HIDEDELIM_"),this.debug&&console.log(t),t.split(r).forEach((t=>{t=(t=t.replace(/_comma_/g,",")).replace(/_HIDEDELIM_/g,r),e&&(t=t.trim()),a&&""==t||i.push(t)})),i},sortNumbers:function(t){return t.sort(((t,r)=>+t-+r)),t},sortDates:function(t){return t.sort(((t,r)=>t.getTime()-r.getTime())),t},decodeText:function(t){return t?(t=String(t)).replace(/_leftbracket_/g,"[").replace(/_rightbracket_/g,"]").replace(/_dq_/g,'""').replace(/&quote;/gi,'"').replace(/_quote_/gi,'"').replace(/_qt_/gi,'"').replace(/_newline_/gi,"\n").replace(/newline/gi,"\n").replace(/_nl_/g,"\n"):null},handleActionResults:function(t,r){setTimeout((()=>{$.getJSON(r,(e=>{let a="";e.message&&(a=e.message.replace(/\n/g,"<br>")),$("#"+t).html(a),"running"==e.status&&Utils.handleActionResults(t,r)})).fail((r=>{$("#"+t).html("Error:"+r)}))}),1e3)},sumList:function(t){let r=0;return t.forEach((t=>{isNaN(t)||(r+=t)})),r},toFront:function(t,r,e){const a=t.indexOf(e?r[0]:r);return a>-1&&(t.splice(a,1),e?t.push(...r):t.push(r)),t},toBack:function(t,r,e){const a=t.indexOf(e?r[0]:r);return a>-1&&(t.splice(a,1),e?t.unshift(...r):t.unshift(r)),t},mergeLists:function(t,r,e,a,n){let i=[];return t&&t.map((t=>i.push(t))),r&&r.map((t=>i.push(t))),e&&e.map((t=>i.push(t))),a&&a.map((t=>i.push(t))),n&&n.map((t=>i.push(t))),i},getNameValue:function(t,r){if(!t)return null;for(var e={},a=t.split(","),n=0;n<a.length;n++){var i=a[n].split(":"),g=i[1].trim();r&&""==g||(g=g.replace(/_colon_/g,":"),e[i[0].trim()]=g)}return e},translatePoint:function(t,r,e,a,n,i){let g={x:t=+t,y:r=+r};if("nw"==n)g.x=t,g.y=r;else if("w"==n)g.x=t,g.y=r-a/2;else if("sw"==n)g.x=t,g.y=r-a;else if("s"==n)g.x=t-e/2,g.y=r-a;else if("se"==n)g.x=t-e,g.y=r-a;else if("e"==n)g.x=t-e,g.y=r-a/2;else if("ne"==n)g.x=t-e,g.y=r;else if("n"==n)g.x=t-e/2,g.y=r;else{if("c"!=n)throw new Error("Unknown point"+n);g.x=t-e/2,g.y=r-a/2}return null!=i&&(g.x+=+i.dx,g.y+=+i.dy),g},displayTimes:function(t,r,e,a){let n="",i=e?" ":"\n",g=e?" ":"\t";n+=t+i;for(var l=0;l<r.length-1;l++){let t=null;a&&l<a.length&&(t=a[l]),t||(t="time"+(l+1)),n+=g+t+": "+(r[l+1].getTime()-r[l].getTime())/1e3+i}console.log(n)},cloneList:function(t){return t?t.slice(0):null},removeElement:function(t,r){t||(t=[]);let e=t.indexOf(r);return e>=0&&t.splice(e,1),t},addUnique:function(t,r){return null==t&&(t=[]),t.includes(r)||t.push(r),t},replaceAll:function(t,r,e){let a=t.indexOf(r);return a<0?t:t.substring(0,a)+e+t.substring(a+r.length)},parseAttributes:function(t){let r,e={};for(;null!=(r=t.match(/([^ ]+) *= *"([^"]*)"/));)e[r[1].trim()]=r[2],t=Utils.replaceAll(t,r[0],"");for(;null!=(r=t.match(/([^ ]+) *= *'([^']*)'/));)e[r[1].trim()]=r[2],t=Utils.replaceAll(t,r[0],"");for(;null!=(r=t.match(/([^ ]+) *= *([^ ]*)( |$)/));)e[r[1].trim()]=r[2],t=Utils.replaceAll(t,r[0],"");for(;null!=(r=t.match(/([^ ]+)( |$)/));)e[r[1].trim()]="true",t=Utils.replaceAll(t,r[0],"");return e},parseAttributesAsList:function(t){let r=[],e=!1,a=!1,n="";for(let i=0;i<t.length;i++){let g=t[i],l='"'==g;a?(n+=g,a=!1):"\\"!=g?a?(n+=g,a=!1):l?e?(e=!1,r.push(n),n=""):e=!0:e||" "!=g&&"\n"!=g?n+=g:n.length>0&&(r.push(n),n=""):a?(n+=g,a=!1):a=!0}""!=n&&r.push(n);let i=[];return r.forEach((t=>{let r=t.indexOf("="),e=t,a="";r>=0&&(e=t.substring(0,r),a=t.substring(r+1)),i.push(e),i.push(a)})),i},hideMore:function(t){var r=GuiUtils.getDomObject("morelink_"+t);hideObject(GuiUtils.getDomObject("morediv_"+t)),showObject(r)},showMore:function(t){var r=GuiUtils.getDomObject("morelink_"+t),e=GuiUtils.getDomObject("morediv_"+t);hideObject(r),showObject(e)},ramaddaUpdateMaps:function(){if("undefined"!=typeof ramaddaMaps)for(i=0;i<ramaddaMaps.length;i++){var t=ramaddaMaps[i];t.map&&t.map.updateSize()}},formDialogId:"",submitEntryForm:function(t){return Utils.popupFormLoadingDialog(t),!0},closeFormLoadingDialog:function(){$(Utils.formDialogId).dialog("close")},popupFormLoadingDialog:function(t){Utils.formDialogId=t,$(t).dialog({resizable:!1,height:100,modal:!0})},replaceRoot:function(t){var r=new RegExp("\\${root}");return t=t.replace(r,ramaddaBaseUrl)},loadScriptInfo:{},loadScript:function(t,r,e){let a=document.createElement("script"),n="js:"+t,i=Utils.loadScriptInfo[n];return i||(i=Utils.loadScriptInfo[n]={loaded:!1,loading:!1,callbacks:[]}),!e&&i.loaded?(r&&r(),!0):(r&&i.callbacks.push(r),!i.loading&&(i.loading=!0,a.type="text/javascript",a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,i.loaded=!0,i.callbacks.forEach((t=>t())))}:a.onload=function(){i.loaded=!0,i.callbacks.forEach((t=>t()))},i.callback=[],a.src=t,void document.getElementsByTagName("head")[0].appendChild(a)))},importJS:async function(t,r,e,a){t=this.replaceRoot(t);let n=this;var i="js:"+t;if(!a&&this.imports[i])return Utils.call(r);try{await $.ajax({url:t,dataType:"script",cache:!0,success:function(t){n.imports[i]=!0,Utils.call(r)}}).fail(((r,e,a)=>{console.log("initial importJS failed: "+t),console.log("error:"+a)}))}catch(a){try{await $.ajax({url:t,dataType:"text",success:function(e){console.log("got script as text -  "+t);var a=document.createElement("script");a.innerHTML=e,document.body.appendChild(a),Utils.call(r),n.imports[i]=!0}}).fail(((r,a,n)=>{e?e(r,a,n):console.log("importJS failed:"+t)}))}catch(t){}}},waitOn:async function(t,r){window[t]},importCSS:async function(t,r,e,a){var n="css:"+(t=this.replaceRoot(t));if(!a&&this.imports[n])return Utils.call(r);try{await $.ajax({url:t,dataType:"text",success:t=>{a||(this.imports[n]=!0),$('<style type="text/css">\n'+t+"</style>").appendTo("head"),Utils.call(r)}}).fail(e)}catch(t){}},doFetch:async function(t,r,e,a){t=this.replaceRoot(t);let n=!1;try{let i={url:t,success:function(t){Utils.call(r,t)}};a||(a="text/plain",i.beforeSend=function(t){t.overrideMimeType("text/plain;")}),i.xhrFields={responseType:a},await $.ajax(i).fail(((t,r,a)=>{n=!0,e&&e(t,r,a)}))}catch(t){n||Utils.call(e,t)}},formatXml:function(t,r){r&&$.extend({},r);let e,a=(new DOMParser).parseFromString(t,"text/xml"),n="";return e=function(t,r,a){let i="";for(let t=0;t<a;t++)i+="  ";if(a>5)n+=i+"...\n";else{if("#text"==t.nodeName){let r=t.nodeValue||"";return r=r.trim(),void(Utils.stringDefined(r)&&(n+=i+"text:"+r+"\n"))}if("#cdata-section"==t.nodeName)return n+=i+t.wholeText,void(n+="\n");""!=r&&(r+="."),r+=t.nodeName,n+=i+"&lt;"+HU.span(["data-path",r,TITLE,"Add path selector",STYLE,HU.css("cursor","pointer","text-decoration","underline"),CLASS,"ramadda-xmlnode"],t.nodeName)+"&gt;\n",t.childNodes.forEach((t=>{e(t,r,a+1)})),n+=i+"&lt;/"+t.nodeName+"&gt;\n"}},a.childNodes.forEach((t=>{if("parsererror"==t.nodeName)throw new Error("Parse error:"+t)})),a.childNodes.forEach((t=>{e(t,"",0)})),n},formatJson:function(t,r){var e=this.formatJsonInner(t,0,r);return this.formatJsonBlob(e,null,0,r)},formatJsonClick:function(t,r){var e=$("#"+r),a=$("#"+t);e.is(":visible")?(e.hide(),a.attr("src",icon_tree_closed)):(e.show(),a.attr("src",icon_tree_open))},formatJsonBlob:function(t,r,e,a){var n="";if(null!=r&&(n=r+": "),n+=t.value,t.inner){var i=HtmlUtils.getUniqueId(),g=HtmlUtils.image(icon_tree_closed,["id",i]),l=HtmlUtils.getUniqueId(),o="Utils.formatJsonClick('"+i+"','"+l+"')";n=HtmlUtils.div(["onclick",o,"class","json-label"],g+" "+n);var s=e<a?"block":"none";n+=HtmlUtils.div(["style","display:"+s+";","class","json-inner","id",l],t.inner)}return n},formatJsonInner:function(t,r,e){if(null==t)return{value:"null"};var a=typeof t;if("string"==a){var n="json-string";return t.match("^http")&&(n="json-url",t=HtmlUtils.href(t,t,["class",n])),{value:HtmlUtils.span(["class",n],'"'+t+'"')}}if("number"==a||"boolean"==a)return{value:HtmlUtils.span(["class","json-"+a],t)};if(t.toISOString)return{value:HtmlUtils.span(["class","json-date"],'"'+t.toISOString()+'"')};if("function"==a){var i=(t+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"");return i=(i=i.replace(/[/][*][^\/*]*[*][/]/g,"")).split("){",1)[0].replace(/^[^\(]*[\(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean),{value:HtmlUtils.span(["class","json-function"],t.name+"("+i+") {...}")}}var g=Array.isArray(t),l=g?HtmlUtils.span(["class","json-number"],"["+t.length+"]"):"",o=HtmlUtils.openTag("div"),s=[],b=[];if(g){for(var d=0;d<t.length;d++)s.push(d),b.push(d);0==b.length&&(o+=this.formatJsonBlob({value:HtmlUtils.span(["class","json-none"],"[]")},null,r+1,e))}else{for(var c in t)s.push(c),b.push(c);0==b.length&&(o+=this.formatJsonBlob({value:HtmlUtils.span(["class","json-none"],"No properties")},null,r+1,e))}for(d=0;d<b.length;d++){o+="<div>";var u=Utils.formatJsonInner(t[b[d]],r+1,e);o+=this.formatJsonBlob(u,s[d],r+1,e),o+="</div>"}return{value:l,inner:o+="</div>"}},padLeft:function(t,r,e){for(t=""+t,e||(e=" ");t.length<r;)t=e+t;return t},reverseArray:function(t){for(var r=[],e=t.length-1;e>=0;e--)r.push(t[e]);return r},makeArray:function(t){return Array.isArray(t)?t:[t]},getUniqueId:function(t){return HtmlUtils.getUniqueId(t)},splitList:function(t,r){let e=[];if(t.length<r)e.push(t);else{let a=Math.ceil(t.length/r),n=Math.ceil(t.length/a),i=[];e.push(i),t.forEach((t=>{i.length>=n&&(i=[],e.push(i)),i.push(t)}))}return e},removeItem:function(t,r){for(var e=t.length-1;e>=0;e--)t[e]==r&&t.splice(e,1);return t},getStack:function(t){Utils.isDefined(t)||(t=100);let r="",e=new Error;if(!e.stack)return"no stack available";let a=Utils.split(e.stack,"\n",!0,!0);for(let e=1;e<t&&e<a.length;e++){let t=a[e];t=Utils.split(t,"@");let n=t[1].match(/\/([^/]+)$/);r=r+"  "+t[0]+":"+n[1].replace(/:[^:]+$/,"")+"\n"}return r},normalize:function(t){let r=Math.min(...t),e=Math.max(...t)-r;return t.map((t=>(t-r)/e))},join:function(t,r,e){void 0===e&&(e=0);for(var a="",n=e;n<t.length;n++)n>e&&(a+=r),a+=t[n];return a},wrap:function(t,r,e){let a="";return t.forEach((t=>{a+=r+t+e})),a},parseMap:function(t){if(null==t)return null;for(var r=t.split(","),e={},a=0;a<r.length;a++){var n=r[a].split(":");n.length>1&&(e[n[0].trim()]=n[1].trim())}return e},getUniqueValues:function(t){for(var r=[],e={},a=0;a<t.length;a++){var n=t[a];this.isDefined(e[n])||(e[n]=!0,r.push(n))}return r},getMacro:function(t){return"${states}"==t?"Alabama,Alaska,Arizona,Arkansas,California,Colorado,Connecticut,Delaware,District of Columbia,Florida,Georgia,Hawaii,Idaho,Illinois,Indiana,Iowa,Kansas,Kentucky,Louisiana,Maine,Maryland,Massachusetts,Michigan,Minnesota,Mississippi,Missouri,Montana,Nebraska,Nevada,New Hampshire,New Jersey,New Mexico,New York,North Carolina,North Dakota,Ohio,Oklahoma,Oregon,Origin State,Pennsylvania,Rhode Island,South Carolina,South Dakota,Tennessee,Texas,Utah,Vermont,Virginia,Washington,West Virginia,Wisconsin,Wyoming":t},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesShortShort:["S","M","T","W","Th","F","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],createDate:function(t,r){let e=Utils.createDateInner(t);return e&&r&&(e=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()-r,e.getUTCMinutes(),e.getUTCSeconds()))),e},createDateInner:function(t){if(!t)return t;if(t.getTime)return t;t=t.trim();let r=new RegExp("^(\\+|-)?([0-9]+) *(minute|hour|day|week|month|year)$"),e=t.match(r);if(e){let t=parseFloat(e[1]+e[2]),r=e[3],a=(new Date).getTime();return"minute"==r?new Date(a+1e3*t*60):"hour"==r?new Date(a+1e3*t*60*60):"day"==r?new Date(a+1e3*t*60*60*24):"week"==r?new Date(a+1e3*t*60*60*24*7):"month"==r?new Date(a+1e3*t*60*60*24*7*31):new Date(a+1e3*t*60*60*24*365)}if(t.match(/^[0-9,-]+$/)){let r=t.split(","),a=t.split("-");e=a.length>r.length?a:r;let n=0,i=t=>t>=e.length?null:1==t?+e[t]-1:+e[t];return new Date(Date.UTC(i(n++),i(n++),i(n++),i(n++),i(n++),i(n++)))}return new Date(t)},minutesSince:function(t){return Math.round(this.toMinutes((new Date).getTime()-t))},toMinutes:function(t){return t/1e3/60},formatHour:function(t,r){let e=r?"":"&nbsp;";return 0==t?"12"+e+"AM":12==t?"12"+e+"PM":t>12?t-12+e+"PM":t+e+"AM"},formatDateMonthDayYear:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date";var a=this.monthNames[t.getUTCMonth()],n=t.getUTCDate();return n<10&&(n="0"+n),a+" "+n+", "+t.getUTCFullYear()},formatDateYearMonth:function(t,r,e){return isNaN(t.getUTCMonth())?"Unknown date":this.monthNames[t.getUTCMonth()]+", "+t.getUTCFullYear()},formatDateMonthDay:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date";var a=this.monthNames[t.getUTCMonth()],n=t.getUTCDate();return n<10&&(n="0"+n),a+" "+n},formatDateMonDay:function(t,r,e){if(isNaN(t.getUTCMonth()))return"NA";var a=this.monthNamesShort[t.getUTCMonth()],n=t.getUTCDate();return n<10&&(n="0"+n),a+"-"+n},formatDateMDY:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;var a=this.monthNamesShort[t.getUTCMonth()],n=t.getUTCDate();return n<10&&(n="0"+n),a+" "+n+", "+t.getUTCFullYear()},formatDateYYYYMMDD:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;var a=t.getUTCMonth()+1;a<10&&(a="0"+a);var n=t.getUTCDate();return n<10&&(n="0"+n),t.getUTCFullYear()+"-"+a+"-"+n},formatDateYYYYMMDDHHMM:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;let a=t.getUTCMonth()+1;a<10&&(a="0"+a);let n=t.getUTCDate();n<10&&(n="0"+n);let i=t.getUTCHours();i<10&&(i="0"+i);let g=t.getUTCMinutes();g<10&&(g="0"+g);let l=i+":"+g;return t.getUTCFullYear()+"-"+a+"-"+n+" "+l},formatDateYYYYMMDDHHMMSS:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;var a=t.getUTCMonth()+1;a<10&&(a="0"+a);var n=t.getUTCDate();n<10&&(n="0"+n);var i=t.getUTCHours()+1;i<10&&(i="0"+i);var g=t.getUTCMinutes();g<10&&(g="0"+g);var l=t.getUTCSeconds();l<10&&(l="0"+l);let o=i+":"+g+":"+l;return t.getUTCFullYear()+"-"+a+"-"+n+" "+o},formatDateYYYYMMDDHH:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;var a=t.getUTCMonth()+1;a<10&&(a="0"+a);var n=t.getUTCDate();n<10&&(n="0"+n);var i=Utils.formatHour(t.getUTCHours(),!0);return t.getUTCFullYear()+"-"+a+"-"+n+" "+i},formatDateYYYYMM:function(t,r,e){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;var a=t.getUTCMonth()+1;return a<10&&(a="0"+a),t.getUTCFullYear()+"-"+a},formatDateMMDD:function(t,r){if(isNaN(t.getUTCMonth()))return"Unknown date:"+t;let e=t.getUTCMonth()+1;e<10&&(e="0"+e);let a=t.getUTCDate();return a<10&&(a="0"+a),e+(r||"-")+a},formatDateHHMM:function(t,r){let e=t.getUTCHours();e<10&&(e="0"+e);let a=t.getUTCMinutes();return a<10&&(a="0"+a),e+":"+a},formatDateYYYY:function(t,r,e){return t.getUTCFullYear()},formatDateYYYYWeek:function(t,r,e){return t.getUTCFullYear()+" week:"+this.formatDateWeek(t)},formatDateWeek:function(t){var r=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-r)/864e5+1)/7)},formatDateWithFormat(t,r,e){if(null==r){if(e)return null;r="yyyymmdd"}let a=r.toLowerCase();return"yyyymmdd"==a?Utils.formatDateYYYYMMDD(t):"yyyymmddhh"==a?Utils.formatDateYYYYMMDDHH(t):"yyyymmddhhmm"==a?Utils.formatDateYYYYMMDDHHMM(t):"yyyymmddhhmmss"==a?Utils.formatDateYYYYMMDDHHMMSS(t):"yyyymm"==a?Utils.formatDateYYYYMM(t):"yearmonth"==a?Utils.formatDateYearMonth(t):"monthdayyear"==a?Utils.formatDateMonthDayYear(t):"monthday"==a?Utils.formatDateMonthDay(t):"mon_day"==a?Utils.formatDateMonDay(t):"mdy"==a?Utils.formatDateMDY(t):"hhmm"==a?Utils.formatDateHHMM(t):String(t.format(r,"UTC:",!0))},dateOptions:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},formatDate:function(t,r,e){return this.formatDateWithFormat(t,"yyyy-mm-dd HH:MM")},incrementYear:function(t,r){return null==r&&(r=1),t.setUTCFullYear(t.getUTCFullYear()+r),t},incrementMonth:function(t,r){for(null==r&&(r=1);r>0;)11==t.getUTCMonth()?(t.setUTCFullYear(t.getUTCFullYear()+1),t.setUTCMonth(0)):t.setUTCMonth(t.getUTCMonth()+1),r--;return t},incrementDay:function(t,r){return null==r&&(r=1),t.setTime(t.getTime()+1e3*r*3600*24),t},getDayInYear:function(t){return(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())-Date.UTC(t.getUTCFullYear(),0,0))/24/60/60/1e3},monthShortNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthLongNames:["January","February","March","April","May","June","July","August","September","October","November","December"],getMonthShortNames:function(){return this.monthShortNames},xparseDate:function(t){return t=t.replaceAll(/\+0000$/,""),new Date(t)},dateRegex:new RegExp("(rel|now|today)(\\+|-)(.*)","i"),parseDate:function(t,r,e){if(null==t)return null;if("number"==typeof t)return new Date(t);if(""==(t=t.trim()))return null;var a=t.match(this.dateRegex),n=0;null!=a&&(n=parseFloat(a[3]),"-"==a[2]&&(n=-n),t=a[1]);var i=null;if("now"==t);else if("rel"==t){if(null==e)return null;i=new Date(e.getTime())}else{if("today"!=t){let r=Date.parse(t);if(isNaN(r)){let r=t.split(/[^0-9]/).map((t=>parseInt(t,10)));return new Date(r[0],r[1]-1||0,r[2]||1,r[3]||0,r[4]||0,r[5]||0,r[6]||0)}return new Date(r)}(i=new Date(Date.now())).setMilliseconds(0),i.setSeconds(0),i.setMinutes(0),r&&i.setHours(24)}return 0!=n&&i.setDate(i.getDate()+n),i},makeDownloadFile:function(t,r){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(r)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},later:function(t){t&&setTimeout(t,1)},call:function(t,r,e,a,n){if(t){var i=[];Utils.isDefined(r)&&i.push(r),Utils.isDefined(e)&&i.push(e),Utils.isDefined(a)&&i.push(a),Utils.isDefined(n)&&i.push(n),t.apply(this,i)}return r},isDefined:function(t){let r=!0;Array.from(arguments).every((t=>(null==t&&(r=!1),r)));return r},makeLabel:function(t,r){return t=String(t).trim(),r||(t=t.replace(/([A-Z])/g," $1")),t=(t=this.camelCase(t.replace(/_/g," "))).replace(/  +/g," ")},makeId:function(t){return t=(t=(t=(t=(t=(t=String(t)).replace(/[^\x00-\x7F]/g,"_")).replace(/&/g,"_")).replace(/\./g,"_")).replace(/[:\//]+/g,"_")).trim().toLowerCase().replace(/ /g,"_")},camelCase:function(t,r){if(!t)return t;let e="",a=t.split(" ");for(let t=0;t<a.length;t++){let n=a[t],i=n.substring(0,1);(t>>0||!r)&&(i=i.toUpperCase()),n.length>1&&(i+=n.substring(1).toLowerCase()),""!=e&&(e+=" "),e+=i}return e},stripTags:function(t){return t.replace(/(<([^>]+)>)/gi," ")},articles:"that,this,they,those,with,them,their,have,than,there,when,more,much,many,will,were".split(","),stopWords:["not","no","will","must","just","a","about","above","after","again","against","all","am","an","and","any","are","as","at","be","because","been","before","being","below","between","both","but","by","could","did","do","does","doing","down","during","each","few","for","from","further","had","has","have","having","he","he'd","he'll","he's","her","here","here's","hers","herself","him","himself","his","how","how's","i","i'd","i'll","i'm","i've","if","in","into","is","it","it's","its","itself","let's","me","more","most","my","myself","nor","of","on","once","only","or","other","ought","our","ours","ourselves","out","over","own","same","she","she'd","she'll","she's","should","so","some","such","than","that","that's","the","their","theirs","them","themselves","then","there","there's","these","they","they'd","they'll","they're","they've","this","those","through","to","too","under","until","up","very","was","we","we'd","we'll","we're","we've","were","what","what's","when","when's","where","where's","which","while","who","who's","whom","why","why's","with","would","you","you'd","you'll","you're","you've","your","yours","yourself","yourselves"],tokenizeWords:function(t,r,e,a){r||(r=this.stopWords);for(var n=[],i=(t=t.replace(/https?:\/\/[^ ]+/g," ")).split(/[ ,\(\)\.:\;\n\?\-!\*]/),g=0;g<i.length;g++){var l=i[g].trim();if(""!=l){var o=l.toLowerCase();r.includes(o)||e&&e.includes(o)||a&&this.articles.includes(o)||l.match(/^[0-9]+$/)||n.push(l)}}return n},stringEquals:function(t,r){return null===t&&null===r||null!==t&&null!==r&&new String(t).valueOf()===new String(r).valueOf()},stringDefined:function(t){return!!Utils.isDefined(t)&&(null!=t&&""!=t)},tokenizeMacros:function(s,args,debug){let opts={};args&&$.extend(opts,args);let hook=opts.hook,tokens=[],tokenMap={},cnt=0;for(;s.length>0;){let t=s.indexOf("${");if(t<0)break;let r=s.substring(0,t);""!=r&&tokens.push({type:"string",s:r}),s=s.substring(t);let e="",a=0,n=!1;for(;a<s.length;){let t=s.charAt(a++);if('"'!=t&&"'"!=t){if("}"==t&&!n)break;e+=t}else n=!n,e+=t}if(a>s.length)break;s=s.substring(a);let i=e.substring(2),g={};t=i.indexOf(" ");let l="";if(t<0)l=i;else{l=i.substring(0,t).trim();let r=i.substring(t).trim();g=Utils.parseAttributes(r),debug&&console.dir(g)}let o={id:String(cnt++),attrs:g,tag:l,macro:i};tokens.push(o),tokenMap[l]=o}return""!=s&&tokens.push({type:"string",s:s}),{tokens:tokens,tokenMap:tokenMap,getAttributes:function(t){let r=this.tokenMap[t];return r?r.attrs:null},apply:function(source,debug,handler){let cnt=0,tokenFunc=t=>{let value=source[t.tag],s="";if("func"==t.tag){let f=t.attrs.f;if(!f)return"&lt;no function defined&gt;";let code="function macroFunc() {\n";for(a in source){if("default"==a)continue;let t=source[a];"number"!=typeof t&&(t='"'+t+'"'),code+=a+"="+t+";\n"}code+="return "+f+";\n}\n",code+="macroFunc()";try{value=eval(code)}catch(t){return console.log("Error applying macro function:"+code+"\n"+t),"&lt;Error:"+t+"&gt;"}}if(t.attrs.nonblank&&0==String(value).length)return"";if(!Utils.isDefined(value))return"${"+t.macro+"}";if(value.getTime){let r=t.attrs.offset??opts.timezoneOffset,e="";if(t.attrs.localTime){let t=60*(new Date).getTimezoneOffset()*1e3;value=new Date(value.getTime()-t)}return Utils.formatDateWithFormat(value,t.attrs.format||opts.dateFormat)+e}if(t.attrs.display&&handler){let r=handler(t,value);if(!1!==r)return r}if(t.attrs.missing&&(""==value||isNaN(value)))return t.attrs.missing;if(t.attrs.bar){let r=t.attrs.min||0,e=t.attrs.max;if(""==value||isNaN(value))return t.attrs.missing||value;if(Utils.isDefined(r,e)){let a=t.attrs.color||"#4E79A7",n=t.attrs.width||"100%",i=parseFloat(t.attrs.height||12),g=100-100*(value-r)/(e-r)+"%",l=t.attrs.border||"1px solid #ccc",o=t.attrs.includeValue||!0,s=HU.div([TITLE,value+"/"+e,STYLE,HU.css("display","inline-block","position","relative","height",i+2+"px","width",n,"border",l,"border-left","none")],HU.div([STYLE,HU.css("position","absolute","left","0px","right",g,"height",i+"px","background",a)]));return o?HU.row([["width","1%"],value],s):s}}if(t.attrs.stars){if(""==value||isNaN(value))return t.attrs.missing||value;let r=t.attrs.count||5,e=t.attrs.min||0,a=t.attrs.max;if(Utils.isDefined(e,a)){let n=t.attrs.color||"#F9CF03",i="",g="";for(let t=0;t<r;t++)i+=HU.getIconImage("far fa-star",null,[STYLE,HU.css("font-size","10pt","color","#000")]),g+=HU.getIconImage("fas fa-star",null,[STYLE,HU.css("font-size","10pt","color",n)]);let l=100-100*(value-e)/(a-e)+"%",o=t.attrs.includeValue||!0,s=HU.div([TITLE,value+"/"+a,STYLE,HU.css("display","inline-block","position","relative")],i+HU.div([STYLE,HU.css("white-space","nowrap","overflow-x","hidden","position","absolute","left","0px","right",l,"top","0px","bottom","0px")],g));return o?HU.row([["width","1%"],value],s):s}}if((t.attrs.positiveTemplate||t.attrs.negativeTemplate)&&(value=+value,value>=0?t.attrs.negativeTemplate&&(value=t.attrs.positiveTemplate.replace("${value}",value)):t.attrs.negativeTemplate&&(t.attrs.doAbsolute&&(value=-value),value=t.attrs.negativeTemplate.replace("${value}",value))),t.attrs.youtube)return 0==value.trim().length?null:(s+=Utils.embedYoutube(value,t.attrs),s);if(t.attrs.list)return value=String(value),s+="<ul>",value.split("\n").forEach((t=>{""!=(t=t.trim())&&(s+="<li> "+t)})),s+="</ul>",s;if(t.attrs.pre)return value=String(value),""!=value.trim()&&(value="<pre class=thin_pre>"+value.trim()+"</pre>"),value;if(t.attrs.showUrl){let r=t.attrs.label||value;value=HU.href(value,r,["target","_other","style",t.attrs.style||""])}if(t.attrs.delimiter&&t.attrs.fields){let r=[];Utils.stringDefined(value)&&r.push(value),t.attrs.fields.split(",").forEach((t=>{let e=source[t];Utils.stringDefined(e)&&r.push(e)})),value=Utils.join(r,t.attrs.delimiter)}if(t.attrs.urlField){let r=source[t.attrs.urlField];Utils.stringDefined(r)&&(value=HU.href(r,value))}if(t.attrs.offset1&&(value+=parseFloat(t.attrs.offset1)),t.attrs.scale&&(value*=parseFloat(t.attrs.scale)),t.attrs.offset2&&(value+=parseFloat(t.attrs.offset2)),t.attrs.decimals){value=parseFloat(value);let r=Math.pow(10,t.attrs.decimals);value=Math.floor(value*r)/r}if(t.attrs.format){let r=t.attrs.format;"comma"==r&&(isNaN(value)?value=0:0!=value&&(value=Utils.formatNumberComma(value)))}if(t.attrs.lowercase&&(value=String(value).toLowerCase()),t.attrs.uppercase&&(value=String(value).toUpperCase()),t.attrs.camelcase&&(value=Utils.camelCase(String(value),!0)),t.attrs.suffix&&(value+=t.attrs.suffix),t.attrs.prefix&&(value=t.attrs.prefix+value),t.attrs.toggle,t.attrs.image&&(Utils.stringDefined(value)&&t.attrs.urlPrefix&&(value=t.attrs.urlPrefix+value),!Utils.stringDefined(value)&&t.attrs.defaultUrl&&(value=t.attrs.defaultUrl),""!=value)){let r="";if(t.attrs.title)for(a in r=t.attrs.title,source)r=r.replace("{"+a+"}",source[a]);let e=["title",r,"data-caption",r];t.attrs.height?(e.push("height"),e.push(t.attrs.height)):(e.push("width"),e.push(t.attrs.width||"100%")),e.push("loading"),e.push("lazy");let n=value;if(value=HtmlUtils.image(n,e),t.attrs.doPopup){t.attrs.popupBase||(t.attrs.popupBase="gallery"+Utils.getUniqueId());let e=t.attrs.popupBase;value=HU.href(n,value,[CLASS,"popup_image","data-fancybox","fancybox","data-caption",r,"title",r])}}if(t.attrs.images&&""!=value){let r;value=value.trim(),r=value.startsWith("[")?JSON.parse(value):t.attrs.delimiter?value.split(t.attrs.delimiter):value.split(";");let e="";if(t.attrs.title)for(a in e=t.attrs.title,source)e=e.replace("{"+a+"}",source[a]);let n=["title",e];t.attrs.height?(n.push("height"),n.push(t.attrs.height)):(n.push("width"),n.push(t.attrs.width||"100%")),console.log("VALUE:"+value),value="",r.forEach((t=>{value+=HtmlUtils.image(t,n)})),console.log(value)}if(t.attrs.convertDegrees){let t=[["NNE",11.25,33.75],["NE",33.75,56.25],["ENE",56.25,78.75],["E",78.75,101.25],["ESE",101.25,123.75],["SE",123.75,146.25],["SSE",146.25,168.75],["S",168.75,191.25],["SSW",191.25,213.75],["SW",213.75,236.25],["WSW",236.25,258.75],["W",258.75,281.25],["WNW",281.25,303.75],["NW",303.75,326.25],["NNW",326.25,348.75]],r="N";return value=+value,t.every((t=>!(value>=t[1]&&value<=t[2])||(r=t[0],!1))),r}if(t.attrs.template&&(value=t.attrs.template.replace("{value}",value)),t.attrs.templateif){let r=t.attrs.templateif.split(":"),e=r[0],a=r.slice(1).join(":");value=String(value),value.match(e)&&(value=a.replace("{value}",value))}if(t.attrs.cropLength&&value.length>+t.attrs.cropLength){let r=+t.attrs.cropLength;for(;r>=0&&" "!=value[r]&&"\n"!=value[r]&&"\t"!=value[r];)r--;if(0==r)for(;r<value.length&&" "!=value[r]&&"\n"!=value[r]&&"\t"!=value[r];)r++;let e=Utils.getUniqueId(),a=value.substring(0,r)+HU.span([ID,e+"_ellipsis"],"..."),n=HU.span([ID,e+"_post",STYLE,HU.css("display","none")],value.substring(r)),i=HU.div(["onclick","Utils.toggleShowMore('"+e+"')",ID,e,CLASS,"ramadda-showmore ramadda-clickable"],"Show More "+HU.getIconImage("fas fa-sort-down"));value=a+n+i}if(t.attrs.tableRow&&(value="<tr><td align=right>"+t.attrs.label+":</td><td>"+value+"</td></tr>"),t.attrs.maxwidth){let r=t.attrs.maxwidth;value=HU.div([STYLE,HU.css("display","inline-block","white-space","nowrap","max-width",HU.getDimension(r),"overflow-x","auto")],value)}return s+=value,s},s="";return this.tokens.forEach((t=>{if("string"==t.type)s+=t.s;else{let r=null;if(hook&&(r=hook(t,source[t.tag])),r||(r=tokenFunc(t)),!r)return;r.trim().length>0&&t.attrs.toggle&&(r=HU.toggleBlock(t.attrs.label||"More",r)),s+=r}})),s},getText:function(){let t=0,r="";return this.tokens.map((e=>{"string"==e.type?r+=e.s:(r+="${macro"+t+"}",t++)})),r}}},embedAudio:function(t){return HU.tag("audio",["controls",null],HU.tag("source",["src",t,"type","audio/mpeg"],"Your browser does not support the audio tag."))},embedYoutube:function(t,r){r=r||{};let e=t.match(/.*watch\?v=(.*)$/);if(e&&2==e.length||(e=t.match(/.*youtu.be\/(.*)$/)),!e||2!=e.length)return HU.href(t,t);let a="//www.youtube.com/embed/"+e[1]+"?enablejsapi=1&autoplay="+("true"==(r.autoplay||"false")?"1":"0")+"&playerapiid=video_1",n="";return r.includeLink&&(n+=HU.href(t,"Link")+"<br>"),n+=HU.tag("iframe",[ID,"ytplayer","allow","autoplay; fullscreen","type","text/html","frameborder","0",WIDTH,r.width||640,HEIGHT,r.height||360,SRC,a]),n},toggleShowMore:function(t){let r=$("#"+t),e=r.attr("open");e=!e,r.attr("open",e),e?($("#"+t+"_ellipsis").hide(),$("#"+t+"_post").show(),r.html("Show Less "+HU.getIconImage("fas fa-sort-up"))):($("#"+t+"_ellipsis").show(),$("#"+t+"_post").hide(),r.html("Show More "+HU.getIconImage("fas fa-sort-down")))},formatNumberComma:function(t){if(!Utils.isDefined(t))return"NA";let r=Math.floor(t),e=t-r,a=r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(0==e)return a;{let r=Math.abs(t),e=0;return e=r>=9999?0:r>=999?1:r>=99?2:r>=9?3:4,number_format(t,e)}},formatFileLength:function(t){return t<0?"":t<5e3?Math.round(t)+" bytes":t<1e6?(t=Math.round(100*t/1e3)/100,Math.round(t)+" KB"):(t=Math.round(100*t/1e6)/100)+" MB"},numberToString:null,trimDecimals:function(t,r){if(0==r)return parseInt(t);return t=parseFloat(t),parseInt(t*Math.pow(10,r))/Math.pow(10,r)},roundDecimals:function(t,r,e){null==this.numberToString&&(this.numberToString=new Intl.NumberFormat("fullwide",{useGrouping:!1}));let a=this.numberToString.format(t),n=Number(Math.round(a+"e"+r)+"e-"+r);return e&&console.log("decimals:"+a+" "+Math.round(a+"e"+r)),n},formatNumber:function(t,r,e){let a=this.formatNumberInner(t,e);return r?parseFloat(a):a},formatNumberInner:function(t,r){var e=Math.abs(t);if(e==Math.floor(e))return String(t);if(e>1e3)return number_format(t,0);if(e>100)return number_format(t,1);if(e>10)return number_format(t,2);if(e>1)return number_format(t,3);{let e=""+(t-Math.floor(t));return number_format(t,Math.min(e.length-2,5),r)}},isRealNumber:function(t){return!(t==Number.POSITIVE_INFINITY||isNaN(t)||!Utils.isNumber(t)||!Utils.isDefined(t)||null==t)},isNumber:function(t){return null!=t&&("number"==typeof t||!isNaN(t-0))},isType:function(t,r){return!(!t||typeof t!=r)},getDefined:function(t,r){return Utils.isDefined(t)?t:r},cleanId:function(t){return t=(t=t.replace(/:/g,"_").replace(/\./g,"_").replace(/=/g,"_").replace(/\//g,"_").replace(/[\(\)]/g,"_")).replace(/[^a-zA-Z0-9_]/g,"_")},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isFalse:function(t){return void 0!==t&&0==t},toFloat:function(t,r){return null==t||""==t.trim()?void 0!==r?r:NaN:parseFloat(t)},getUrlArgs:function(t){t=t.split("+").join(" ");for(var r,e={},a=/[?&]?([^=]+)=([^&]*)/g;r=a.exec(t);)e[decodeURIComponent(r[1])]=decodeURIComponent(r[2]);return e},checkTabs:function(t){for(;;){var r=new RegExp('id="(tabId[^"]+)"').exec(t);if(!r)break;var e=r[1];e.indexOf("-")<0&&jQuery((function(){jQuery("#"+e).tabs()}));var a=t.indexOf('id="tabId');if(a<0)break;t=t.substring(a+20)}},initRangeSelect:function(){let t=$(".ramadda-range-select"),r=function(){let t=$(this).attr("to-id");"between"==$(this).val()?$("#"+t).show():$("#"+t).hide()};t.each(r),t.change(r)},initPageReload:function(t,r,e){let a=$("#"+r),n=$("#"+r+"_label");a.length>0&&a.change((()=>{let i="Reload"+HtmlUtils.span([STYLE,"color:transparent"]," in 00  seconds");n.html(i),a.is(":checked")&&Utils.checkPageReload(t,r,e)})),(0==a.length||a.is(":checked"))&&Utils.checkPageReload(t,r,e)},checkPageReloadPending:!1,checkPageReload:function(t,r,e){let a=$("#"+r),n=$("#"+r+"_label");if(!(a.length>0)||a.is(":checked"))if(t<=0)location.reload();else{if(e){let r="Reload in "+t+" seconds";n.html(r)}t<=5?n.css("background","#eee"):n.css("background","transparent"),Utils.checkPageReloadPending||(Utils.checkPageReloadPending=!0,setTimeout((()=>{Utils.checkPageReloadPending=!1,Utils.checkPageReload(t-1,r,e)}),1e3))}},areDisplaysReady:function(){if(!Utils.getPageLoaded())return 0;if(0==Utils.displaysList.length)return 1;let t=!0;return Utils.displaysList.forEach((r=>{r.isDisplayFinished&&(r.isDisplayFinished()||(t=!1))})),t?1:0},checkForResize:function(){$(window).resize((()=>{this.pendingResizeTimeout&&(clearTimeout(this.pendingResizeTimeout),this.pendingResizeTimeout=null);this.pendingResizeTimeout=setTimeout((()=>{for(let t=0;t<Utils.displaysList.length;t++){let r=Utils.displaysList[t];r.handleWindowResize&&r.handleWindowResize()}this.pendingResizeTimeout=null}),1e3)}))},displaysList:[],displaysMap:[],addDisplay:function(t){this.displaysList.push(t),t.getId&&(this.displaysMap[t.getId()]=t),t.displayId&&(this.displaysMap[t.displayId]=t)},removeDisplay:function(t){let r=this.displaysList.indexOf(t);r>=0&&this.displaysList.splice(r,1),t.getId&&delete this.displaysMap[t.getId()],t.displayId&&delete this.displaysMap[t.displayId]},initDisplays:function(){this.displaysList.forEach((t=>{if(t.pageHasLoaded){new Date;t.pageHasLoaded();new Date}}))},getPageLoaded:function(){return this.pageLoaded},initContent:function(t){t?t+=" ":t="";try{let r=$(t+".ramadda-table");r.length&&HtmlUtils.formatTable(r)}catch(t){console.log("Error formatting table:"+t),console.log(t.stack)}$(t+".ramadda-snippet-hover").each((function(){let t,r,e=$(this);e.parent().hover((function(){r=setTimeout((()=>{var r=$(this),a=r.height();a>r.parent().height()&&(a=r.parent().height());HtmlUtils.getTooltip();t=$(HU.div(["style","display:none;","class","ramadda-snippet-popup"])).appendTo("body"),t.html(HtmlUtils.div(["class",""],e.html())),t.position({of:r,my:"left top",at:"left top+"+(a+1),collision:"fit fit"}),t.fadeIn(250)}),750)}),(function(){clearTimeout(r),t&&t.hide()}))}));let r=$(t+".ramadda-page-title"),e=$(t+".ramadda-header-center");r.length&&e.length&&(r=r.first(),e=e.first(),$(window).scroll((()=>{r.offset().top<e.offset().top+e.height()+10?this.showingHeaderCenter||(this.showingHeaderCenter=!0,e.html(r.html()),r.html("&nbsp;")):this.showingHeaderCenter&&(this.showingHeaderCenter=!1,r.html(e.html()),e.html("&nbsp;"))}))),$(t+":submit").button().click((function(t){})),$(t+".ramadda-button").button().click((function(t){}));let a=$(t+".ramadda-linkable");a.mouseenter((function(){let t=$(this).attr("id");t&&($("#"+t+"-hover").html(HtmlUtils.getIconImage("fa-link",null,[STYLE,"font-size:10pt;"])),$("#"+t+"-hover").show())})),a.click((function(){let t=$(this).attr("id");t&&HU.scrollToAnchor(t,-50)})),a.mouseleave((function(){let t=$(this).attr("id");t&&$("#"+t+"-hover").hide()})),$(t+".ramadda-pulldown-with-icons").iconselectmenu().iconselectmenu("menuWidget").addClass("ui-menu-icons ramadda-select-icon")},searchLastInput:"",searchAscending:!1,searchCnt:0,searchSuggestInit:function(t,r,e,a,n){let i=$("#"+t),g=$("#"+r);Utils.isDefined(a)||(a=!0);let l=!1;if(!n){l=!0,n=HU.getUniqueId();let t=i.width(),r=HU.div([ID,n,STYLE,HU.css("border","0px","width",t+"px","position","absolute"),CLASS,"ramadda-popup ramadda-search-popup"],"");i.parent().append(r)}let o=$("#"+n),s=()=>{o.slideUp(250)},b=()=>{let t=i.val()||"";this.searchCnt++,this.pendingSearch&&(clearTimeout(this.pendingSearch),this.pendingSearch=null),0!=t.length?this.pendingSearch=setTimeout((()=>{this.pendingSearch=null,Utils.doSearchSuggest(this.searchCnt,i,g,o,e,l)}),200):s()};g.length&&g.change(b),Utils.searchLastInput=i.val(),i.keyup((t=>{let r=t.keyCode||t.which;27!=r&&13!=r?(t.stopPropagation(),b()):s()}))},doSearchSuggest:function(t,r,e,a,n,i){let g=this,l=r.val()||"";Utils.searchLastInput=l;let o=ramaddaBaseUrl+"/search/suggest?text="+encodeURIComponent(l);n&&(o+="&type="+n),e.length>0&&e.is(":checked")&&ramaddaThisEntry&&(o+="&ancestor="+ramaddaThisEntry),o+="&ascending="+Utils.searchAscending,o+="&orderby=createdate";$.getJSON(o,(function(e){if(t!=g.searchCnt)return;let n=()=>{a.slideDown(400)};if(0==e.values.length)return a.html(HtmlUtils.div([CLASS,"ramadda-search-suggestion "],"No results")),void n();let l="",o=!0;if(e.values.forEach(((t,r)=>{let e,a=t.name,n=t.id,g=a.replace(/\"/g,"_quote_"),s=HU.href(ramaddaBaseUrl+"/entry/show?entryid="+n,HU.getIconImage(t.icon||icon_blank16)+SPACE+a,[TITLE,"View entry",STYLE,HU.css("display","inline-block","width","100%"),CLASS,"ramadda-highlightable"]);e=i?HU.span([CLASS,"ramadda-highlightable ramadda-search-input","index",r,TITLE,"Search for"],HtmlUtils.getIconImage("fa-search")):HU.href(ramaddaBaseUrl+"/search/do?text="+encodeURIComponent(g),HtmlUtils.getIconImage("fa-search"),[TITLE,"Search for"]);let b=e+SPACE+s;l+=HtmlUtils.div([CLASS,"ramadda-search-suggestion "],b),l+="\n",o=!o})),a.html(l),i){let t=a.find(".ramadda-search-input");t.css("cursor","pointer"),t.click((function(t){t.stopPropagation();let a=e.values[$(this).attr("index")].name;r.val(a),r.closest("form").submit()}))}n()})).fail((function(t,r,e){console.log("fail:"+r)}))},searchLink:function(){let t=$("#popup_search_input").val().trim(),r=$(this).attr("url");""!=t&&(r+="?text="+encodeURIComponent(t)),window.location=r},searchPopup:function(t,r){r=t;let e=Utils.searchLastInput||"",a="<form action='"+ramaddaBaseUrl+"/search/do'>";a+=HU.open("input",["value",e,"placeholder","Search text","autocomplete","off","autofocus","true","id","popup_search_input","class","ramadda-search-input",STYLE,HU.css("margin-left","4px","padding","2px","width","250px","border","0px"),"name","text"]),ramaddaThisEntry&&(a+=HU.checkbox("popup_search_here",["name","ancestor","value",ramaddaThisEntry,TITLE,"Search under this entry"],!1)+HU.tag("label",[CLASS,"ramadda-clickable","for","popup_search_here"]," here"+SPACE)),a+="</form>";let n=HU.getUniqueId(),i=HU.div(["id",n,STYLE,HU.css("text-align","right","color","#888","font-size","13px")],HU.link(ramaddaBaseUrl+"/search/form","Search Form",[TITLE,"Go to search form",STYLE,HU.css("color","#888","font-size","13px")])+" | "+HU.link(ramaddaBaseUrl+"/search/type","By Type",[TITLE,"Go to type form",STYLE,HU.css("color","#888","font-size","13px")])+" | "+HU.link(ramaddaBaseUrl+"/search/browse","By Metadata",[TITLE,"Go to metadata form",STYLE,HU.css("color","#888","font-size","13px")])),g=HU.getUniqueId("searchresults"),l=HU.div([ID,g,CLASS,"ramadda-search-popup-results"]),o=HU.div([CLASS,"ramadda-search-popup"],a+l);$("#"+t);this.dialog=HU.makeDialog({content:o,my:"right top",at:"right bottom",title:i,anchor:r,draggable:!0,header:!0,inPlace:!1}),$("#"+n).find(".ramadda-link").click(Utils.searchLink);var s=$("#popup_search_input");s.mousedown((function(t){t.stopPropagation()})),Utils.searchSuggestInit("popup_search_input","popup_search_here",null,!0,g),s.focus()},handleKeyPress:function(t){HtmlUtils.getTooltip().hide()},handleMouseDown:function(t){return(HtmlUtils.hasPopupObject()||Utils.tooltipObject)&&setTimeout((()=>{if(Utils.tooltipObject&&(Utils.tooltipObject.hide(),Utils.tooltipObject=null),HtmlUtils.hasPopupObject()){let t=HtmlUtils.getPopupObject().attr("id");HtmlUtils.checkToHidePopup()&&t==HtmlUtils.getPopupObject().attr("id")&&HtmlUtils.hidePopupObject()}}),250),Utils.mouseIsDown=!0,Utils.mouseMoveCnt=0,!0},handleMouseUp:function(t){t=GuiUtils.getEvent(t),Utils.mouseIsDown=!1,GuiUtils.setCursor("default");let r=$("#ramadda-floatdiv");if(r.length){let t=Utils.entryDragInfo?GuiUtils.getDomObject(Utils.entryDragInfo.dragSource):null;if(t){let e=GuiUtils.getLeft(t.obj),a=GuiUtils.getTop(t.obj),n=parseInt(r.css("left")),i=parseInt(r.css("top")),g=10,l=(e-n)/g,o=(a-i)/g;Utils.flyBackAndHide("ramadda-floatdiv",0,g,n,i,l,o)}else r.hide();Utils.entryDragInfo=null}return!0},flyBackAndHide:function(t,r,e,a,n,i,g){var l=GuiUtils.getDomObject(t);if(l){r+=1,l.style.left=a+i*r+"px",l.style.top=n+g*r+"px";if(r<e){setTimeout((()=>{Utils.flyBackAndHide(t,r,e,a,n,i,g)}),30)}else setTimeout((()=>{Utils.finalHide(t)}),150)}},handleMouseMove:function(t){if(t=GuiUtils.getEvent(t),Utils.entryDragInfo&&Utils.mouseIsDown){Utils.mouseMoveCnt++;var r=$("#ramadda-floatdiv");6==Utils.mouseMoveCnt&&GuiUtils.setCursor("move"),Utils.mouseMoveCnt>=6&&r.length&&Utils.moveFloatDiv(GuiUtils.getEventX(t),GuiUtils.getEventY(t))}return!0},finalHide:function(t){var r=GuiUtils.getDomObject(t);r&&(hideObject(r),r.style.filter="alpha(opacity=80)",r.style.opacity="0.8")},centerDiv:function(t){return this.div(["style","text-align:center;"],this.div(["style","display:inline-block;text-align:left;"],t))},moveFloatDiv:function(t,r){let e=$("#ramadda-floatdiv");if(e.length){if(!("none"!=e.css("display"))){e.show();let t="";Utils.entryDragInfo&&(t=Utils.entryDragInfo.getHtml()),e.html(t+"<br>Drag to a group to copy/move/associate")}e.css("top",r).css("left",t+10)}},treeViewClick:function(t,r,e,a,n){let i=HU.href(e,HU.getIconImage("fa-solid fa-link")+" "+a,["class","ramadda-clickable"]);jqid(t+"_header").html(i),n&&(e=e+"&template="+n),$.ajax({url:e,dataType:"text",success:r=>{jqid(t).attr("src",e)}})},initPage:function(){this.initContent(),this.pageLoaded=!0,this.initDisplays(),document.onmousemove=Utils.handleMouseMove,document.onmousedown=Utils.handleMouseDown,document.onmouseup=Utils.handleMouseUp,document.onkeypress=Utils.handleKeyPress,$(document).delegate("textarea","keydown",(function(t){if(9==(t.keyCode||t.which)){t.preventDefault();var r=this.selectionStart,e=this.selectionEnd;$(this).val($(this).val().substring(0,r)+"\t"+$(this).val().substring(e)),this.selectionStart=this.selectionEnd=r+1}})),Utils.loadFunctions.forEach((t=>{t()}))},copyText:function(t){const r=document.createElement("textarea");r.value=t,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)},foregroundColors:{purple:"white"},getContrastYIQ:function(t){return t=t.replace("#",""),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white"},getForegroundColor:function(t){return t?(t.match("rgb")&&(t=Utils.rgbToHex(t)),t?!this.foregroundColors[t]&&t.startsWith("#")?this.getContrastYIQ(t):this.foregroundColors[t]||"#000":"#000"):null},darkerColor:function(t,r){return t?this.pSBC(r||-.5,t):t},brighterColor:function(t,r){return t?this.pSBC(r||.5,t):t},pSBC:function(t,r,e,a){r=this.colorToRgb[r]||r,e=this.colorToRgb[e]||e;let n,i,g,l,o,s,b,d=parseInt,c=Math.round,u="string"==typeof e;return"number"!=typeof t||t<-1||t>1||"string"!=typeof r||"r"!=r[0]&&"#"!=r[0]||e&&!u?null:(this.pSBCr||(this.pSBCr=t=>{let r=t.length,e={};if(r>9){if([n,i,g,u]=t=t.split(","),r=t.length,r<3||r>4)return null;e.r=d("a"==n[3]?n.slice(5):n.slice(4)),e.g=d(i),e.b=d(g),e.a=u?parseFloat(u):-1}else{if(8==r||6==r||r<4)return null;r<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(r>4?t[4]+t[4]:"")),t=d(t.slice(1),16),9==r||5==r?(e.r=t>>24&255,e.g=t>>16&255,e.b=t>>8&255,e.a=c((255&t)/.255)/1e3):(e.r=t>>16,e.g=t>>8&255,e.b=255&t,e.a=-1)}return e}),b=r.length>9,b=u?e.length>9||"c"==e&&!b:b,o=this.pSBCr(r),l=t<0,s=e&&"c"!=e?this.pSBCr(e):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},l=1-(t=l?-1*t:t),o&&s?(a?(n=c(l*o.r+t*s.r),i=c(l*o.g+t*s.g),g=c(l*o.b+t*s.b)):(n=c((l*o.r**2+t*s.r**2)**.5),i=c((l*o.g**2+t*s.g**2)**.5),g=c((l*o.b**2+t*s.b**2)**.5)),u=o.a,s=s.a,o=u>=0||s>=0,u=o?u<0?s:s<0?u:u*l+s*t:0,b?"rgb"+(o?"a(":"(")+n+","+i+","+g+(o?","+c(1e3*u)/1e3:"")+")":"#"+(4294967296+16777216*n+65536*i+256*g+(o?c(255*u):0)).toString(16).slice(1,o?void 0:-2)):null)},colorToRgb:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},addAlphaToColor:function(t,r){if(r||(r="0.5"),0==(t=this.colorToRgb[t]||t).indexOf("#")){var e=Utils.hexToRgb(t);return e&&(t="rgba("+e.r+","+e.g+","+e.b+","+r+")"),t}return t=(t=t.replace(/rgb *\((.*),(.*),(.*)\)/,"rgba($1,$2,$3,_alpha_)")).replace("_alpha_",r)},enumTypeCount:-1,enumColorPalette:["rgb(141, 211, 199)","rgb(255, 255, 179)","rgb(190, 186, 218)","rgb(251, 128, 114)","rgb(128, 177, 211)","rgb(253, 180, 98)","rgb(179, 222, 105)","rgb(252, 205, 229)","rgb(217, 217, 217)","rgb(188, 128, 189)","rgb(204, 235, 197)","rgb(255, 237, 111)"],enumColors:{},getEnumColor:function(t){return t.color?t.color:(this.enumColors[t]||(this.enumTypeCount++,this.enumTypeCount>=this.enumColorPalette.length&&(this.enumTypeCount=0),this.enumColors[t]=this.enumColorPalette[this.enumTypeCount]),this.enumColors[t])},smoothColorTable:function(t,r){r||(r=100);let e=1/r,a=[];for(let r=0;r<=1;r+=e){getColor(t,r);a.push(a)}return a},interpColors:function(t,r){for(let e=0;e<t.length-1;e++){let a=t[e],n=t[e+1];if(r>=a[0]&&r<=n[0]){let i=t[e][1],g=t[e+1][1],l=(r-a[0])/(n[0]-a[0]),o=i.match(/rgb\((.*) *, *(.*) *, *(.*)\)/),s=g.match(/rgb\((.*) *, *(.*) *, *(.*)\)/);if(o&&s){return"rgb("+Math.round(+o[1]+l*(+s[1]-+o[1]))+","+Math.round(+o[2]+l*(+s[2]-+o[2]))+","+Math.round(+o[3]+l*(+s[3]-+o[3]))+")"}o=i.match(/#(..)(..)(..)/),s=g.match(/#(..)(..)(..)/);let b=t=>1==t.length?"0"+t:t;if(o&&s){o=o.map((t=>parseInt(t,16))),s=s.map((t=>parseInt(t,16)));let t=Math.round(+o[1]+l*(+s[1]-+o[1])),r=Math.round(+o[2]+l*(+s[2]-+o[2])),e=Math.round(+o[3]+l*(+s[3]-+o[3]));return"#"+b(t.toString(16))+b(r.toString(16))+b(e.toString(16))}return null}}},getColorTable:function(t,r){var e=this.ColorTables[t];return e&&r?e.colors:e},displayAllColorTables:function(t){var r=0,e="<table width=50% >";for(a in this.ColorTables)if(this.ColorTables[a].label)e+=HU.tr([],HU.td(["width","10%"],"<br>"+HU.h3(this.ColorTables[a].label)));else{'new ColorTable("'+a+'","'+a+'", new String[]{\n';for(var n=0;n<this.ColorTables[a].colors.length;n++)'"'+this.ColorTables[a].colors[n]+'",';"});\n",e+=HU.tr([],HU.td(["width","10%"],HtmlUtils.b(a))+HU.td([],HtmlUtils.div(["id",t+"_"+r,"style","width:100%;"],""))),r++}for(a in e+="</table>",$("#"+t).html(e),r=0,this.ColorTables)this.ColorTables[a].label||(this.displayColorTable(this.ColorTables[a],t+"_"+r,0,1,{showRange:!1,height:"20px"}),r++)},getColorTablePopup:function(t,r,e){let n,i="<div class=wiki-editor-popup-items>",g=[];for(a in Utils.ColorTables)if(Utils.ColorTables[a].label)n=HU.div(["style","text-decoration: underline;font-weight:bold"],Utils.ColorTables[a].label),i+=n,g.push(n);else{var l=Utils.getColorTableDisplay(Utils.ColorTables[a],0,1,{showRange:!1,height:"20px"});if(l=HtmlUtils.div([STYLE,HU.css("width","150px"),TITLE,a,CLASS,"ramadda-colortable-select","colortable",a],l),t){var o="insertText("+HtmlUtils.squote(t.getId())+","+HtmlUtils.squote("colorTable="+a)+")";n=HtmlUtils.onClick(o,l),i+=n,g.push(n)}else g.push(l),i+=l}return i+="</div>",i=HU.toggleBlock(HU.div([CLASS,"wiki-editor-popup-header"],e??"Color Table"),i),r?g:i},displayColorTable:function(t,r,e,a,n){if(t){var i=this.getColorTableDisplay(t,e,a,n);$("#"+r).html(i)}},getColorTableDisplay:function(t,r,e,a){if(!t)return null;t.colors&&(t=t.colors),t.length&&Array.isArray(t[0])&&(t=t[t.length-1]);var n={height:"15px",showRange:!0,showColorTableDots:!1,decimals:-1,horizontal:!0,colorWidth:"20px",stride:1};a&&$.extend(n,a);let i=null;if(n.stringValues&&n.stringValues.length){n.showRange=!1,i={},t=[];let r={};n.stringValues.forEach((e=>{let a="";r[e.color]?a=HU.css("border-top","1px solid #ccc"):(r[e.color]=!0,t.push(e.color),i[e.color]="");let n=e.value;""==n&&(n="&lt;blank&gt;"),i[e.color]+=HtmlUtils.div(["title",e.value,STYLE,a],n)}))}r=parseFloat(r),e=parseFloat(e);let g=[CLASS," display-colortable "+(n.showColorTableDots?"display-colortable-dots":"")];Utils.isDefined(n.width)&&(g.push(STYLE),g.push(HU.css(WIDTH,HU.getDimension(String(n.width)))));let l=HtmlUtils.open(DIV,g);n.showColorTableDots||(l+=HU.open("table",["cellpadding",0,"cellspacing",0,"width","100%","border",0]),l+="<tr>");let o=t=>n.decimals>=0?number_format(t,n.decimals):this.formatNumberComma(t);n.showRange&&(n.showColorTableDots||(n.horizontal?l+="<td width=1%>"+o(r)+"&nbsp;</td>":l+=o(r)+"<br>"));var s=(e-r)/t.length;let b=[];if(!n.showColorTableDots||n.horizontal)for(var d=0;d<t.length;d+=n.stride)b.push(d);else for(d=t.length-1;d>=0;d-=n.stride)b.push(d);if(b.forEach(((e,a)=>{let i=r+s*e;var g=[];if(n.showColorTableDots){let a=r+s*(e+1),g=o(i)+"-"+o(a),b=SPACE;n.horizontal||(b="<br>"),l+=HtmlUtils.span([CLASS,"display-colortable-dot-item",TITLE,g],HtmlUtils.div(["data-value",i,"class","display-colortable-dot","style",HU.css("background",t[e])])+b+g),n.horizontal||(l+="<br>")}else{n.showRange&&(g.push(TITLE),g.push(o(i))),g.push(STYLE),g.push(HU.css("text-align","center","background",t[e],WIDTH,"100%","min-height",n.height,"min-width","1px"));let r=n.labels?n.labels[a]:"";n.labelStyle&&(r=HU.div([STYLE,n.labelStyle],r));let s=Utils.getForegroundColor(t[e]);n.horizontal?l+=HtmlUtils.td(["data-value",i,"class","display-colortable-slice","style",HU.css("background",t[e],"color",s),WIDTH,"1"],HtmlUtils.div(g,r||"")):l+=HU.div(["data-value",i,"class","display-colortable-slice",STYLE,HU.css("background",t[e],"color",s,WIDTH,n.colorWidth)],HtmlUtils.div(g,r||""))}})),n.showColorTableDots||(n.showRange&&(n.horizontal?l+=HU.td([WIDTH,"1%"],o(e)+SPACE):l+=o(e)+"<br>"),n.horizontal&&(l+="</tr></table>")),l+=HtmlUtils.close(DIV),l+=HtmlUtils.open(DIV,[CLASS,"display-colortable-extra"]),null!=i){let r=100/t.length+"%";l+="<div style='width:100%;vertical-align:top;text-align:center;'>";t.forEach((t=>{let e=HtmlUtils.div(["style","padding:2px;vertical-align:top;display:inline-block;width:"+r+";max-width:"+r+";overflow-x:auto;"],i[t]);l+=e})),l+="</div>"}return l+=HtmlUtils.close(DIV),l},hexToRgb:function(t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null},componentToHex:function(t){"string"==typeof t&&(t=+t);var r=t.toString(16);return 1==r.length?"0"+r:r},rgbToHex:function(t,r,e){if(null==r){var a=/^rgb *([0-9]+) *, *([0-9]+) *, *([0-9]+)(,|\)).*/i.exec(t);if(!(a=/^rgb *\( *([0-9]+) *,([0-9]+) *, *([0-9]+).*/i.exec(t)))return null;t=a[1],r=a[2],e=a[3]}return t&&r&&e?"#"+Utils.componentToHex(t)+Utils.componentToHex(r)+Utils.componentToHex(e):null},hexStringToInt:function(t){return hex=parseInt(t.replace(/^#/,""),16)},ColorTables:{ramps:{label:"Ramps"},grayscale:{colors:["rgb(0,0,0)","rgb(1,1,1)","rgb(2,2,2)","rgb(3,3,3)","rgb(4,4,4)","rgb(5,5,5)","rgb(6,6,6)","rgb(7,7,7)","rgb(8,8,8)","rgb(9,9,9)","rgb(10,10,10)","rgb(11,11,11)","rgb(12,12,12)","rgb(13,13,13)","rgb(14,14,14)","rgb(15,15,15)","rgb(16,16,16)","rgb(17,17,17)","rgb(18,18,18)","rgb(19,19,19)","rgb(20,20,20)","rgb(21,21,21)","rgb(22,22,22)","rgb(23,23,23)","rgb(24,24,24)","rgb(25,25,25)","rgb(26,26,26)","rgb(27,27,27)","rgb(28,28,28)","rgb(29,29,29)","rgb(30,30,30)","rgb(31,31,31)","rgb(32,32,32)","rgb(33,33,33)","rgb(34,34,34)","rgb(35,35,35)","rgb(36,36,36)","rgb(37,37,37)","rgb(38,38,38)","rgb(39,39,39)","rgb(40,40,40)","rgb(41,41,41)","rgb(42,42,42)","rgb(43,43,43)","rgb(44,44,44)","rgb(45,45,45)","rgb(46,46,46)","rgb(47,47,47)","rgb(48,48,48)","rgb(49,49,49)","rgb(50,50,50)","rgb(51,51,51)","rgb(52,52,52)","rgb(53,53,53)","rgb(54,54,54)","rgb(55,55,55)","rgb(56,56,56)","rgb(57,57,57)","rgb(58,58,58)","rgb(59,59,59)","rgb(60,60,60)","rgb(61,61,61)","rgb(62,62,62)","rgb(63,63,63)","rgb(64,64,64)","rgb(65,65,65)","rgb(66,66,66)","rgb(67,67,67)","rgb(68,68,68)","rgb(69,69,69)","rgb(70,70,70)","rgb(71,71,71)","rgb(72,72,72)","rgb(73,73,73)","rgb(74,74,74)","rgb(75,75,75)","rgb(76,76,76)","rgb(77,77,77)","rgb(78,78,78)","rgb(79,79,79)","rgb(80,80,80)","rgb(81,81,81)","rgb(82,82,82)","rgb(83,83,83)","rgb(84,84,84)","rgb(85,85,85)","rgb(86,86,86)","rgb(87,87,87)","rgb(88,88,88)","rgb(89,89,89)","rgb(90,90,90)","rgb(91,91,91)","rgb(92,92,92)","rgb(93,93,93)","rgb(94,94,94)","rgb(95,95,95)","rgb(96,96,96)","rgb(97,97,97)","rgb(98,98,98)","rgb(99,99,99)","rgb(100,100,100)","rgb(101,101,101)","rgb(102,102,102)","rgb(103,103,103)","rgb(104,104,104)","rgb(105,105,105)","rgb(106,106,106)","rgb(107,107,107)","rgb(108,108,108)","rgb(109,109,109)","rgb(110,110,110)","rgb(111,111,111)","rgb(112,112,112)","rgb(113,113,113)","rgb(114,114,114)","rgb(115,115,115)","rgb(116,116,116)","rgb(117,117,117)","rgb(118,118,118)","rgb(119,119,119)","rgb(120,120,120)","rgb(121,121,121)","rgb(122,122,122)","rgb(123,123,123)","rgb(124,124,124)","rgb(125,125,125)","rgb(126,126,126)","rgb(127,127,127)","rgb(128,128,128)","rgb(129,129,129)","rgb(130,130,130)","rgb(131,131,131)","rgb(132,132,132)","rgb(133,133,133)","rgb(134,134,134)","rgb(135,135,135)","rgb(136,136,136)","rgb(137,137,137)","rgb(138,138,138)","rgb(139,139,139)","rgb(140,140,140)","rgb(141,141,141)","rgb(142,142,142)","rgb(143,143,143)","rgb(144,144,144)","rgb(145,145,145)","rgb(146,146,146)","rgb(147,147,147)","rgb(148,148,148)","rgb(149,149,149)","rgb(150,150,150)","rgb(151,151,151)","rgb(152,152,152)","rgb(153,153,153)","rgb(154,154,154)","rgb(155,155,155)","rgb(156,156,156)","rgb(157,157,157)","rgb(158,158,158)","rgb(159,159,159)","rgb(160,160,160)","rgb(161,161,161)","rgb(162,162,162)","rgb(163,163,163)","rgb(164,164,164)","rgb(165,165,165)","rgb(166,166,166)","rgb(167,167,167)","rgb(168,168,168)","rgb(169,169,169)","rgb(170,170,170)","rgb(171,171,171)","rgb(172,172,172)","rgb(173,173,173)","rgb(174,174,174)","rgb(175,175,175)","rgb(176,176,176)","rgb(177,177,177)","rgb(178,178,178)","rgb(179,179,179)","rgb(180,180,180)","rgb(181,181,181)","rgb(182,182,182)","rgb(183,183,183)","rgb(184,184,184)","rgb(185,185,185)","rgb(186,186,186)","rgb(187,187,187)","rgb(188,188,188)","rgb(189,189,189)","rgb(190,190,190)","rgb(191,191,191)","rgb(192,192,192)","rgb(193,193,193)","rgb(194,194,194)","rgb(195,195,195)","rgb(196,196,196)","rgb(197,197,197)","rgb(198,198,198)","rgb(199,199,199)","rgb(200,200,200)","rgb(201,201,201)","rgb(202,202,202)","rgb(203,203,203)","rgb(204,204,204)","rgb(205,205,205)","rgb(206,206,206)","rgb(207,207,207)","rgb(208,208,208)","rgb(209,209,209)","rgb(210,210,210)","rgb(211,211,211)","rgb(212,212,212)","rgb(213,213,213)","rgb(214,214,214)","rgb(215,215,215)","rgb(216,216,216)","rgb(217,217,217)","rgb(218,218,218)","rgb(219,219,219)","rgb(220,220,220)","rgb(221,221,221)","rgb(222,222,222)","rgb(223,223,223)","rgb(224,224,224)","rgb(225,225,225)","rgb(226,226,226)","rgb(227,227,227)","rgb(228,228,228)","rgb(229,229,229)","rgb(230,230,230)","rgb(231,231,231)","rgb(232,232,232)","rgb(233,233,233)","rgb(234,234,234)","rgb(235,235,235)","rgb(236,236,236)","rgb(237,237,237)","rgb(238,238,238)","rgb(239,239,239)","rgb(240,240,240)","rgb(241,241,241)","rgb(242,242,242)","rgb(243,243,243)","rgb(244,244,244)","rgb(245,245,245)","rgb(246,246,246)","rgb(247,247,247)","rgb(248,248,248)","rgb(249,249,249)","rgb(250,250,250)","rgb(251,251,251)","rgb(252,252,252)","rgb(253,253,253)","rgb(254,254,254)","rgb(255,255,255)"]},inversegrayscale:{colors:["rgb(255,255,255)","rgb(255,255,255)","rgb(254,254,254)","rgb(253,253,253)","rgb(252,252,252)","rgb(251,251,251)","rgb(250,250,250)","rgb(249,249,249)","rgb(248,248,248)","rgb(247,247,247)","rgb(246,246,246)","rgb(245,245,245)","rgb(244,244,244)","rgb(243,243,243)","rgb(242,242,242)","rgb(241,241,241)","rgb(240,240,240)","rgb(239,239,239)","rgb(238,238,238)","rgb(237,237,237)","rgb(236,236,236)","rgb(235,235,235)","rgb(234,234,234)","rgb(233,233,233)","rgb(232,232,232)","rgb(231,231,231)","rgb(230,230,230)","rgb(229,229,229)","rgb(228,228,228)","rgb(227,227,227)","rgb(226,226,226)","rgb(225,225,225)","rgb(224,224,224)","rgb(223,223,223)","rgb(222,222,222)","rgb(221,221,221)","rgb(220,220,220)","rgb(219,219,219)","rgb(218,218,218)","rgb(217,217,217)","rgb(216,216,216)","rgb(215,215,215)","rgb(214,214,214)","rgb(213,213,213)","rgb(212,212,212)","rgb(211,211,211)","rgb(210,210,210)","rgb(209,209,209)","rgb(208,208,208)","rgb(207,207,207)","rgb(206,206,206)","rgb(205,205,205)","rgb(204,204,204)","rgb(203,203,203)","rgb(202,202,202)","rgb(201,201,201)","rgb(200,200,200)","rgb(199,199,199)","rgb(198,198,198)","rgb(197,197,197)","rgb(196,196,196)","rgb(195,195,195)","rgb(194,194,194)","rgb(193,193,193)","rgb(192,192,192)","rgb(191,191,191)","rgb(190,190,190)","rgb(189,189,189)","rgb(188,188,188)","rgb(187,187,187)","rgb(186,186,186)","rgb(185,185,185)","rgb(184,184,184)","rgb(183,183,183)","rgb(182,182,182)","rgb(181,181,181)","rgb(180,180,180)","rgb(179,179,179)","rgb(178,178,178)","rgb(177,177,177)","rgb(176,176,176)","rgb(175,175,175)","rgb(174,174,174)","rgb(173,173,173)","rgb(172,172,172)","rgb(171,171,171)","rgb(170,170,170)","rgb(169,169,169)","rgb(168,168,168)","rgb(167,167,167)","rgb(166,166,166)","rgb(165,165,165)","rgb(164,164,164)","rgb(163,163,163)","rgb(162,162,162)","rgb(161,161,161)","rgb(160,160,160)","rgb(159,159,159)","rgb(158,158,158)","rgb(157,157,157)","rgb(156,156,156)","rgb(155,155,155)","rgb(154,154,154)","rgb(153,153,153)","rgb(152,152,152)","rgb(151,151,151)","rgb(150,150,150)","rgb(149,149,149)","rgb(148,148,148)","rgb(147,147,147)","rgb(146,146,146)","rgb(145,145,145)","rgb(144,144,144)","rgb(143,143,143)","rgb(142,142,142)","rgb(141,141,141)","rgb(140,140,140)","rgb(139,139,139)","rgb(138,138,138)","rgb(137,137,137)","rgb(136,136,136)","rgb(135,135,135)","rgb(134,134,134)","rgb(133,133,133)","rgb(132,132,132)","rgb(131,131,131)","rgb(130,130,130)","rgb(129,129,129)","rgb(128,128,128)","rgb(127,127,127)","rgb(126,126,126)","rgb(125,125,125)","rgb(124,124,124)","rgb(123,123,123)","rgb(122,122,122)","rgb(121,121,121)","rgb(120,120,120)","rgb(119,119,119)","rgb(118,118,118)","rgb(117,117,117)","rgb(116,116,116)","rgb(115,115,115)","rgb(114,114,114)","rgb(113,113,113)","rgb(112,112,112)","rgb(111,111,111)","rgb(110,110,110)","rgb(109,109,109)","rgb(108,108,108)","rgb(107,107,107)","rgb(106,106,106)","rgb(105,105,105)","rgb(104,104,104)","rgb(103,103,103)","rgb(102,102,102)","rgb(101,101,101)","rgb(100,100,100)","rgb(99,99,99)","rgb(98,98,98)","rgb(97,97,97)","rgb(96,96,96)","rgb(95,95,95)","rgb(94,94,94)","rgb(93,93,93)","rgb(92,92,92)","rgb(91,91,91)","rgb(90,90,90)","rgb(89,89,89)","rgb(88,88,88)","rgb(87,87,87)","rgb(86,86,86)","rgb(85,85,85)","rgb(84,84,84)","rgb(83,83,83)","rgb(82,82,82)","rgb(81,81,81)","rgb(80,80,80)","rgb(79,79,79)","rgb(78,78,78)","rgb(77,77,77)","rgb(76,76,76)","rgb(75,75,75)","rgb(74,74,74)","rgb(73,73,73)","rgb(72,72,72)","rgb(71,71,71)","rgb(70,70,70)","rgb(69,69,69)","rgb(68,68,68)","rgb(67,67,67)","rgb(66,66,66)","rgb(65,65,65)","rgb(64,64,64)","rgb(63,63,63)","rgb(62,62,62)","rgb(61,61,61)","rgb(60,60,60)","rgb(59,59,59)","rgb(58,58,58)","rgb(57,57,57)","rgb(56,56,56)","rgb(55,55,55)","rgb(54,54,54)","rgb(53,53,53)","rgb(52,52,52)","rgb(51,51,51)","rgb(50,50,50)","rgb(49,49,49)","rgb(48,48,48)","rgb(47,47,47)","rgb(46,46,46)","rgb(45,45,45)","rgb(44,44,44)","rgb(43,43,43)","rgb(42,42,42)","rgb(41,41,41)","rgb(40,40,40)","rgb(39,39,39)","rgb(38,38,38)","rgb(37,37,37)","rgb(36,36,36)","rgb(35,35,35)","rgb(34,34,34)","rgb(33,33,33)","rgb(32,32,32)","rgb(31,31,31)","rgb(30,30,30)","rgb(29,29,29)","rgb(28,28,28)","rgb(27,27,27)","rgb(26,26,26)","rgb(25,25,25)","rgb(24,24,24)","rgb(23,23,23)","rgb(22,22,22)","rgb(21,21,21)","rgb(20,20,20)","rgb(19,19,19)","rgb(18,18,18)","rgb(17,17,17)","rgb(16,16,16)","rgb(15,15,15)","rgb(14,14,14)","rgb(13,13,13)","rgb(12,12,12)","rgb(11,11,11)","rgb(10,10,10)","rgb(9,9,9)","rgb(8,8,8)","rgb(7,7,7)","rgb(6,6,6)","rgb(5,5,5)","rgb(4,4,4)","rgb(3,3,3)","rgb(2,2,2)","rgb(1,1,1)"]},lightgrayscale:{colors:["rgb(62,62,62)","rgb(69,69,69)","rgb(75,75,75)","rgb(82,82,82)","rgb(88,88,88)","rgb(95,95,95)","rgb(102,102,102)","rgb(108,108,108)","rgb(115,115,115)","rgb(121,121,121)","rgb(128,128,128)","rgb(135,135,135)","rgb(141,141,141)","rgb(148,148,148)","rgb(155,155,155)","rgb(161,161,161)","rgb(168,168,168)","rgb(174,174,174)","rgb(181,181,181)","rgb(188,188,188)","rgb(194,194,194)","rgb(201,201,201)","rgb(207,207,207)","rgb(214,214,214)","rgb(221,221,221)","rgb(227,227,227)","rgb(234,234,234)","rgb(240,240,240)","rgb(247,247,247)","rgb(254,254,254)"]},blues:{colors:["rgb(255,255,255)","rgb(246,246,255)","rgb(237,237,255)","rgb(228,228,255)","rgb(219,219,255)","rgb(211,211,255)","rgb(202,202,255)","rgb(193,193,255)","rgb(184,184,255)","rgb(175,175,255)","rgb(167,167,255)","rgb(158,158,255)","rgb(149,149,255)","rgb(140,140,255)","rgb(131,131,255)","rgb(123,123,255)","rgb(114,114,255)","rgb(105,105,255)","rgb(96,96,255)","rgb(87,87,255)","rgb(79,79,255)","rgb(70,70,255)","rgb(61,61,255)","rgb(52,52,255)","rgb(43,43,255)","rgb(35,35,255)","rgb(26,26,255)","rgb(17,17,255)","rgb(8,8,255)","rgb(0,0,255)"]},plotly_blues:{colors:["rgb(5,10,172)","rgb(6,11,173)","rgb(7,13,173)","rgb(8,14,174)","rgb(9,16,174)","rgb(10,17,175)","rgb(11,19,175)","rgb(12,20,176)","rgb(13,21,176)","rgb(14,23,177)","rgb(15,24,177)","rgb(16,26,178)","rgb(17,27,178)","rgb(18,29,179)","rgb(19,30,179)","rgb(20,31,180)","rgb(21,33,180)","rgb(22,34,181)","rgb(23,36,181)","rgb(24,37,182)","rgb(25,39,182)","rgb(26,40,183)","rgb(27,41,183)","rgb(28,43,184)","rgb(29,44,184)","rgb(30,46,185)","rgb(31,47,185)","rgb(32,49,186)","rgb(33,50,186)","rgb(34,51,187)","rgb(35,53,187)","rgb(36,54,188)","rgb(37,56,188)","rgb(38,57,189)","rgb(39,59,189)","rgb(40,60,190)","rgb(42,63,194)","rgb(44,65,197)","rgb(46,68,201)","rgb(48,71,205)","rgb(50,73,208)","rgb(52,76,212)","rgb(54,79,216)","rgb(56,81,219)","rgb(58,84,223)","rgb(60,87,227)","rgb(62,89,230)","rgb(64,92,234)","rgb(66,95,238)","rgb(68,97,241)","rgb(70,100,245)","rgb(72,102,245)","rgb(74,104,245)","rgb(76,106,245)","rgb(78,108,245)","rgb(80,110,245)","rgb(82,112,245)","rgb(84,114,245)","rgb(86,116,245)","rgb(88,118,245)","rgb(90,120,245)","rgb(92,122,245)","rgb(93,123,245)","rgb(95,125,246)","rgb(96,127,246)","rgb(98,129,246)","rgb(100,130,246)","rgb(101,132,246)","rgb(103,134,247)","rgb(104,135,247)","rgb(106,137,247)","rgb(110,140,246)","rgb(114,143,245)","rgb(117,145,244)","rgb(121,148,243)","rgb(125,151,242)","rgb(129,154,242)","rgb(133,156,241)","rgb(136,159,240)","rgb(140,162,239)","rgb(144,165,238)","rgb(148,167,237)","rgb(152,170,236)","rgb(155,173,235)","rgb(159,176,234)","rgb(163,179,233)","rgb(167,181,233)","rgb(171,184,232)","rgb(174,187,231)","rgb(178,190,230)","rgb(182,192,229)","rgb(186,195,228)","rgb(190,198,227)","rgb(193,201,226)","rgb(197,203,225)","rgb(201,206,224)","rgb(205,209,224)","rgb(209,212,223)","rgb(212,214,222)","rgb(216,217,221)"]},plotly_greens:{colors:["rgb(0,68,27)","rgb(0,71,28)","rgb(0,75,30)","rgb(0,78,31)","rgb(0,81,32)","rgb(0,84,34)","rgb(0,88,35)","rgb(0,91,37)","rgb(0,94,38)","rgb(0,98,39)","rgb(0,101,41)","rgb(0,104,42)","rgb(0,107,43)","rgb(1,110,45)","rgb(4,113,47)","rgb(7,115,49)","rgb(10,117,51)","rgb(13,120,53)","rgb(15,122,55)","rgb(18,125,57)","rgb(21,127,59)","rgb(24,129,61)","rgb(27,132,63)","rgb(29,134,65)","rgb(32,137,67)","rgb(35,139,69)","rgb(37,142,71)","rgb(40,144,73)","rgb(42,147,75)","rgb(45,149,77)","rgb(47,152,79)","rgb(49,154,81)","rgb(52,157,82)","rgb(54,159,84)","rgb(57,162,86)","rgb(59,165,88)","rgb(61,167,90)","rgb(64,170,92)","rgb(67,172,94)","rgb(71,174,96)","rgb(75,176,98)","rgb(79,178,100)","rgb(83,180,102)","rgb(87,182,104)","rgb(92,184,106)","rgb(96,186,108)","rgb(100,188,110)","rgb(104,190,112)","rgb(108,192,114)","rgb(112,194,116)","rgb(116,196,118)","rgb(120,198,121)","rgb(123,199,124)","rgb(127,201,127)","rgb(130,203,130)","rgb(134,204,133)","rgb(138,206,136)","rgb(141,208,139)","rgb(145,209,142)","rgb(148,211,145)","rgb(152,213,148)","rgb(156,214,151)","rgb(159,216,154)","rgb(163,218,156)","rgb(166,219,159)","rgb(169,220,162)","rgb(172,221,165)","rgb(175,223,168)","rgb(178,224,171)","rgb(181,225,174)","rgb(184,227,177)","rgb(187,228,180)","rgb(190,229,183)","rgb(193,230,186)","rgb(196,232,189)","rgb(199,233,192)","rgb(201,234,195)","rgb(204,235,197)","rgb(206,236,200)","rgb(209,237,202)","rgb(211,238,205)","rgb(213,239,207)","rgb(216,240,210)","rgb(218,241,212)","rgb(221,242,215)","rgb(223,243,218)","rgb(225,244,220)","rgb(228,245,223)","rgb(230,245,225)","rgb(231,246,227)","rgb(233,246,228)","rgb(234,247,230)","rgb(235,248,232)","rgb(237,248,233)","rgb(238,249,235)","rgb(240,249,237)","rgb(241,250,238)","rgb(243,250,240)","rgb(244,251,242)","rgb(246,251,243)"]},plotly_ylorrd:{colors:["rgb(128,0,38)","rgb(133,0,38)","rgb(138,0,38)","rgb(143,0,38)","rgb(148,0,38)","rgb(152,0,38)","rgb(157,0,38)","rgb(162,0,38)","rgb(167,0,38)","rgb(172,0,38)","rgb(177,0,38)","rgb(182,0,38)","rgb(187,0,38)","rgb(191,1,38)","rgb(194,3,37)","rgb(197,5,36)","rgb(200,7,35)","rgb(203,9,34)","rgb(206,11,34)","rgb(209,14,33)","rgb(212,16,32)","rgb(215,18,31)","rgb(218,20,30)","rgb(221,22,30)","rgb(224,24,29)","rgb(227,26,28)","rgb(229,30,29)","rgb(231,34,30)","rgb(233,38,31)","rgb(235,43,32)","rgb(237,47,34)","rgb(239,51,35)","rgb(241,55,36)","rgb(243,59,37)","rgb(245,63,38)","rgb(247,68,39)","rgb(249,72,40)","rgb(251,76,41)","rgb(252,81,43)","rgb(252,86,44)","rgb(252,91,46)","rgb(252,96,47)","rgb(252,101,48)","rgb(252,106,50)","rgb(253,111,51)","rgb(253,116,53)","rgb(253,121,54)","rgb(253,126,56)","rgb(253,131,57)","rgb(253,136,59)","rgb(253,141,60)","rgb(253,144,61)","rgb(253,147,63)","rgb(253,150,64)","rgb(253,153,65)","rgb(253,156,66)","rgb(253,159,68)","rgb(254,162,69)","rgb(254,165,70)","rgb(254,168,72)","rgb(254,171,73)","rgb(254,174,74)","rgb(254,177,75)","rgb(254,180,78)","rgb(254,183,81)","rgb(254,186,84)","rgb(254,189,88)","rgb(254,192,91)","rgb(254,195,94)","rgb(254,198,98)","rgb(254,201,101)","rgb(254,205,105)","rgb(254,208,108)","rgb(254,211,111)","rgb(254,214,115)","rgb(254,217,118)","rgb(254,219,121)","rgb(254,220,125)","rgb(254,222,128)","rgb(254,223,131)","rgb(254,225,135)","rgb(254,227,138)","rgb(255,228,142)","rgb(255,230,145)","rgb(255,231,148)","rgb(255,233,152)","rgb(255,235,155)","rgb(255,236,158)","rgb(255,238,162)","rgb(255,239,165)","rgb(255,241,169)","rgb(255,242,172)","rgb(255,243,176)","rgb(255,245,179)","rgb(255,246,183)","rgb(255,248,186)","rgb(255,249,190)","rgb(255,251,193)","rgb(255,252,197)","rgb(255,254,200)"]},plotly_reds:{colors:["rgb(220,220,220)","rgb(221,219,217)","rgb(223,218,214)","rgb(224,216,211)","rgb(225,215,207)","rgb(226,214,204)","rgb(228,213,201)","rgb(229,211,198)","rgb(230,210,195)","rgb(231,209,192)","rgb(233,208,189)","rgb(234,206,185)","rgb(235,205,182)","rgb(236,204,179)","rgb(238,203,176)","rgb(239,201,173)","rgb(240,200,170)","rgb(241,199,166)","rgb(243,198,163)","rgb(244,196,160)","rgb(245,195,157)","rgb(245,193,154)","rgb(245,192,152)","rgb(245,190,149)","rgb(245,188,147)","rgb(245,186,144)","rgb(245,185,141)","rgb(245,183,139)","rgb(245,181,136)","rgb(245,179,134)","rgb(245,178,131)","rgb(245,176,128)","rgb(245,174,126)","rgb(245,172,123)","rgb(245,170,121)","rgb(245,169,118)","rgb(245,167,115)","rgb(245,165,113)","rgb(245,163,110)","rgb(245,162,108)","rgb(245,160,105)","rgb(244,157,104)","rgb(243,155,102)","rgb(242,152,101)","rgb(241,150,100)","rgb(239,147,99)","rgb(238,145,97)","rgb(237,142,96)","rgb(236,140,95)","rgb(235,137,93)","rgb(234,135,92)","rgb(233,132,91)","rgb(232,130,90)","rgb(230,127,88)","rgb(229,125,87)","rgb(228,122,86)","rgb(227,120,84)","rgb(226,117,83)","rgb(225,115,82)","rgb(224,112,81)","rgb(223,110,79)","rgb(222,107,78)","rgb(220,105,77)","rgb(219,102,75)","rgb(218,100,74)","rgb(217,97,73)","rgb(216,95,72)","rgb(215,92,70)","rgb(214,90,69)","rgb(213,87,68)","rgb(211,85,66)","rgb(210,82,65)","rgb(209,80,64)","rgb(208,77,63)","rgb(207,75,61)","rgb(206,72,60)","rgb(205,70,59)","rgb(204,67,58)","rgb(203,65,56)","rgb(201,62,55)","rgb(200,60,54)","rgb(199,57,52)","rgb(198,55,51)","rgb(197,52,50)","rgb(196,50,49)","rgb(195,47,47)","rgb(194,45,46)","rgb(193,42,45)","rgb(191,40,43)","rgb(190,37,42)","rgb(189,35,41)","rgb(188,32,40)","rgb(187,30,38)","rgb(186,27,37)","rgb(185,25,36)","rgb(184,22,34)","rgb(182,20,33)","rgb(181,17,32)","rgb(180,15,31)","rgb(179,12,29)"]},plotly_bluered:{colors:["rgb(0,0,255)","rgb(3,0,252)","rgb(5,0,250)","rgb(8,0,247)","rgb(10,0,245)","rgb(13,0,242)","rgb(15,0,240)","rgb(18,0,237)","rgb(20,0,235)","rgb(23,0,232)","rgb(25,0,230)","rgb(28,0,227)","rgb(31,0,224)","rgb(33,0,222)","rgb(36,0,219)","rgb(38,0,217)","rgb(41,0,214)","rgb(43,0,212)","rgb(46,0,209)","rgb(48,0,207)","rgb(51,0,204)","rgb(54,0,201)","rgb(56,0,199)","rgb(59,0,196)","rgb(61,0,194)","rgb(64,0,191)","rgb(66,0,189)","rgb(69,0,186)","rgb(71,0,184)","rgb(74,0,181)","rgb(77,0,178)","rgb(79,0,176)","rgb(82,0,173)","rgb(84,0,171)","rgb(87,0,168)","rgb(89,0,166)","rgb(92,0,163)","rgb(94,0,161)","rgb(97,0,158)","rgb(99,0,156)","rgb(102,0,153)","rgb(105,0,150)","rgb(107,0,148)","rgb(110,0,145)","rgb(112,0,143)","rgb(115,0,140)","rgb(117,0,138)","rgb(120,0,135)","rgb(122,0,133)","rgb(125,0,130)","rgb(128,0,127)","rgb(130,0,125)","rgb(133,0,122)","rgb(135,0,120)","rgb(138,0,117)","rgb(140,0,115)","rgb(143,0,112)","rgb(145,0,110)","rgb(148,0,107)","rgb(150,0,105)","rgb(153,0,102)","rgb(156,0,99)","rgb(158,0,97)","rgb(161,0,94)","rgb(163,0,92)","rgb(166,0,89)","rgb(168,0,87)","rgb(171,0,84)","rgb(173,0,82)","rgb(176,0,79)","rgb(179,0,76)","rgb(181,0,74)","rgb(184,0,71)","rgb(186,0,69)","rgb(189,0,66)","rgb(191,0,64)","rgb(194,0,61)","rgb(196,0,59)","rgb(199,0,56)","rgb(201,0,54)","rgb(204,0,51)","rgb(207,0,48)","rgb(209,0,46)","rgb(212,0,43)","rgb(214,0,41)","rgb(217,0,38)","rgb(219,0,36)","rgb(222,0,33)","rgb(224,0,31)","rgb(227,0,28)","rgb(230,0,25)","rgb(232,0,23)","rgb(235,0,20)","rgb(237,0,18)","rgb(240,0,15)","rgb(242,0,13)","rgb(245,0,10)","rgb(247,0,8)","rgb(250,0,5)","rgb(252,0,3)"]},plotly_ylgnbu:{colors:["rgb(8,29,88)","rgb(10,31,93)","rgb(13,33,98)","rgb(15,35,102)","rgb(17,36,107)","rgb(20,38,112)","rgb(22,40,117)","rgb(24,42,122)","rgb(27,44,126)","rgb(29,46,131)","rgb(31,47,136)","rgb(34,49,141)","rgb(36,51,146)","rgb(37,54,149)","rgb(37,57,150)","rgb(36,60,152)","rgb(36,64,154)","rgb(36,67,155)","rgb(36,70,157)","rgb(35,74,158)","rgb(35,77,160)","rgb(35,81,162)","rgb(35,84,163)","rgb(34,87,165)","rgb(34,91,166)","rgb(34,94,168)","rgb(34,98,170)","rgb(33,102,172)","rgb(33,106,174)","rgb(32,110,176)","rgb(32,114,178)","rgb(32,118,180)","rgb(31,123,181)","rgb(31,127,183)","rgb(30,131,185)","rgb(30,135,187)","rgb(30,139,189)","rgb(29,143,191)","rgb(30,146,192)","rgb(33,149,192)","rgb(36,152,193)","rgb(39,155,193)","rgb(42,158,193)","rgb(45,161,194)","rgb(48,164,194)","rgb(51,167,194)","rgb(53,170,195)","rgb(56,173,195)","rgb(59,176,195)","rgb(62,179,196)","rgb(65,182,196)","rgb(70,184,195)","rgb(75,186,195)","rgb(80,188,194)","rgb(85,189,193)","rgb(90,191,192)","rgb(95,193,192)","rgb(100,195,191)","rgb(105,197,190)","rgb(110,199,190)","rgb(115,200,189)","rgb(120,202,188)","rgb(125,204,187)","rgb(130,206,187)","rgb(136,208,186)","rgb(141,211,186)","rgb(147,213,185)","rgb(153,215,184)","rgb(159,217,184)","rgb(164,220,183)","rgb(170,222,183)","rgb(176,224,182)","rgb(182,226,182)","rgb(187,229,181)","rgb(193,231,181)","rgb(199,233,180)","rgb(202,234,183)","rgb(205,235,186)","rgb(208,237,189)","rgb(211,238,192)","rgb(214,239,195)","rgb(217,240,198)","rgb(220,241,201)","rgb(223,243,204)","rgb(226,244,207)","rgb(229,245,210)","rgb(232,246,213)","rgb(235,247,216)","rgb(238,248,217)","rgb(239,249,217)","rgb(241,249,217)","rgb(242,250,217)","rgb(243,251,217)","rgb(245,251,217)","rgb(246,252,217)","rgb(248,252,217)","rgb(249,253,217)","rgb(251,253,217)","rgb(252,254,217)","rgb(254,254,217)"]},plotly_electric:{colors:["rgb(0,0,0)","rgb(2,0,7)","rgb(4,0,13)","rgb(6,0,20)","rgb(8,0,27)","rgb(10,0,33)","rgb(12,0,40)","rgb(14,0,47)","rgb(16,0,53)","rgb(18,0,60)","rgb(20,0,67)","rgb(22,0,73)","rgb(24,0,80)","rgb(26,0,87)","rgb(28,0,93)","rgb(30,0,100)","rgb(34,0,100)","rgb(37,0,100)","rgb(41,0,100)","rgb(44,0,100)","rgb(48,0,100)","rgb(52,0,100)","rgb(55,0,100)","rgb(59,0,100)","rgb(62,0,100)","rgb(66,0,100)","rgb(70,0,100)","rgb(73,0,100)","rgb(77,0,100)","rgb(80,0,100)","rgb(84,0,100)","rgb(88,0,100)","rgb(91,0,100)","rgb(95,0,100)","rgb(98,0,100)","rgb(102,0,100)","rgb(106,0,100)","rgb(109,0,100)","rgb(113,0,100)","rgb(116,0,100)","rgb(120,0,100)","rgb(122,5,95)","rgb(124,9,90)","rgb(126,14,85)","rgb(128,18,80)","rgb(130,23,75)","rgb(132,27,70)","rgb(134,32,65)","rgb(136,36,60)","rgb(138,41,55)","rgb(140,45,50)","rgb(142,50,45)","rgb(144,54,40)","rgb(146,59,35)","rgb(148,63,30)","rgb(150,68,25)","rgb(152,72,20)","rgb(154,77,15)","rgb(156,81,10)","rgb(158,86,5)","rgb(160,90,0)","rgb(164,96,0)","rgb(167,101,0)","rgb(171,107,0)","rgb(174,112,0)","rgb(178,118,0)","rgb(181,123,0)","rgb(185,129,0)","rgb(188,134,0)","rgb(192,140,0)","rgb(195,145,0)","rgb(199,151,0)","rgb(202,156,0)","rgb(206,162,0)","rgb(209,167,0)","rgb(213,173,0)","rgb(216,178,0)","rgb(220,184,0)","rgb(223,189,0)","rgb(227,195,0)","rgb(230,200,0)","rgb(231,203,11)","rgb(233,205,22)","rgb(234,208,33)","rgb(235,210,44)","rgb(236,213,55)","rgb(238,215,66)","rgb(239,218,77)","rgb(240,220,88)","rgb(241,223,99)","rgb(243,225,110)","rgb(244,228,121)","rgb(245,230,132)","rgb(246,233,143)","rgb(248,235,154)","rgb(249,238,165)","rgb(250,240,176)","rgb(251,243,187)","rgb(253,245,198)","rgb(254,248,209)"]},plotly_viridis:{colors:["#440154","#450558","#45085b","#460c5f","#471062","#471366","#481769","#481a6c","#481e6f","#482171","#472474","#472877","#472b7a","#472e7c","#46317e","#45347f","#443781","#433a83","#433e85","#424186","#414387","#404688","#3e4989","#3d4c89","#3c4f8a","#3b528b","#3a548b","#39578c","#375a8c","#365d8c","#355f8d","#33628d","#32658d","#31678d","#30698d","#2f6c8e","#2e6e8e","#2d708e","#2c738e","#2b758e","#2a788e","#297b8e","#287d8e","#27808e","#26828e","#25858e","#24878d","#24898d","#238c8d","#228e8c","#21918c","#21938b","#20958b","#20988a","#209a8a","#1f9c89","#1f9f88","#20a187","#21a386","#23a685","#24a883","#25aa82","#27ac81","#29af7f","#2db17d","#30b37b","#34b579","#38b777","#3bba75","#3fbc73","#44be70","#49c06e","#4ec26b","#53c468","#58c666","#5dc863","#62ca5f","#68cc5c","#6ece58","#74cf54","#7bd151","#81d34d","#87d549","#8dd645","#94d741","#9ad83c","#a1da38","#a7db34","#aedc2f","#b5dd2c","#bcde28","#c3df24","#c9e021","#d0e11d","#d7e219","#dee31b","#e4e41d","#eae41f","#f0e521","#f7e623"]},plotly_cividis:{colors:["rgb(0,32,76)","rgb(0,34,80)","rgb(0,35,85)","rgb(0,37,89)","rgb(0,39,94)","rgb(0,40,98)","rgb(0,42,102)","rgb(0,44,104)","rgb(0,46,105)","rgb(0,47,106)","rgb(0,49,108)","rgb(0,51,109)","rgb(2,52,110)","rgb(8,54,110)","rgb(15,56,109)","rgb(21,58,109)","rgb(28,60,109)","rgb(35,62,108)","rgb(40,64,108)","rgb(44,66,108)","rgb(47,67,108)","rgb(51,69,107)","rgb(55,71,107)","rgb(58,73,107)","rgb(61,75,107)","rgb(64,77,107)","rgb(67,79,107)","rgb(69,80,107)","rgb(72,82,107)","rgb(75,84,107)","rgb(77,86,107)","rgb(80,88,108)","rgb(83,89,108)","rgb(85,91,108)","rgb(88,93,109)","rgb(90,95,109)","rgb(93,96,109)","rgb(95,98,110)","rgb(97,100,110)","rgb(99,102,111)","rgb(101,104,111)","rgb(104,106,112)","rgb(106,108,113)","rgb(108,109,114)","rgb(110,111,114)","rgb(112,113,115)","rgb(115,115,116)","rgb(117,117,117)","rgb(119,119,117)","rgb(122,121,118)","rgb(124,123,119)","rgb(126,125,119)","rgb(129,127,120)","rgb(131,129,120)","rgb(134,131,120)","rgb(136,133,120)","rgb(139,135,120)","rgb(141,137,120)","rgb(144,138,120)","rgb(146,140,120)","rgb(149,142,120)","rgb(152,144,119)","rgb(154,146,119)","rgb(157,149,119)","rgb(159,151,118)","rgb(162,153,118)","rgb(164,155,117)","rgb(167,157,116)","rgb(169,159,116)","rgb(172,161,115)","rgb(175,164,114)","rgb(177,166,114)","rgb(180,168,113)","rgb(183,170,112)","rgb(185,172,111)","rgb(188,174,110)","rgb(191,176,109)","rgb(194,178,108)","rgb(196,181,107)","rgb(199,183,106)","rgb(202,185,105)","rgb(205,188,104)","rgb(208,190,102)","rgb(211,192,101)","rgb(213,195,99)","rgb(216,197,97)","rgb(219,199,96)","rgb(222,201,94)","rgb(224,203,92)","rgb(227,206,90)","rgb(230,209,88)","rgb(233,211,86)","rgb(237,214,84)","rgb(240,216,81)","rgb(243,219,79)","rgb(245,221,77)","rgb(247,223,76)","rgb(249,226,74)","rgb(251,228,72)","rgb(253,231,71)"]},blues:{colors:["rgb(255,255,255)","rgb(246,246,255)","rgb(237,237,255)","rgb(228,228,255)","rgb(219,219,255)","rgb(211,211,255)","rgb(202,202,255)","rgb(193,193,255)","rgb(184,184,255)","rgb(175,175,255)","rgb(167,167,255)","rgb(158,158,255)","rgb(149,149,255)","rgb(140,140,255)","rgb(131,131,255)","rgb(123,123,255)","rgb(114,114,255)","rgb(105,105,255)","rgb(96,96,255)","rgb(87,87,255)","rgb(79,79,255)","rgb(70,70,255)","rgb(61,61,255)","rgb(52,52,255)","rgb(43,43,255)","rgb(35,35,255)","rgb(26,26,255)","rgb(17,17,255)","rgb(8,8,255)","rgb(0,0,255)"]},mapramps:{label:"Map Ramps"},white_blue:{colors:["rgb(244,252,254)","rgb(101,239,255)","rgb(50,227,255)","rgb(0,169,204)","rgb(0,122,153)"]},blue_green:{colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},blue_purple:{colors:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},green_blue:{colors:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},orange_red:{colors:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},purple_blue:{colors:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},purple_blue_green:{colors:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},purple_red:{colors:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},red_purple:{colors:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},yellow_green:{colors:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},yellow_green_blue:{colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},yellow_orange_brown:{colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},yellow_orange_red:{colors:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},oranges:{colors:["#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},purples:{colors:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},reds:{colors:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},greens:{colors:["#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},map_grays:{colors:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},d3_schemeBuGn:{colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},d3_schemeBuPu:{colors:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},d3_schemeGnBu:{colors:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},d3_schemeGreens:{colors:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},d3_schemeGreys:{colors:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},d3_schemeOrRd:{colors:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},d3_schemeOranges:{colors:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},d3_schemePuBu:{colors:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},d3_schemePuBuGn:{colors:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},d3_schemePuRd:{colors:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},d3_schemePurples:{colors:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},d3_schemeReds:{colors:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},d3_schemeYlGn:{colors:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},d3_schemeYlGnBu:{colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},d3_schemeRdPu:{colors:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},divergent:{label:"Divergent"},red_blue:{colors:["rgb(234,12,48)","rgb(234,12,48)","rgb(234,12,48)","rgb(26,12,234)","rgb(26,12,234)","rgb(26,12,234)"]},blue_red:{colors:["rgb(26,12,234)","rgb(26,12,234)","rgb(26,12,234)","rgb(234,12,48)","rgb(234,12,48)","rgb(234,12,48)"]},blue_white_red:{colors:["rgb(0,0,255)","rgb(2,2,255)","rgb(4,4,255)","rgb(6,6,255)","rgb(8,8,255)","rgb(10,10,255)","rgb(12,12,255)","rgb(14,14,255)","rgb(16,16,255)","rgb(18,18,255)","rgb(20,20,255)","rgb(22,22,255)","rgb(24,24,255)","rgb(26,26,255)","rgb(28,28,255)","rgb(30,30,255)","rgb(32,32,255)","rgb(34,34,255)","rgb(36,36,255)","rgb(38,38,255)","rgb(40,40,255)","rgb(42,42,255)","rgb(44,44,255)","rgb(46,46,255)","rgb(48,48,255)","rgb(50,50,255)","rgb(52,52,255)","rgb(54,54,255)","rgb(56,56,255)","rgb(58,58,255)","rgb(60,60,255)","rgb(62,62,255)","rgb(64,64,255)","rgb(66,66,255)","rgb(68,68,255)","rgb(70,70,255)","rgb(72,72,255)","rgb(74,74,255)","rgb(76,76,255)","rgb(78,78,255)","rgb(80,80,255)","rgb(82,82,255)","rgb(84,84,255)","rgb(86,86,255)","rgb(88,88,255)","rgb(90,90,255)","rgb(92,92,255)","rgb(94,94,255)","rgb(96,96,255)","rgb(98,98,255)","rgb(100,100,255)","rgb(102,102,255)","rgb(104,104,255)","rgb(106,106,255)","rgb(108,108,255)","rgb(110,110,255)","rgb(112,112,255)","rgb(114,114,255)","rgb(116,116,255)","rgb(118,118,255)","rgb(120,120,255)","rgb(122,122,255)","rgb(124,124,255)","rgb(126,126,255)","rgb(128,128,255)","rgb(130,130,255)","rgb(132,132,255)","rgb(134,134,255)","rgb(136,136,255)","rgb(138,138,255)","rgb(140,140,255)","rgb(142,142,255)","rgb(144,144,255)","rgb(146,146,255)","rgb(148,148,255)","rgb(150,150,255)","rgb(152,152,255)","rgb(154,154,255)","rgb(156,156,255)","rgb(158,158,255)","rgb(160,160,255)","rgb(162,162,255)","rgb(164,164,255)","rgb(166,166,255)","rgb(168,168,255)","rgb(170,170,255)","rgb(172,172,255)","rgb(174,174,255)","rgb(176,176,255)","rgb(178,178,255)","rgb(180,180,255)","rgb(182,182,255)","rgb(184,184,255)","rgb(186,186,255)","rgb(188,188,255)","rgb(190,190,255)","rgb(192,192,255)","rgb(194,194,255)","rgb(196,196,255)","rgb(198,198,255)","rgb(200,200,255)","rgb(202,202,255)","rgb(204,204,255)","rgb(206,206,255)","rgb(208,208,255)","rgb(210,210,255)","rgb(212,212,255)","rgb(214,214,255)","rgb(216,216,255)","rgb(218,218,255)","rgb(220,220,255)","rgb(222,222,255)","rgb(224,224,255)","rgb(226,226,255)","rgb(228,228,255)","rgb(230,230,255)","rgb(232,232,255)","rgb(234,234,255)","rgb(236,236,255)","rgb(238,238,255)","rgb(240,240,255)","rgb(242,242,255)","rgb(244,244,255)","rgb(246,246,255)","rgb(248,248,255)","rgb(250,250,255)","rgb(252,252,255)","rgb(252,251,254)","rgb(252,249,252)","rgb(252,247,250)","rgb(252,245,248)","rgb(252,243,246)","rgb(252,241,244)","rgb(252,239,242)","rgb(252,237,240)","rgb(252,235,238)","rgb(252,233,236)","rgb(252,231,234)","rgb(252,229,232)","rgb(252,227,230)","rgb(252,225,228)","rgb(252,223,226)","rgb(252,221,224)","rgb(252,219,222)","rgb(252,217,220)","rgb(252,215,218)","rgb(252,213,216)","rgb(252,211,214)","rgb(252,209,212)","rgb(252,207,210)","rgb(252,205,208)","rgb(252,203,206)","rgb(252,202,204)","rgb(252,200,202)","rgb(252,198,200)","rgb(252,196,198)","rgb(252,194,196)","rgb(252,192,194)","rgb(252,190,192)","rgb(252,188,190)","rgb(252,186,188)","rgb(252,184,186)","rgb(252,182,184)","rgb(252,180,182)","rgb(252,178,180)","rgb(252,176,178)","rgb(252,174,176)","rgb(252,172,174)","rgb(253,170,172)","rgb(253,168,170)","rgb(253,166,168)","rgb(253,164,166)","rgb(253,162,164)","rgb(253,160,162)","rgb(253,158,160)","rgb(253,156,158)","rgb(253,154,156)","rgb(253,153,154)","rgb(253,151,152)","rgb(253,149,150)","rgb(253,147,148)","rgb(253,145,146)","rgb(253,143,144)","rgb(253,141,142)","rgb(253,139,140)","rgb(253,137,138)","rgb(253,135,136)","rgb(253,133,134)","rgb(253,131,132)","rgb(253,129,131)","rgb(253,127,129)","rgb(253,125,127)","rgb(253,123,125)","rgb(253,121,123)","rgb(253,119,121)","rgb(253,117,119)","rgb(253,115,117)","rgb(253,113,115)","rgb(253,111,113)","rgb(253,109,111)","rgb(253,107,109)","rgb(253,105,107)","rgb(253,104,105)","rgb(253,102,103)","rgb(253,100,101)","rgb(253,98,99)","rgb(253,96,97)","rgb(253,94,95)","rgb(253,92,93)","rgb(253,90,91)","rgb(254,88,89)","rgb(254,86,87)","rgb(254,84,85)","rgb(254,82,83)","rgb(254,80,81)","rgb(254,78,79)","rgb(254,76,77)","rgb(254,74,75)","rgb(254,72,73)","rgb(254,70,71)","rgb(254,68,69)","rgb(254,66,67)","rgb(254,64,65)","rgb(254,62,63)","rgb(254,60,61)","rgb(254,58,59)","rgb(254,56,57)","rgb(254,55,55)","rgb(254,53,53)","rgb(254,51,51)","rgb(254,49,49)","rgb(254,47,47)","rgb(254,45,45)","rgb(254,43,43)","rgb(254,41,41)","rgb(254,39,39)","rgb(254,37,37)","rgb(254,35,35)","rgb(254,33,33)","rgb(254,31,31)","rgb(254,29,29)","rgb(254,27,27)","rgb(254,25,25)","rgb(254,23,23)","rgb(254,21,21)","rgb(254,19,19)","rgb(254,17,17)","rgb(254,15,15)","rgb(254,13,13)","rgb(254,11,11)","rgb(254,9,9)"]},red_white_blue:{colors:["rgb(254,9,9)","rgb(254,11,11)","rgb(254,13,13)","rgb(254,15,15)","rgb(254,17,17)","rgb(254,19,19)","rgb(254,21,21)","rgb(254,23,23)","rgb(254,25,25)","rgb(254,27,27)","rgb(254,29,29)","rgb(254,31,31)","rgb(254,33,33)","rgb(254,35,35)","rgb(254,37,37)","rgb(254,39,39)","rgb(254,41,41)","rgb(254,43,43)","rgb(254,45,45)","rgb(254,47,47)","rgb(254,49,49)","rgb(254,51,51)","rgb(254,53,53)","rgb(254,55,55)","rgb(254,56,57)","rgb(254,58,59)","rgb(254,60,61)","rgb(254,62,63)","rgb(254,64,65)","rgb(254,66,67)","rgb(254,68,69)","rgb(254,70,71)","rgb(254,72,73)","rgb(254,74,75)","rgb(254,76,77)","rgb(254,78,79)","rgb(254,80,81)","rgb(254,82,83)","rgb(254,84,85)","rgb(254,86,87)","rgb(254,88,89)","rgb(253,90,91)","rgb(253,92,93)","rgb(253,94,95)","rgb(253,96,97)","rgb(253,98,99)","rgb(253,100,101)","rgb(253,102,103)","rgb(253,104,105)","rgb(253,105,107)","rgb(253,107,109)","rgb(253,109,111)","rgb(253,111,113)","rgb(253,113,115)","rgb(253,115,117)","rgb(253,117,119)","rgb(253,119,121)","rgb(253,121,123)","rgb(253,123,125)","rgb(253,125,127)","rgb(253,127,129)","rgb(253,129,131)","rgb(253,131,132)","rgb(253,133,134)","rgb(253,135,136)","rgb(253,137,138)","rgb(253,139,140)","rgb(253,141,142)","rgb(253,143,144)","rgb(253,145,146)","rgb(253,147,148)","rgb(253,149,150)","rgb(253,151,152)","rgb(253,153,154)","rgb(253,154,156)","rgb(253,156,158)","rgb(253,158,160)","rgb(253,160,162)","rgb(253,162,164)","rgb(253,164,166)","rgb(253,166,168)","rgb(253,168,170)","rgb(253,170,172)","rgb(252,172,174)","rgb(252,174,176)","rgb(252,176,178)","rgb(252,178,180)","rgb(252,180,182)","rgb(252,182,184)","rgb(252,184,186)","rgb(252,186,188)","rgb(252,188,190)","rgb(252,190,192)","rgb(252,192,194)","rgb(252,194,196)","rgb(252,196,198)","rgb(252,198,200)","rgb(252,200,202)","rgb(252,202,204)","rgb(252,203,206)","rgb(252,205,208)","rgb(252,207,210)","rgb(252,209,212)","rgb(252,211,214)","rgb(252,213,216)","rgb(252,215,218)","rgb(252,217,220)","rgb(252,219,222)","rgb(252,221,224)","rgb(252,223,226)","rgb(252,225,228)","rgb(252,227,230)","rgb(252,229,232)","rgb(252,231,234)","rgb(252,233,236)","rgb(252,235,238)","rgb(252,237,240)","rgb(252,239,242)","rgb(252,241,244)","rgb(252,243,246)","rgb(252,245,248)","rgb(252,247,250)","rgb(252,249,252)","rgb(252,251,254)","rgb(252,252,255)","rgb(250,250,255)","rgb(248,248,255)","rgb(246,246,255)","rgb(244,244,255)","rgb(242,242,255)","rgb(240,240,255)","rgb(238,238,255)","rgb(236,236,255)","rgb(234,234,255)","rgb(232,232,255)","rgb(230,230,255)","rgb(228,228,255)","rgb(226,226,255)","rgb(224,224,255)","rgb(222,222,255)","rgb(220,220,255)","rgb(218,218,255)","rgb(216,216,255)","rgb(214,214,255)","rgb(212,212,255)","rgb(210,210,255)","rgb(208,208,255)","rgb(206,206,255)","rgb(204,204,255)","rgb(202,202,255)","rgb(200,200,255)","rgb(198,198,255)","rgb(196,196,255)","rgb(194,194,255)","rgb(192,192,255)","rgb(190,190,255)","rgb(188,188,255)","rgb(186,186,255)","rgb(184,184,255)","rgb(182,182,255)","rgb(180,180,255)","rgb(178,178,255)","rgb(176,176,255)","rgb(174,174,255)","rgb(172,172,255)","rgb(170,170,255)","rgb(168,168,255)","rgb(166,166,255)","rgb(164,164,255)","rgb(162,162,255)","rgb(160,160,255)","rgb(158,158,255)","rgb(156,156,255)","rgb(154,154,255)","rgb(152,152,255)","rgb(150,150,255)","rgb(148,148,255)","rgb(146,146,255)","rgb(144,144,255)","rgb(142,142,255)","rgb(140,140,255)","rgb(138,138,255)","rgb(136,136,255)","rgb(134,134,255)","rgb(132,132,255)","rgb(130,130,255)","rgb(128,128,255)","rgb(126,126,255)","rgb(124,124,255)","rgb(122,122,255)","rgb(120,120,255)","rgb(118,118,255)","rgb(116,116,255)","rgb(114,114,255)","rgb(112,112,255)","rgb(110,110,255)","rgb(108,108,255)","rgb(106,106,255)","rgb(104,104,255)","rgb(102,102,255)","rgb(100,100,255)","rgb(98,98,255)","rgb(96,96,255)","rgb(94,94,255)","rgb(92,92,255)","rgb(90,90,255)","rgb(88,88,255)","rgb(86,86,255)","rgb(84,84,255)","rgb(82,82,255)","rgb(80,80,255)","rgb(78,78,255)","rgb(76,76,255)","rgb(74,74,255)","rgb(72,72,255)","rgb(70,70,255)","rgb(68,68,255)","rgb(66,66,255)","rgb(64,64,255)","rgb(62,62,255)","rgb(60,60,255)","rgb(58,58,255)","rgb(56,56,255)","rgb(54,54,255)","rgb(52,52,255)","rgb(50,50,255)","rgb(48,48,255)","rgb(46,46,255)","rgb(44,44,255)","rgb(42,42,255)","rgb(40,40,255)","rgb(38,38,255)","rgb(36,36,255)","rgb(34,34,255)","rgb(32,32,255)","rgb(30,30,255)","rgb(28,28,255)","rgb(26,26,255)","rgb(24,24,255)","rgb(22,22,255)","rgb(20,20,255)","rgb(18,18,255)","rgb(16,16,255)","rgb(14,14,255)","rgb(12,12,255)","rgb(10,10,255)","rgb(8,8,255)","rgb(6,6,255)","rgb(4,4,255)","rgb(2,2,255)","rgb(0,0,255)"]},plotly_rdbu:{colors:["rgb(5,10,172)","rgb(8,14,174)","rgb(11,17,176)","rgb(14,21,178)","rgb(17,25,181)","rgb(19,28,183)","rgb(22,32,185)","rgb(25,35,187)","rgb(28,39,189)","rgb(31,43,191)","rgb(34,46,193)","rgb(37,50,196)","rgb(40,54,198)","rgb(43,57,200)","rgb(45,61,202)","rgb(48,64,204)","rgb(51,68,206)","rgb(54,72,208)","rgb(57,75,211)","rgb(60,79,213)","rgb(63,83,215)","rgb(66,86,217)","rgb(68,90,219)","rgb(71,93,221)","rgb(74,97,223)","rgb(77,101,226)","rgb(80,104,228)","rgb(83,108,230)","rgb(86,112,232)","rgb(89,115,234)","rgb(92,119,236)","rgb(94,122,238)","rgb(97,126,241)","rgb(100,130,243)","rgb(103,133,245)","rgb(106,137,247)","rgb(112,141,243)","rgb(117,144,239)","rgb(123,148,236)","rgb(128,151,232)","rgb(134,155,228)","rgb(140,158,224)","rgb(145,162,220)","rgb(151,165,217)","rgb(156,169,213)","rgb(162,172,209)","rgb(168,176,205)","rgb(173,179,201)","rgb(179,183,198)","rgb(184,186,194)","rgb(190,190,190)","rgb(193,188,184)","rgb(196,186,178)","rgb(199,184,173)","rgb(202,182,167)","rgb(205,180,161)","rgb(208,178,155)","rgb(211,176,149)","rgb(214,174,144)","rgb(217,172,138)","rgb(220,170,132)","rgb(221,167,128)","rgb(222,165,124)","rgb(223,162,119)","rgb(224,160,115)","rgb(225,157,111)","rgb(226,155,107)","rgb(227,152,103)","rgb(228,150,98)","rgb(229,147,94)","rgb(230,145,90)","rgb(228,140,88)","rgb(227,136,86)","rgb(225,131,84)","rgb(223,127,82)","rgb(221,122,80)","rgb(220,118,78)","rgb(218,113,76)","rgb(216,109,73)","rgb(214,104,71)","rgb(213,100,69)","rgb(211,95,67)","rgb(209,91,65)","rgb(207,86,63)","rgb(206,82,61)","rgb(204,77,59)","rgb(202,73,57)","rgb(201,68,55)","rgb(199,64,53)","rgb(197,59,51)","rgb(195,55,49)","rgb(194,50,47)","rgb(192,46,45)","rgb(190,41,42)","rgb(188,37,40)","rgb(187,32,38)","rgb(185,28,36)","rgb(183,23,34)","rgb(181,19,32)","rgb(180,14,30)"]},blue_green_red:{colors:["rgb(0,0,255)","rgb(8,17,246)","rgb(17,35,237)","rgb(26,52,228)","rgb(35,70,219)","rgb(43,87,211)","rgb(52,105,202)","rgb(61,123,193)","rgb(70,140,184)","rgb(79,158,175)","rgb(87,175,167)","rgb(96,193,158)","rgb(105,211,149)","rgb(114,228,140)","rgb(123,246,131)","rgb(131,246,123)","rgb(140,228,114)","rgb(149,211,105)","rgb(158,193,96)","rgb(167,175,87)","rgb(175,158,79)","rgb(184,140,70)","rgb(193,123,61)","rgb(202,105,52)","rgb(211,87,43)","rgb(219,70,35)","rgb(228,52,26)","rgb(237,35,17)","rgb(246,17,8)","rgb(255,0,0)"]},red_green_blue:{colors:["rgb(255,0,0)","rgb(246,17,8)","rgb(237,35,17)","rgb(228,52,26)","rgb(219,70,35)","rgb(211,87,43)","rgb(202,105,52)","rgb(193,123,61)","rgb(184,140,70)","rgb(175,158,79)","rgb(167,175,87)","rgb(158,193,96)","rgb(149,211,105)","rgb(140,228,114)","rgb(131,246,123)","rgb(123,246,131)","rgb(114,228,140)","rgb(105,211,149)","rgb(96,193,158)","rgb(87,175,167)","rgb(79,158,175)","rgb(70,140,184)","rgb(61,123,193)","rgb(52,105,202)","rgb(43,87,211)","rgb(35,70,219)","rgb(26,52,228)","rgb(17,35,237)","rgb(8,17,246)","rgb(0,0,255)"]},d3_schemeBrBG:{colors:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},d3_schemePRGn:{colors:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},d3_schemePiYG:{colors:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},d3_schemePuOr:{colors:["#2d004b","#542788","#8073ac","#b2abd2","#d8daeb","#f7f7f7","#fee0b6","#fdb863","#e08214","#b35806","#7f3b08"]},d3_schemeRdYlBu:{colors:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},d3_schemeRdBu:{colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},d3_schemeRdGy:{colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},d3_schemeRdYlGn:{colors:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},d3_schemeSpectral:{colors:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},categorical:{label:"Categorical"},rainbow:{colors:["red","orange","yellow","green","blue","indigo","violet"]},cats:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#12649f","#ffd800","#DFA25A","#4B0082","#7BCCC4","#ADDD8E"]},nice:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]},nice2:{colors:["#1f77b4","#ff7f0e"]},nice3:{colors:["#1f77b4","#ff7f0e","#2ca02c"]},nice4:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728"]},nice5:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd"]},nice6:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b"]},nice7:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2"]},nice8:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f"]},nice9:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#1B1B1B"]},nice10:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#A0CBE8","#4B0082"]},schemecategory:{colors:["rgb(31, 119, 180)","rgb(255, 127, 14)","rgb(44, 160, 44)","rgb(214, 39, 40)","rgb(148, 103, 189)","rgb(140, 86, 75)","rgb(227, 119, 194)","rgb(127, 127, 127)","rgb(188, 189, 34)"]},schemeaccent:{colors:["rgb(127, 201, 127)","rgb(190, 174, 212)","rgb(253, 192, 134)","rgb(255, 255, 153)","rgb(56, 108, 176)","rgb(240, 2, 127)","rgb(191, 91, 23)","rgb(102, 102, 102)"]},schemedark:{colors:["rgb(27, 158, 119)","rgb(217, 95, 2)","rgb(117, 112, 179)","rgb(231, 41, 138)","rgb(102, 166, 30)","rgb(230, 171, 2)","rgb(166, 118, 29)","rgb(102, 102, 102)"]},schemeset1:{colors:["rgb(228, 26, 28)","rgb(55, 126, 184)","rgb(77, 175, 74)","rgb(152, 78, 163)","rgb(255, 127, 0)","rgb(166, 86, 40)","rgb(247, 129, 191)","rgb(153, 153, 153)"]},schemeset2:{colors:["rgb(141, 211, 199)","rgb(255, 255, 179)","rgb(190, 186, 218)","rgb(251, 128, 114)","rgb(128, 177, 211)","rgb(253, 180, 98)","rgb(179, 222, 105)","rgb(252, 205, 229)","rgb(217, 217, 217)","rgb(188, 128, 189)","rgb(204, 235, 197)","rgb(255, 237, 111)"]},d3_schemeAccent:{colors:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},d3_schemeCategory10:{colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]},d3_schemePaired:{colors:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},d3_schemePastel1:{colors:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},d3_schemePastel2:{colors:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},googlecharts:{colors:["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"]},d3_schemeDark2:{colors:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},d3_schemeTableau10:{colors:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"]},d3_schemeCategory20b:{colors:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"]},d3_schemeCategory20c:{colors:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]},d3_schemeCategory20:{colors:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]},mixed:{label:"Mixed"},plotly_picnic:{colors:["rgb(0,0,255)","rgb(5,15,255)","rgb(10,31,255)","rgb(15,46,255)","rgb(20,61,255)","rgb(26,77,255)","rgb(31,92,255)","rgb(36,107,255)","rgb(41,122,255)","rgb(46,138,255)","rgb(51,153,255)","rgb(56,158,255)","rgb(61,163,255)","rgb(66,168,255)","rgb(71,173,255)","rgb(77,179,255)","rgb(82,184,255)","rgb(87,189,255)","rgb(92,194,255)","rgb(97,199,255)","rgb(102,204,255)","rgb(107,204,255)","rgb(112,204,255)","rgb(117,204,255)","rgb(122,204,255)","rgb(128,204,255)","rgb(133,204,255)","rgb(138,204,255)","rgb(143,204,255)","rgb(148,204,255)","rgb(153,204,255)","rgb(158,204,255)","rgb(163,204,255)","rgb(168,204,255)","rgb(173,204,255)","rgb(179,204,255)","rgb(184,204,255)","rgb(189,204,255)","rgb(194,204,255)","rgb(199,204,255)","rgb(204,204,255)","rgb(209,209,255)","rgb(214,214,255)","rgb(219,219,255)","rgb(224,224,255)","rgb(230,230,255)","rgb(235,235,255)","rgb(240,240,255)","rgb(245,245,255)","rgb(250,250,255)","rgb(255,255,255)","rgb(255,250,255)","rgb(255,245,255)","rgb(255,240,255)","rgb(255,235,255)","rgb(255,229,255)","rgb(255,224,255)","rgb(255,219,255)","rgb(255,214,255)","rgb(255,209,255)","rgb(255,204,255)","rgb(255,199,255)","rgb(255,194,255)","rgb(255,189,255)","rgb(255,184,255)","rgb(255,178,255)","rgb(255,173,255)","rgb(255,168,255)","rgb(255,163,255)","rgb(255,158,255)","rgb(255,153,255)","rgb(255,148,250)","rgb(255,143,245)","rgb(255,138,240)","rgb(255,133,235)","rgb(255,127,229)","rgb(255,122,224)","rgb(255,117,219)","rgb(255,112,214)","rgb(255,107,209)","rgb(255,102,204)","rgb(255,102,194)","rgb(255,102,184)","rgb(255,102,173)","rgb(255,102,163)","rgb(255,102,153)","rgb(255,102,143)","rgb(255,102,133)","rgb(255,102,122)","rgb(255,102,112)","rgb(255,102,102)","rgb(255,92,92)","rgb(255,82,82)","rgb(255,71,71)","rgb(255,61,61)","rgb(255,51,51)","rgb(255,41,41)","rgb(255,31,31)","rgb(255,20,20)","rgb(255,10,10)"]},plotly_rainbow:{colors:["rgb(150,0,90)","rgb(138,0,99)","rgb(126,0,108)","rgb(114,0,116)","rgb(102,0,125)","rgb(90,0,134)","rgb(78,0,143)","rgb(66,0,152)","rgb(54,0,160)","rgb(42,0,169)","rgb(30,0,178)","rgb(18,0,187)","rgb(6,0,196)","rgb(0,1,202)","rgb(0,3,207)","rgb(0,5,211)","rgb(0,7,215)","rgb(0,9,220)","rgb(0,11,224)","rgb(0,13,229)","rgb(0,15,233)","rgb(0,17,237)","rgb(0,19,242)","rgb(0,21,246)","rgb(0,23,251)","rgb(0,25,255)","rgb(0,35,255)","rgb(0,45,255)","rgb(0,55,255)","rgb(0,66,255)","rgb(0,76,255)","rgb(0,86,255)","rgb(0,96,255)","rgb(0,106,255)","rgb(0,116,255)","rgb(0,127,255)","rgb(0,137,255)","rgb(0,147,255)","rgb(2,156,251)","rgb(5,164,242)","rgb(9,173,234)","rgb(12,181,226)","rgb(16,189,217)","rgb(19,197,209)","rgb(23,206,200)","rgb(26,214,192)","rgb(30,222,184)","rgb(33,230,175)","rgb(37,239,167)","rgb(40,247,158)","rgb(44,255,150)","rgb(53,255,138)","rgb(61,255,126)","rgb(70,255,114)","rgb(78,255,102)","rgb(87,255,90)","rgb(95,255,78)","rgb(104,255,66)","rgb(112,255,54)","rgb(121,255,42)","rgb(130,255,30)","rgb(138,255,18)","rgb(147,255,6)","rgb(155,254,0)","rgb(163,252,0)","rgb(172,251,0)","rgb(180,249,0)","rgb(188,247,0)","rgb(197,246,0)","rgb(205,244,0)","rgb(213,242,0)","rgb(222,241,0)","rgb(230,239,0)","rgb(238,237,0)","rgb(247,236,0)","rgb(255,234,0)","rgb(255,224,0)","rgb(255,214,0)","rgb(255,204,0)","rgb(255,195,0)","rgb(255,185,0)","rgb(255,175,0)","rgb(255,165,0)","rgb(255,155,0)","rgb(255,145,0)","rgb(255,136,0)","rgb(255,126,0)","rgb(255,116,0)","rgb(255,107,0)","rgb(255,98,0)","rgb(255,89,0)","rgb(255,80,0)","rgb(255,71,0)","rgb(255,62,0)","rgb(255,53,0)","rgb(255,44,0)","rgb(255,36,0)","rgb(255,27,0)","rgb(255,18,0)","rgb(255,9,0)"]},plotly_portland:{colors:["rgb(12,51,131)","rgb(12,54,133)","rgb(12,58,135)","rgb(12,61,138)","rgb(12,65,140)","rgb(12,68,142)","rgb(12,71,144)","rgb(11,75,146)","rgb(11,78,149)","rgb(11,82,151)","rgb(11,85,153)","rgb(11,88,155)","rgb(11,92,157)","rgb(11,95,160)","rgb(11,99,162)","rgb(11,102,164)","rgb(11,105,166)","rgb(11,109,168)","rgb(11,112,171)","rgb(10,116,173)","rgb(10,119,175)","rgb(10,122,177)","rgb(10,126,179)","rgb(10,129,182)","rgb(10,133,184)","rgb(10,136,186)","rgb(19,139,181)","rgb(29,142,176)","rgb(38,145,170)","rgb(47,148,165)","rgb(56,151,160)","rgb(66,154,155)","rgb(75,157,150)","rgb(84,160,144)","rgb(94,163,139)","rgb(103,166,134)","rgb(112,169,129)","rgb(121,172,124)","rgb(131,175,118)","rgb(140,178,113)","rgb(149,181,108)","rgb(158,184,103)","rgb(168,187,98)","rgb(177,190,92)","rgb(186,193,87)","rgb(196,196,82)","rgb(205,199,77)","rgb(214,202,72)","rgb(223,205,66)","rgb(233,208,61)","rgb(242,211,56)","rgb(242,208,56)","rgb(242,206,56)","rgb(242,203,56)","rgb(242,200,56)","rgb(242,197,56)","rgb(242,195,56)","rgb(242,192,56)","rgb(242,189,56)","rgb(242,187,56)","rgb(242,184,56)","rgb(242,181,56)","rgb(242,178,56)","rgb(242,176,56)","rgb(242,173,56)","rgb(242,170,56)","rgb(242,167,56)","rgb(242,165,56)","rgb(242,162,56)","rgb(242,159,56)","rgb(242,157,56)","rgb(242,154,56)","rgb(242,151,56)","rgb(242,148,56)","rgb(242,146,56)","rgb(242,143,56)","rgb(241,138,55)","rgb(240,134,54)","rgb(239,129,53)","rgb(238,125,52)","rgb(237,120,51)","rgb(236,116,50)","rgb(235,111,49)","rgb(234,107,48)","rgb(233,102,47)","rgb(232,98,46)","rgb(231,93,45)","rgb(230,89,44)","rgb(229,84,42)","rgb(228,80,41)","rgb(227,75,40)","rgb(226,71,39)","rgb(225,66,38)","rgb(224,62,37)","rgb(223,57,36)","rgb(222,53,35)","rgb(221,48,34)","rgb(220,44,33)","rgb(219,39,32)","rgb(218,35,31)"]},plotly_jet:{colors:["rgb(0,0,131)","rgb(0,5,134)","rgb(0,10,137)","rgb(0,14,140)","rgb(0,19,143)","rgb(0,24,147)","rgb(0,29,150)","rgb(0,34,153)","rgb(0,38,156)","rgb(0,43,159)","rgb(0,48,162)","rgb(0,53,165)","rgb(0,58,168)","rgb(0,64,172)","rgb(0,72,175)","rgb(0,80,179)","rgb(1,87,182)","rgb(1,95,185)","rgb(1,103,189)","rgb(1,111,192)","rgb(2,119,196)","rgb(2,126,199)","rgb(2,134,202)","rgb(2,142,206)","rgb(2,150,209)","rgb(3,158,213)","rgb(3,165,216)","rgb(3,173,219)","rgb(3,181,223)","rgb(3,189,226)","rgb(4,197,230)","rgb(4,204,233)","rgb(4,212,236)","rgb(4,220,240)","rgb(4,228,243)","rgb(5,236,247)","rgb(5,243,250)","rgb(5,251,253)","rgb(10,255,250)","rgb(20,255,240)","rgb(30,255,229)","rgb(40,255,219)","rgb(50,255,209)","rgb(60,255,199)","rgb(70,255,189)","rgb(80,255,178)","rgb(90,255,168)","rgb(100,255,158)","rgb(110,255,148)","rgb(120,255,138)","rgb(130,255,127)","rgb(140,255,117)","rgb(150,255,107)","rgb(160,255,97)","rgb(170,255,87)","rgb(180,255,76)","rgb(190,255,66)","rgb(200,255,56)","rgb(210,255,46)","rgb(220,255,36)","rgb(230,255,25)","rgb(240,255,15)","rgb(250,255,5)","rgb(255,250,0)","rgb(255,240,0)","rgb(255,229,0)","rgb(254,219,0)","rgb(254,209,0)","rgb(254,199,0)","rgb(254,189,0)","rgb(254,178,0)","rgb(253,168,0)","rgb(253,158,0)","rgb(253,148,0)","rgb(253,138,0)","rgb(253,127,0)","rgb(252,117,0)","rgb(252,107,0)","rgb(252,97,0)","rgb(252,87,0)","rgb(252,76,0)","rgb(251,66,0)","rgb(251,56,0)","rgb(251,46,0)","rgb(251,36,0)","rgb(251,25,0)","rgb(250,15,0)","rgb(250,5,0)","rgb(245,0,0)","rgb(235,0,0)","rgb(226,0,0)","rgb(216,0,0)","rgb(206,0,0)","rgb(196,0,0)","rgb(187,0,0)","rgb(177,0,0)","rgb(167,0,0)","rgb(157,0,0)","rgb(148,0,0)","rgb(138,0,0)"]},plotly_hot:{colors:["rgb(0,0,0)","rgb(8,0,0)","rgb(15,0,0)","rgb(23,0,0)","rgb(31,0,0)","rgb(38,0,0)","rgb(46,0,0)","rgb(54,0,0)","rgb(61,0,0)","rgb(69,0,0)","rgb(77,0,0)","rgb(84,0,0)","rgb(92,0,0)","rgb(100,0,0)","rgb(107,0,0)","rgb(115,0,0)","rgb(123,0,0)","rgb(130,0,0)","rgb(138,0,0)","rgb(146,0,0)","rgb(153,0,0)","rgb(161,0,0)","rgb(169,0,0)","rgb(176,0,0)","rgb(184,0,0)","rgb(192,0,0)","rgb(199,0,0)","rgb(207,0,0)","rgb(215,0,0)","rgb(222,0,0)","rgb(230,0,0)","rgb(231,7,0)","rgb(232,14,0)","rgb(233,21,0)","rgb(233,28,0)","rgb(234,35,0)","rgb(235,42,0)","rgb(236,49,0)","rgb(237,56,0)","rgb(238,63,0)","rgb(238,70,0)","rgb(239,77,0)","rgb(240,84,0)","rgb(241,91,0)","rgb(242,98,0)","rgb(243,105,0)","rgb(243,112,0)","rgb(244,119,0)","rgb(245,126,0)","rgb(246,133,0)","rgb(247,140,0)","rgb(248,147,0)","rgb(248,154,0)","rgb(249,161,0)","rgb(250,168,0)","rgb(251,175,0)","rgb(252,182,0)","rgb(253,189,0)","rgb(253,196,0)","rgb(254,203,0)","rgb(255,210,0)","rgb(255,211,6)","rgb(255,212,13)","rgb(255,213,19)","rgb(255,215,26)","rgb(255,216,32)","rgb(255,217,38)","rgb(255,218,45)","rgb(255,219,51)","rgb(255,220,57)","rgb(255,221,64)","rgb(255,222,70)","rgb(255,224,77)","rgb(255,225,83)","rgb(255,226,89)","rgb(255,227,96)","rgb(255,228,102)","rgb(255,229,108)","rgb(255,230,115)","rgb(255,231,121)","rgb(255,233,128)","rgb(255,234,134)","rgb(255,235,140)","rgb(255,236,147)","rgb(255,237,153)","rgb(255,238,159)","rgb(255,239,166)","rgb(255,240,172)","rgb(255,242,179)","rgb(255,243,185)","rgb(255,244,191)","rgb(255,245,198)","rgb(255,246,204)","rgb(255,247,210)","rgb(255,248,217)","rgb(255,249,223)","rgb(255,251,230)","rgb(255,252,236)","rgb(255,253,242)","rgb(255,254,249)"]},plotly_blackbody:{colors:["rgb(0,0,0)","rgb(11,0,0)","rgb(23,0,0)","rgb(35,0,0)","rgb(46,0,0)","rgb(58,0,0)","rgb(69,0,0)","rgb(81,0,0)","rgb(92,0,0)","rgb(103,0,0)","rgb(115,0,0)","rgb(126,0,0)","rgb(138,0,0)","rgb(149,0,0)","rgb(161,0,0)","rgb(172,0,0)","rgb(184,0,0)","rgb(196,0,0)","rgb(207,0,0)","rgb(219,0,0)","rgb(230,0,0)","rgb(230,11,0)","rgb(230,21,0)","rgb(230,32,0)","rgb(230,42,0)","rgb(230,53,0)","rgb(230,63,0)","rgb(230,74,0)","rgb(230,84,0)","rgb(230,95,0)","rgb(230,105,0)","rgb(230,116,0)","rgb(230,126,0)","rgb(230,137,0)","rgb(230,147,0)","rgb(230,158,0)","rgb(230,168,0)","rgb(230,179,0)","rgb(230,189,0)","rgb(230,200,0)","rgb(230,210,0)","rgb(231,212,9)","rgb(232,213,17)","rgb(233,215,26)","rgb(233,216,34)","rgb(234,218,43)","rgb(235,219,51)","rgb(236,221,60)","rgb(237,222,68)","rgb(238,224,77)","rgb(238,225,85)","rgb(239,227,94)","rgb(240,228,102)","rgb(241,230,111)","rgb(242,231,119)","rgb(243,233,128)","rgb(243,234,136)","rgb(244,236,145)","rgb(245,237,153)","rgb(246,239,162)","rgb(247,240,170)","rgb(248,242,179)","rgb(248,243,187)","rgb(249,245,196)","rgb(250,246,204)","rgb(251,248,213)","rgb(252,249,221)","rgb(253,251,230)","rgb(253,252,238)","rgb(254,254,247)","rgb(255,255,255)","rgb(252,253,255)","rgb(249,251,255)","rgb(245,249,255)","rgb(242,248,255)","rgb(239,246,255)","rgb(236,244,255)","rgb(233,242,255)","rgb(230,240,255)","rgb(226,238,255)","rgb(223,237,255)","rgb(220,235,255)","rgb(217,233,255)","rgb(214,231,255)","rgb(211,229,255)","rgb(207,227,255)","rgb(204,226,255)","rgb(201,224,255)","rgb(198,222,255)","rgb(195,220,255)","rgb(192,218,255)","rgb(188,216,255)","rgb(185,215,255)","rgb(182,213,255)","rgb(179,211,255)","rgb(176,209,255)","rgb(173,207,255)","rgb(169,205,255)","rgb(166,204,255)","rgb(163,202,255)"]},bright38:{colors:["rgb(254,0,225)","rgb(188,0,254)","rgb(165,0,254)","rgb(134,0,254)","rgb(111,0,254)","rgb(81,0,254)","rgb(58,0,254)","rgb(28,0,254)","rgb(0,2,254)","rgb(0,33,254)","rgb(0,56,254)","rgb(0,78,254)","rgb(0,139,254)","rgb(0,169,254)","rgb(0,208,254)","rgb(0,231,254)","rgb(0,254,231)","rgb(0,254,200)","rgb(0,254,169)","rgb(0,254,139)","rgb(0,254,109)","rgb(0,254,79)","rgb(0,254,39)","rgb(0,254,0)","rgb(42,254,0)","rgb(88,254,0)","rgb(126,254,0)","rgb(164,254,0)","rgb(195,254,0)","rgb(226,254,0)","rgb(254,243,0)","rgb(254,199,0)","rgb(254,167,0)","rgb(254,137,0)","rgb(254,106,0)","rgb(254,68,0)","rgb(254,30,0)","rgb(254,0,0)"]},misc:{label:"Earth"},plotly_earth:{colors:["rgb(0,0,130)","rgb(0,18,135)","rgb(0,36,140)","rgb(0,54,145)","rgb(0,72,150)","rgb(0,90,155)","rgb(0,108,160)","rgb(0,126,165)","rgb(0,144,170)","rgb(0,162,175)","rgb(0,180,180)","rgb(4,183,166)","rgb(8,186,152)","rgb(12,189,138)","rgb(16,192,124)","rgb(20,195,110)","rgb(24,198,96)","rgb(28,201,82)","rgb(32,204,68)","rgb(36,207,54)","rgb(40,210,40)","rgb(50,211,41)","rgb(59,212,41)","rgb(69,213,42)","rgb(78,214,42)","rgb(88,215,43)","rgb(97,216,43)","rgb(107,217,44)","rgb(116,218,44)","rgb(126,219,45)","rgb(135,220,45)","rgb(145,221,46)","rgb(154,222,46)","rgb(164,223,47)","rgb(173,224,47)","rgb(183,225,48)","rgb(192,226,48)","rgb(202,227,49)","rgb(211,228,49)","rgb(221,229,50)","rgb(230,230,50)","rgb(224,222,48)","rgb(219,214,47)","rgb(213,206,45)","rgb(208,198,44)","rgb(202,190,42)","rgb(197,182,41)","rgb(191,174,39)","rgb(186,166,38)","rgb(180,158,36)","rgb(175,150,35)","rgb(169,142,33)","rgb(164,134,32)","rgb(158,126,30)","rgb(153,118,29)","rgb(147,110,27)","rgb(142,102,26)","rgb(136,94,24)","rgb(131,86,23)","rgb(125,78,21)","rgb(120,70,20)","rgb(123,75,26)","rgb(127,79,32)","rgb(130,84,38)","rgb(134,89,44)","rgb(137,93,49)","rgb(140,98,55)","rgb(144,102,61)","rgb(147,107,67)","rgb(150,112,73)","rgb(154,116,79)","rgb(157,121,85)","rgb(161,126,91)","rgb(164,130,96)","rgb(167,135,102)","rgb(171,139,108)","rgb(174,144,114)","rgb(177,149,120)","rgb(181,153,126)","rgb(184,158,132)","rgb(188,163,138)","rgb(191,167,143)","rgb(194,172,149)","rgb(198,176,155)","rgb(201,181,161)","rgb(204,186,167)","rgb(208,190,173)","rgb(211,195,179)","rgb(215,200,185)","rgb(218,204,190)","rgb(221,209,196)","rgb(225,213,202)","rgb(228,218,208)","rgb(231,223,214)","rgb(235,227,220)","rgb(238,232,226)","rgb(242,237,232)","rgb(245,241,237)","rgb(248,246,243)","rgb(252,250,249)"]},topographic:{colors:["rgb(20,170,42)","rgb(20,170,42)","rgb(27,174,35)","rgb(35,179,28)","rgb(43,184,22)","rgb(51,188,15)","rgb(59,193,9)","rgb(67,198,2)","rgb(70,200,0)","rgb(71,199,0)","rgb(72,199,1)","rgb(73,198,1)","rgb(74,198,2)","rgb(75,197,2)","rgb(76,197,3)","rgb(78,197,3)","rgb(79,196,4)","rgb(80,196,4)","rgb(81,195,5)","rgb(82,195,5)","rgb(83,194,6)","rgb(85,194,6)","rgb(86,194,7)","rgb(87,193,7)","rgb(88,193,8)","rgb(89,192,8)","rgb(90,192,9)","rgb(92,191,9)","rgb(93,191,10)","rgb(94,191,10)","rgb(95,190,11)","rgb(96,190,11)","rgb(97,189,12)","rgb(98,189,12)","rgb(100,188,13)","rgb(101,188,13)","rgb(102,188,14)","rgb(103,187,14)","rgb(104,187,15)","rgb(105,186,15)","rgb(107,186,16)","rgb(108,185,16)","rgb(109,185,17)","rgb(110,185,17)","rgb(111,184,18)","rgb(112,184,18)","rgb(114,183,19)","rgb(115,183,19)","rgb(116,182,20)","rgb(117,182,21)","rgb(118,182,21)","rgb(119,181,22)","rgb(120,181,22)","rgb(122,180,23)","rgb(123,180,23)","rgb(124,179,24)","rgb(125,179,24)","rgb(126,179,25)","rgb(127,178,25)","rgb(129,178,26)","rgb(130,177,26)","rgb(131,177,27)","rgb(132,176,27)","rgb(133,176,28)","rgb(134,176,28)","rgb(136,175,29)","rgb(137,175,29)","rgb(138,174,30)","rgb(139,174,30)","rgb(140,173,31)","rgb(141,173,31)","rgb(143,173,32)","rgb(144,172,32)","rgb(145,172,33)","rgb(146,171,33)","rgb(147,171,34)","rgb(148,170,34)","rgb(149,170,35)","rgb(151,170,35)","rgb(152,169,36)","rgb(153,169,36)","rgb(154,168,37)","rgb(155,168,37)","rgb(156,167,38)","rgb(158,167,38)","rgb(159,167,39)","rgb(160,166,39)","rgb(161,166,40)","rgb(162,165,40)","rgb(163,165,41)","rgb(165,165,42)","rgb(165,165,42)","rgb(165,165,43)","rgb(165,165,44)","rgb(165,165,45)","rgb(166,166,46)","rgb(166,166,47)","rgb(166,166,48)","rgb(166,166,49)","rgb(166,166,50)","rgb(167,167,51)","rgb(167,167,52)","rgb(167,167,53)","rgb(167,167,54)","rgb(167,167,55)","rgb(168,168,56)","rgb(168,168,57)","rgb(168,168,58)","rgb(168,168,59)","rgb(169,169,60)","rgb(169,169,61)","rgb(169,169,62)","rgb(169,169,63)","rgb(169,169,64)","rgb(170,170,65)","rgb(170,170,66)","rgb(170,170,67)","rgb(170,170,68)","rgb(170,170,68)","rgb(171,171,69)","rgb(171,171,70)","rgb(171,171,71)","rgb(171,171,72)","rgb(172,172,73)","rgb(172,172,74)","rgb(172,172,75)","rgb(172,172,76)","rgb(172,172,77)","rgb(173,173,78)","rgb(173,173,79)","rgb(173,173,80)","rgb(173,173,81)","rgb(173,173,82)","rgb(174,174,83)","rgb(174,174,84)","rgb(174,174,85)","rgb(174,174,86)","rgb(175,175,87)","rgb(175,175,88)","rgb(175,175,89)","rgb(175,175,90)","rgb(175,175,91)","rgb(176,176,92)","rgb(176,176,93)","rgb(176,176,94)","rgb(176,176,95)","rgb(176,176,95)","rgb(177,177,96)","rgb(177,177,97)","rgb(177,177,98)","rgb(177,177,99)","rgb(178,178,100)","rgb(178,178,101)","rgb(178,178,102)","rgb(178,178,103)","rgb(178,178,104)","rgb(179,179,105)","rgb(179,179,106)","rgb(179,179,107)","rgb(179,179,108)","rgb(179,179,109)","rgb(180,180,110)","rgb(180,180,111)","rgb(180,180,112)","rgb(180,180,113)","rgb(181,181,114)","rgb(181,181,115)","rgb(181,181,116)","rgb(181,181,117)","rgb(181,181,118)","rgb(182,182,119)","rgb(182,182,120)","rgb(182,182,121)","rgb(182,182,121)","rgb(182,182,122)","rgb(183,183,123)","rgb(183,183,124)","rgb(183,183,125)","rgb(183,183,126)","rgb(184,184,127)","rgb(184,184,128)","rgb(184,184,129)","rgb(184,184,130)","rgb(184,184,131)","rgb(185,185,132)","rgb(185,185,133)","rgb(185,185,134)","rgb(185,185,135)","rgb(185,185,136)","rgb(186,186,137)","rgb(186,186,138)","rgb(186,186,139)","rgb(186,186,140)","rgb(186,186,141)","rgb(187,187,142)","rgb(187,187,143)","rgb(187,187,144)","rgb(187,187,145)","rgb(188,188,146)","rgb(188,188,147)","rgb(188,188,148)","rgb(188,188,148)","rgb(188,188,149)","rgb(189,189,150)","rgb(189,189,151)","rgb(189,189,152)","rgb(189,189,153)","rgb(189,189,154)","rgb(190,190,155)","rgb(190,190,156)","rgb(190,190,157)","rgb(190,190,158)","rgb(191,191,159)","rgb(191,191,160)","rgb(191,191,161)","rgb(191,191,162)","rgb(191,191,163)","rgb(192,192,164)","rgb(192,192,165)","rgb(192,192,166)","rgb(192,192,167)","rgb(192,192,168)","rgb(193,193,169)","rgb(193,193,170)","rgb(193,193,171)","rgb(193,193,172)","rgb(194,194,173)","rgb(194,194,174)","rgb(194,194,175)","rgb(194,194,175)","rgb(194,194,176)","rgb(195,195,177)","rgb(195,195,178)","rgb(195,195,179)","rgb(195,195,180)","rgb(195,195,181)","rgb(196,196,182)","rgb(196,196,183)","rgb(196,196,184)","rgb(196,196,185)","rgb(197,197,186)","rgb(197,197,187)","rgb(197,197,188)","rgb(197,197,189)","rgb(197,197,190)","rgb(198,198,191)","rgb(198,198,192)","rgb(198,198,193)","rgb(198,198,194)","rgb(198,198,195)","rgb(199,199,196)","rgb(199,199,197)","rgb(199,199,198)","rgb(199,199,199)","rgb(255,255,255)"]},precipitation:{colors:["rgba(255,255,255,0)","rgb(6,13,255)","rgb(13,26,255)","rgb(20,40,255)","rgb(26,53,255)","rgb(33,67,255)","rgb(40,80,255)","rgb(46,93,255)","rgb(53,107,255)","rgb(60,120,255)","rgb(67,134,255)","rgb(73,147,255)","rgb(80,161,255)","rgb(87,174,255)","rgb(93,187,255)","rgb(100,201,255)","rgb(107,214,255)","rgb(114,228,255)","rgb(120,241,255)","rgb(127,255,255)","rgb(127,255,229)","rgb(129,253,223)","rgb(130,251,216)","rgb(132,249,210)","rgb(133,247,203)","rgb(135,245,197)","rgb(137,243,190)","rgb(138,241,184)","rgb(140,239,177)","rgb(142,237,171)","rgb(143,235,164)","rgb(145,233,158)","rgb(146,231,152)","rgb(148,229,145)","rgb(150,227,139)","rgb(151,225,132)","rgb(153,224,126)","rgb(154,222,119)","rgb(156,220,113)","rgb(158,218,106)","rgb(159,216,100)","rgb(161,214,93)","rgb(163,212,87)","rgb(164,210,81)","rgb(166,208,74)","rgb(167,206,68)","rgb(169,204,61)","rgb(171,202,55)","rgb(172,200,48)","rgb(174,198,42)","rgb(175,196,35)","rgb(177,194,29)","rgb(179,193,22)","rgb(180,191,16)","rgb(182,189,10)","rgb(183,187,3)","rgb(185,185,0)","rgb(187,183,0)","rgb(188,181,0)","rgb(190,179,0)","rgb(192,177,0)","rgb(193,175,0)","rgb(195,173,0)","rgb(196,171,0)","rgb(198,169,0)","rgb(200,167,0)","rgb(201,165,0)","rgb(203,163,0)","rgb(204,162,0)","rgb(206,160,0)","rgb(208,158,0)","rgb(209,156,0)","rgb(211,154,0)","rgb(213,152,0)","rgb(214,150,0)","rgb(216,148,0)","rgb(217,146,0)","rgb(219,144,0)","rgb(221,142,0)","rgb(222,140,0)","rgb(224,138,0)","rgb(225,136,0)","rgb(227,134,0)","rgb(229,132,0)","rgb(230,131,0)","rgb(232,129,0)","rgb(234,127,0)","rgb(235,125,0)","rgb(237,123,0)","rgb(238,121,0)","rgb(240,119,0)","rgb(242,117,0)","rgb(243,115,0)","rgb(245,113,0)","rgb(246,111,0)","rgb(248,109,0)","rgb(250,107,0)","rgb(251,105,0)","rgb(253,103,0)","rgb(255,101,0)"]},humidity:{colors:["rgb(255,255,0)","rgb(228,255,0)","rgb(201,255,0)","rgb(174,255,0)","rgb(147,255,0)","rgb(120,255,0)","rgb(93,255,0)","rgb(67,255,0)","rgb(40,255,0)","rgb(13,255,0)","rgb(0,248,13)","rgb(0,234,40)","rgb(0,221,67)","rgb(0,208,93)","rgb(0,194,120)","rgb(0,181,147)","rgb(0,167,174)","rgb(0,154,201)","rgb(0,140,228)","rgb(0,127,255)"]},airquality:{min:0,max:300,colors:["rgb(140,223,91)","rgb(139,224,92)","rgb(141,225,90)","rgb(144,224,90)","rgb(145,226,90)","rgb(146,226,89)","rgb(149,227,90)","rgb(151,226,88)","rgb(153,227,88)","rgb(153,228,88)","rgb(156,228,88)","rgb(157,228,86)","rgb(158,229,87)","rgb(161,230,86)","rgb(162,229,86)","rgb(164,230,85)","rgb(165,231,85)","rgb(167,231,85)","rgb(168,232,85)","rgb(172,233,84)","rgb(173,233,84)","rgb(175,234,83)","rgb(176,234,84)","rgb(179,235,83)","rgb(179,235,83)","rgb(182,235,83)","rgb(183,236,83)","rgb(186,236,83)","rgb(187,237,83)","rgb(189,238,82)","rgb(191,238,83)","rgb(193,238,82)","rgb(196,240,81)","rgb(197,240,82)","rgb(198,241,82)","rgb(202,240,82)","rgb(203,242,82)","rgb(204,242,82)","rgb(208,243,83)","rgb(209,242,81)","rgb(211,244,82)","rgb(213,245,82)","rgb(215,244,82)","rgb(217,245,81)","rgb(218,246,82)","rgb(221,247,82)","rgb(223,245,82)","rgb(224,247,81)","rgb(226,247,82)","rgb(228,248,82)","rgb(230,249,82)","rgb(232,250,82)","rgb(234,250,83)","rgb(237,251,82)","rgb(238,251,83)","rgb(241,252,83)","rgb(241,252,83)","rgb(245,253,84)","rgb(246,253,84)","rgb(249,254,84)","rgb(251,254,85)","rgb(252,255,84)","rgb(255,254,85)","rgb(255,252,83)","rgb(255,250,82)","rgb(254,249,83)","rgb(253,247,81)","rgb(254,244,81)","rgb(253,243,80)","rgb(252,241,80)","rgb(253,239,80)","rgb(253,236,78)","rgb(252,235,78)","rgb(251,234,78)","rgb(252,231,77)","rgb(251,228,76)","rgb(250,227,76)","rgb(251,225,76)","rgb(249,222,75)","rgb(249,221,73)","rgb(250,220,73)","rgb(248,217,73)","rgb(248,216,73)","rgb(248,213,71)","rgb(247,212,71)","rgb(248,209,70)","rgb(247,207,70)","rgb(248,205,69)","rgb(246,203,69)","rgb(247,201,69)","rgb(245,199,68)","rgb(246,197,67)","rgb(245,195,67)","rgb(245,194,66)","rgb(245,191,66)","rgb(245,190,65)","rgb(245,188,64)","rgb(244,187,64)","rgb(243,184,63)","rgb(245,182,63)","rgb(243,181,62)","rgb(243,179,62)","rgb(244,177,62)","rgb(244,174,60)","rgb(243,173,61)","rgb(242,172,60)","rgb(243,169,60)","rgb(242,166,58)","rgb(241,166,59)","rgb(242,164,58)","rgb(241,161,58)","rgb(241,159,56)","rgb(242,158,56)","rgb(240,156,56)","rgb(240,154,56)","rgb(241,153,55)","rgb(240,151,55)","rgb(241,149,53)","rgb(240,147,54)","rgb(240,146,53)","rgb(239,143,52)","rgb(240,141,52)","rgb(238,138,52)","rgb(239,136,51)","rgb(238,135,51)","rgb(238,133,50)","rgb(238,130,50)","rgb(238,128,49)","rgb(239,127,48)","rgb(237,126,49)","rgb(237,124,48)","rgb(238,121,47)","rgb(237,120,47)","rgb(237,119,47)","rgb(238,116,47)","rgb(237,114,45)","rgb(237,113,46)","rgb(236,112,45)","rgb(237,110,45)","rgb(237,107,44)","rgb(236,107,44)","rgb(237,104,44)","rgb(236,102,44)","rgb(236,101,42)","rgb(236,99,43)","rgb(235,97,42)","rgb(235,96,42)","rgb(236,95,42)","rgb(235,94,42)","rgb(236,92,41)","rgb(235,91,41)","rgb(236,89,41)","rgb(235,88,40)","rgb(235,85,41)","rgb(234,84,40)","rgb(235,83,40)","rgb(235,81,40)","rgb(235,81,39)","rgb(235,78,40)","rgb(235,77,39)","rgb(236,76,38)","rgb(234,75,39)","rgb(234,73,38)","rgb(235,71,38)","rgb(234,71,38)","rgb(234,70,38)","rgb(235,68,38)","rgb(235,66,37)","rgb(235,66,37)","rgb(234,65,37)","rgb(235,64,37)","rgb(235,62,36)","rgb(234,62,37)","rgb(235,61,36)","rgb(234,59,37)","rgb(234,58,35)","rgb(234,58,36)","rgb(233,57,36)","rgb(233,57,36)","rgb(234,56,36)","rgb(234,55,36)","rgb(235,55,35)","rgb(233,54,36)","rgb(235,54,35)","rgb(233,54,35)","rgb(234,53,36)","rgb(233,52,36)","rgb(233,51,36)","rgb(231,50,37)","rgb(230,51,36)","rgb(228,50,38)","rgb(227,50,37)","rgb(226,50,37)","rgb(223,51,39)","rgb(221,50,39)","rgb(221,49,40)","rgb(218,50,41)","rgb(217,50,43)","rgb(216,49,44)","rgb(215,48,44)","rgb(213,49,46)","rgb(211,50,47)","rgb(210,49,49)","rgb(208,48,49)","rgb(205,49,51)","rgb(204,49,53)","rgb(203,48,55)","rgb(201,48,56)","rgb(199,49,58)","rgb(197,48,59)","rgb(196,49,62)","rgb(195,49,63)","rgb(192,49,65)","rgb(192,49,67)","rgb(190,50,69)","rgb(189,50,71)","rgb(186,50,73)","rgb(185,50,75)","rgb(183,50,78)","rgb(182,51,79)","rgb(180,51,81)","rgb(178,52,83)","rgb(178,51,86)","rgb(176,52,87)","rgb(174,52,89)","rgb(171,53,92)","rgb(170,54,94)","rgb(170,53,95)","rgb(167,55,97)","rgb(165,55,100)","rgb(166,55,103)","rgb(163,55,104)","rgb(161,56,107)","rgb(159,57,109)","rgb(159,57,111)","rgb(157,57,112)","rgb(155,59,115)","rgb(154,59,117)","rgb(151,59,120)","rgb(150,60,121)","rgb(150,61,124)","rgb(146,61,126)","rgb(144,62,128)","rgb(145,63,130)","rgb(142,64,133)","rgb(142,64,134)","rgb(138,65,137)","rgb(139,66,138)","rgb(136,66,142)","rgb(135,67,144)","rgb(132,67,146)","rgb(133,67,144)","rgb(132,65,143)","rgb(132,66,141)","rgb(132,64,140)","rgb(132,63,137)","rgb(131,62,134)","rgb(130,62,133)","rgb(130,61,132)","rgb(130,59,130)","rgb(129,59,128)","rgb(129,58,127)","rgb(130,57,125)","rgb(129,55,122)","rgb(129,55,122)","rgb(128,55,120)","rgb(129,54,118)","rgb(128,52,115)","rgb(127,52,114)","rgb(128,51,113)","rgb(127,49,111)","rgb(126,49,108)","rgb(127,48,107)","rgb(125,47,106)","rgb(125,47,103)","rgb(125,46,102)","rgb(125,45,101)","rgb(126,44,98)","rgb(124,43,97)","rgb(125,43,95)","rgb(123,42,93)","rgb(124,41,92)","rgb(122,40,90)","rgb(123,39,88)","rgb(123,38,87)","rgb(123,38,84)","rgb(122,37,84)","rgb(122,36,81)","rgb(123,35,79)","rgb(121,36,79)","rgb(120,34,76)","rgb(122,33,74)","rgb(121,33,73)","rgb(119,33,71)","rgb(121,31,70)","rgb(120,30,67)","rgb(120,30,66)","rgb(119,30,65)","rgb(120,29,63)","rgb(119,28,60)","rgb(119,28,59)","rgb(119,27,57)","rgb(118,26,56)","rgb(118,26,54)","rgb(119,26,52)","rgb(116,24,51)","rgb(116,24,49)","rgb(117,24,47)","rgb(116,23,47)","rgb(117,23,44)","rgb(116,22,43)","rgb(117,22,41)","rgb(114,21,39)","rgb(115,20,38)","rgb(114,20,38)","rgb(115,20,38)","rgb(115,20,38)","rgb(115,21,37)","rgb(115,20,38)","rgb(115,20,37)","rgb(116,20,37)","rgb(114,21,38)","rgb(114,20,37)","rgb(116,20,37)","rgb(115,21,37)","rgb(114,21,38)","rgb(116,20,38)","rgb(115,19,37)","rgb(115,20,38)","rgb(115,21,38)","rgb(116,20,38)","rgb(115,20,37)","rgb(115,20,38)","rgb(116,20,37)","rgb(115,19,38)","rgb(115,20,37)","rgb(116,20,37)","rgb(114,20,37)","rgb(114,20,38)","rgb(115,20,37)","rgb(115,20,38)","rgb(116,20,37)","rgb(115,20,38)","rgb(116,20,37)","rgb(114,20,37)","rgb(115,20,38)","rgb(114,20,38)","rgb(115,20,38)","rgb(115,20,38)","rgb(115,21,37)","rgb(115,20,38)","rgb(115,20,37)","rgb(116,20,37)","rgb(114,21,38)","rgb(114,20,37)","rgb(116,20,37)","rgb(115,21,37)","rgb(114,21,38)","rgb(116,20,38)","rgb(115,19,37)","rgb(115,20,38)","rgb(115,21,38)","rgb(116,20,38)","rgb(115,20,37)","rgb(115,20,38)","rgb(116,20,37)","rgb(115,19,38)","rgb(115,20,37)","rgb(116,20,37)","rgb(114,20,37)","rgb(114,20,38)","rgb(115,20,37)","rgb(115,20,38)"]},temperature:{min:-90,max:45,colors:["rgb(0,0,250)","rgb(0,2,250)","rgb(0,5,250)","rgb(0,8,250)","rgb(0,11,250)","rgb(0,14,250)","rgb(0,16,250)","rgb(0,19,250)","rgb(0,22,250)","rgb(0,25,250)","rgb(0,28,250)","rgb(0,30,250)","rgb(0,33,250)","rgb(0,36,250)","rgb(0,39,250)","rgb(0,42,250)","rgb(0,44,250)","rgb(0,47,250)","rgb(0,50,250)","rgb(0,53,250)","rgb(0,56,250)","rgb(0,58,250)","rgb(0,61,250)","rgb(0,64,250)","rgb(0,67,250)","rgb(0,70,250)","rgb(0,73,250)","rgb(0,75,250)","rgb(0,78,250)","rgb(0,81,250)","rgb(0,84,250)","rgb(0,87,250)","rgb(0,89,250)","rgb(0,92,250)","rgb(0,95,250)","rgb(0,98,250)","rgb(0,101,250)","rgb(0,103,250)","rgb(0,106,250)","rgb(0,109,250)","rgb(0,112,250)","rgb(0,115,250)","rgb(0,117,250)","rgb(0,120,250)","rgb(0,123,250)","rgb(0,126,250)","rgb(0,129,250)","rgb(0,132,250)","rgb(0,134,250)","rgb(0,137,250)","rgb(0,140,250)","rgb(0,143,250)","rgb(0,146,250)","rgb(0,148,250)","rgb(0,151,250)","rgb(0,154,250)","rgb(0,157,250)","rgb(0,160,250)","rgb(0,162,250)","rgb(0,165,250)","rgb(0,168,250)","rgb(0,171,250)","rgb(0,174,250)","rgb(0,176,250)","rgb(0,179,250)","rgb(0,182,250)","rgb(0,185,250)","rgb(0,188,250)","rgb(0,191,250)","rgb(0,193,250)","rgb(0,196,250)","rgb(0,199,250)","rgb(0,202,250)","rgb(0,205,250)","rgb(0,207,250)","rgb(0,210,250)","rgb(0,213,250)","rgb(0,216,250)","rgb(0,219,250)","rgb(0,221,250)","rgb(0,224,250)","rgb(0,227,250)","rgb(0,230,250)","rgb(0,233,250)","rgb(0,235,250)","rgb(0,238,250)","rgb(0,241,250)","rgb(0,244,250)","rgb(0,247,250)","rgb(0,255,255)","rgb(0,255,203)","rgb(0,255,152)","rgb(0,255,101)","rgb(0,255,50)","rgb(0,255,0)","rgb(22,255,0)","rgb(45,255,0)","rgb(68,255,0)","rgb(91,255,0)","rgb(113,255,0)","rgb(136,255,0)","rgb(159,255,0)","rgb(182,255,0)","rgb(205,255,0)","rgb(255,255,0)","rgb(255,247,0)","rgb(255,240,0)","rgb(255,232,0)","rgb(255,225,0)","rgb(255,217,0)","rgb(255,210,0)","rgb(255,202,0)","rgb(255,195,0)","rgb(255,187,0)","rgb(255,180,0)","rgb(255,172,0)","rgb(255,165,0)","rgb(255,157,0)","rgb(255,150,0)","rgb(255,142,0)","rgb(255,135,0)","rgb(255,127,0)","rgb(255,120,0)","rgb(255,112,0)","rgb(255,105,0)","rgb(255,97,0)","rgb(255,90,0)","rgb(255,82,0)","rgb(255,75,0)","rgb(255,67,0)","rgb(255,60,0)","rgb(255,52,0)","rgb(255,45,0)","rgb(255,37,0)","rgb(255,30,0)"]},wind_comps:{colors:["rgb(0,0,179)","rgb(10,24,187)","rgb(20,48,194)","rgb(31,73,202)","rgb(41,97,210)","rgb(52,122,218)","rgb(62,146,226)","rgb(73,170,234)","rgb(83,195,242)","rgb(94,219,249)","rgb(64,207,243)","rgb(64,212,222)","rgb(64,218,201)","rgb(64,223,180)","rgb(64,228,159)","rgb(64,233,138)","rgb(64,238,117)","rgb(64,243,96)","rgb(64,248,75)","rgb(64,254,54)"]},windspeed:{colors:["rgb(0,0,250)","rgb(0,12,250)","rgb(0,25,250)","rgb(0,37,250)","rgb(0,50,250)","rgb(0,62,250)","rgb(0,75,250)","rgb(0,87,250)","rgb(0,100,250)","rgb(0,112,250)","rgb(0,125,250)","rgb(0,137,250)","rgb(0,150,250)","rgb(0,162,250)","rgb(0,175,250)","rgb(0,187,250)","rgb(0,200,250)","rgb(0,212,250)","rgb(0,225,250)","rgb(0,237,250)","rgb(0,255,255)","rgb(0,255,234)","rgb(0,255,214)","rgb(0,255,193)","rgb(0,255,173)","rgb(0,255,152)","rgb(0,255,132)","rgb(0,255,111)","rgb(0,255,91)","rgb(0,255,70)","rgb(0,255,0)","rgb(20,255,0)","rgb(41,255,0)","rgb(61,255,0)","rgb(82,255,0)","rgb(102,255,0)","rgb(123,255,0)","rgb(143,255,0)","rgb(164,255,0)","rgb(184,255,0)","rgb(255,255,0)","rgb(255,247,0)","rgb(255,240,0)","rgb(255,232,0)","rgb(255,225,0)","rgb(255,217,0)","rgb(255,210,0)","rgb(255,202,0)","rgb(255,195,0)","rgb(255,187,0)","rgb(255,180,0)","rgb(255,172,0)","rgb(255,165,0)","rgb(255,157,0)","rgb(255,150,0)","rgb(255,142,0)","rgb(255,135,0)","rgb(255,127,0)","rgb(255,120,0)","rgb(255,112,0)","rgb(255,105,0)","rgb(255,97,0)","rgb(255,90,0)","rgb(255,82,0)","rgb(255,75,0)","rgb(255,67,0)","rgb(255,60,0)","rgb(255,52,0)","rgb(255,45,0)","rgb(255,37,0)"]},dbz:{colors:["rgb(1,57,255)","rgb(0,140,255)","rgb(1,209,255)","rgb(1,255,232)","rgb(1,255,171)","rgb(1,255,79)","rgb(43,255,0)","rgb(166,255,2)","rgb(227,255,1)","rgb(255,198,0)","rgb(255,168,1)","rgb(255,145,1)","rgb(255,130,1)","rgb(255,107,0)","rgb(255,84,0)","rgb(255,7,0)"]},dbz_nws:{colors:["rgb(0,0,0)","rgb(0,255,255)","rgb(135,206,235)","rgb(0,0,255)","rgb(0,255,0)","rgb(50,205,50)","rgb(34,139,34)","rgb(238,238,0)","rgb(238,220,130)","rgb(238,118,33)","rgb(255,48,48)","rgb(176,48,96)","rgb(176,48,96)","rgb(186,85,211)","rgb(255,0,255)","rgb(255,255,255)"]},categorical:{label:"Fixed"},black:{colors:["#000"]},white:{colors:["#fff"]},red:{colors:["red"]},green:{colors:["green"]},blue:{colors:["blue"]}}},GuiUtils={getProxyUrl:function(t){return ramaddaBaseUrl+"/proxy?trim=true&url="+encodeURIComponent(t)},showingError:!1,pageUnloading:!1,handleError:function(t,r,e){this.pageUnloading||(console.log(t),console.trace(),r&&console.log(r),this.showingError||(e&&(this.showingError=!0,this.showingError=!1),Utils.closeFormLoadingDialog()))},isJsonError:function(t){if(null==t)return this.handleError("Null JSON data",null,!1),!0;if(null!=t.error){var r=t.errorcode;return null==r&&(r="error"),this.handleError("Error in Utils.isJsonError:"+t.error,null,!1),!0}return!1},loadXML:function(t,r,e){var a=!1;if(window.XMLHttpRequest)try{a=new XMLHttpRequest}catch(t){a=!1}else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){a=!1}}a&&(a.onreadystatechange=function(){4==a.readyState&&200==a.status&&r(a,e)},a.open("GET",t,!0),a.send(""))},loadHtml:async function(t,r){await $.get(t,(function(t){r(t)})).done((function(){})).fail((function(){console.log("Failed to load url: "+t)}))},loadUrl:function(t,r,e){var a=!1;if(window.XMLHttpRequest)try{a=new XMLHttpRequest}catch(t){a=!1}else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){a=!1}}a&&(a.onreadystatechange=function(){4==a.readyState&&200==a.status&&r(a,e)},a.open("GET",t,!0),a.send(""))},getUrlArg:function(t,r){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e||""==e?r:e[1]},setCursor:function(t){var r=document.cursor;!r&&document.getElementById&&(r=document.getElementById("cursor")),r||(document.body.style.cursor=t)},getDomObject:function(t){let r=new DomObject(t);return r.obj?r:null},getEvent:function(t){return t||window.event},getEventX:function(t){return t.pageX?t.pageX:t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft},getEventY:function(t){return t.pageY?t.pageY:t.clientY+document.body.scrollTop+document.documentElement.scrollTop},getTop:function(t){return t?t.offsetTop+this.getTop(t.offsetParent):0},getBottom:function(t){return t?this.getTop(t)+t.offsetHeight:0},setPosition:function(t,r,e){t.style.top=e,t.style.left=r},getLeft:function(t){return t?t.offsetLeft+this.getLeft(t.offsetParent):0},getRight:function(t){return t?t.offsetRight+this.getRight(t.offsetParent):0},getStyle:function(t){return t.style?t.style:document.layers?document.layers[t.name]:null},size_format:function(t){return t=t>=1073741824?number_format(t/1073741824,2)+" GB":t>=1048576?number_format(t/1048576,2)+" MB":t>=1024?number_format(t/1024,0)+" KB":number_format(t,0)+" bytes"},inputLengthOk:function(t,r,e){var a=$("#"+t).val();if(null==a)return!0;if(e){if(a.length<r)return Utils.closeFormLoadingDialog(),!1}else if(a.length>r)return Utils.closeFormLoadingDialog(),!1;return!0},inputValueOk:function(t,r,e){var a=$("#"+t).val();return null==a||(e&&a<r?(Utils.closeFormLoadingDialog(),!1):!(!e&&a>r)||(Utils.closeFormLoadingDialog(),!1))},inputIsRequired:function(t,r,e){var a=$("#"+t).val();return null!=a&&0!=a.trim().length||(Utils.closeFormLoadingDialog(),!1)}},ID="id",BACKGROUND="background",CLASS="class",DIV="div",POSITION="position",WIDTH="width",ALIGN="align",VALIGN="valign",HEIGHT="height",SRC="src",STYLE="style",TABLE="table",TITLE="title",THEAD="thead",TBODY="tbody",TFOOT="tfoot",TR="tr",TD="td",BR="br",PRE="pre",TAG_A="a",TAG_B="b",TAG_DIV="div",SELECT="select",OPTION="option",VALUE="value",TAG_IMG="img",TAG_INPUT="input",TAG_LI="li",TAG_SELECT="select",TAG_OPTION="option",TAG_TABLE="table",TAG_TR="tr",TAG_TD="td",TAG_UL="ul",TAG_OL="ol",ATTR_WIDTH="width",ATTR_HREF="href",ATTR_BORDER="border",ATTR_VALUE="value",ATTR_TITLE="title",ATTR_ALT="alt",ATTR_ID="id",ATTR_CLASS="class",ATTR_SIZE="size",ATTR_STYLE="style",ATTR_ALIGN="align",ATTR_VALIGN="valign",SPACE="&nbsp;",SPACE1="&nbsp;",SPACE2="&nbsp;&nbsp;",SPACE3="&nbsp;&nbsp;&nbsp;",SPACE4="&nbsp;&nbsp;&nbsp;&nbsp;",HU=HtmlUtils=window.HtmlUtils=window.HtmlUtil={me:"HtmlUtils",loaded:{},getTitleBr:function(){return"&#10;"},insertIntoTextarea:function(t,r){"string"==typeof t&&(t=document.getElementById(t)),r=Utils.decodeText(r);var e=t.scrollTop;if(document.selection)t.focus(),sel=document.selection.createRange(),sel.text=r;else if(t.selectionStart||"0"==t.selectionStart){var a=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,a)+r+t.value.substring(n,t.value.length);let e=a+r.length;t.selectionEnd=e}else t.value+=r;t.scrollTop=e},initLoadingImage:function(t){setTimeout((()=>{$(t).removeClass("ramadda-image-loading")}),2e3)},initRadioToggle(t,r){$(t).find("input[type=radio]").change((function(){for(a in r)a==$(this).attr("value")?$(r[a]).show():$(r[a]).hide()}))},initToggleAll:function(t,r){jqid(t).change((function(){let t=$(this).is(":checked");$(r).prop("checked",t),$(r).trigger("change")}))},getEmojis:function(t){this.emojis?t(this.emojis):$.getJSON(ramaddaBaseUrl+"/emojis/emojis.json",(r=>{let e,a=[],n={};this.emojis=[],r.forEach((t=>{let r=t.category??e;r&&(e=r);let i=n[r];i||(i={name:r,images:[]},n[r]=i,a.push(i));let g=t.image;g.startsWith("/")||(g="/emojis/"+g),i.images.push({name:t.name,image:ramaddaBaseUrl+g})})),this.emojis=a,t(this.emojis)})).fail((t=>{console.log("Failed to load json:")}))},loadJqueryLib:function(t,r,e,a,n){let i=!1;HtmlUtils.loaded[t]||(r.forEach((t=>{$("<link rel='stylesheet' href='"+t+"' crossorigin='anonymous'>").appendTo("head")})),e.forEach((t=>{$("<script src='"+t+"'  type=text/JavaScript><\/script>").appendTo("head")})),HtmlUtils.loaded[t]=!0),$(a)[t]?n():setTimeout((()=>{HtmlUtils.loadJqueryLib(t,r,e,a,n)}),50)},createFancyBox:function(t,r){r=r||{},HtmlUtils.loadJqueryLib("fancybox",[ramaddaCdn+"/lib/fancybox-3/jquery.fancybox.min.css"],[ramaddaCdn+"/lib/fancybox-3/jquery.fancybox.min.js"],t,(()=>{$(t).fancybox(r)}))},checkToHidePopup:function(){if(this.popupTime){var t=new Date;return timeDiff=t-this.popupTime,timeDiff>1e3}return!0},jqid:function(t){return $("#"+t)},initInteractiveInput:function(t,r){HU.jqid(t).keyup((function(t){HtmlUtils.hidePopupObject();let e=$(this).val();if(!Utils.stringDefined(e))return;let a=$(this);$.getJSON(r+"?text="+e,(t=>{if(0==t.length)return;let r="";t.forEach((t=>{r+=HU.div([CLASS,"ramadda-clickable ramadda-suggest","suggest",t],t)}));let e=HU.div([CLASS,"ramadda-search-popup",STYLE,HU.css("max-width","200px","padding","4px")],r);HU.makeDialog({content:e,my:"left top",at:"left bottom",anchor:a}).find(".ramadda-suggest").click((function(){HtmlUtils.hidePopupObject(),a.val($(this).attr("suggest"))}))})).fail((t=>{console.log("suggest call failed:"+r+"\n"+t),console.dir(t)}))}))},getTooltip:function(){return $("#ramadda-popupdiv")},getPopupObject:function(){return this.popupObject},hasPopupObject:function(){return null!=this.popupObject},clearPopupObject:function(){this.popupObject=null},isPopupObject:function(t){return!(!this.popupObject||!t)&&this.popupObject.attr("id")==t.attr("id")},setPopupObject:function(t){return this.isPopupObject(t)||(this.popupObject&&this.hidePopupObject(),this.popupObject=t,this.popupObject.attr("addedMouseListener")||(this.popupObject.attr("addedMouseListener","true"),this.popupObject.mousedown((function(t){t.stopPropagation()})))),t},hidePopupObject:function(t){this.popupObject&&(this.popupObject.hide(),"true"==this.popupObject.attr("removeonclose")&&this.popupObject.remove(),this.popupObject=null),this.popupTime=new Date,t&&t.stopPropagation()},lastCbxClicked:null,lastCbxIdClicked:null,checkboxClicked:function(t,r,e){if(!t)return;let a=GuiUtils.getDomObject(e);if(!a)return;a=a.obj;let n=new Array;if(!a.form)return;let g=a.form.elements;for(i=0;i<g.length;i++)(g[i].name.indexOf(r)>=0||g[i].id.indexOf(r)>=0)&&n.push(g[i]);let l=a.checked;if(t.ctrlKey)for(i=0;i<n.length;i++)n[i].checked=l;if(t.shiftKey){if(HtmlUtils.lastCbxClicked){let t=GuiUtils.getTop(a),r=GuiUtils.getTop(HtmlUtils.lastCbxClicked),g=$("#"+HtmlUtils.lastCbxIdClicked),o=$("#"+e);if(g.position()&&(r=g.offset().top),o.position()&&(t=o.offset().top),t>r){let e=t;t=r,r=e}for(i=0;i<n.length;i++){let e=$("#"+n[i].id).offset().top;e>=t&&e<=r&&(n[i].checked=l)}}}else HtmlUtils.lastCbxClicked=a,HtmlUtils.lastCbxIdClicked=e},tabLoaded:function(t,r){window.ramaddaDisplayCheckLayout&&ramaddaDisplayCheckLayout(),window.ramaddaMapCheckLayout&&ramaddaMapCheckLayout()},elementScrolled:function(t){var r=$(window).scrollTop(),e=r+$(window).height(),a=$(t).offset().top,n=a+$(t).outerHeight(!0);return a<=e&&a>=r||(n<=e&&n>=r||n>=e&&a<=r)},initOdometer:function(t,r,e,a){Utils.isDefined(e)||(e=0),$(document).ready((function(){a?$("#"+t).html(r):setTimeout((function(){HtmlUtils.elementScrolled("#"+t)?setTimeout((function(){$("#"+t).html(r)}),e):$(window).scroll((function(){HtmlUtils.elementScrolled("#"+t)&&setTimeout((function(){$("#"+t).html(r)}),e)}))}),1e3)}))},callWhenScrolled:function(t,r,e){Utils.isDefined(e)||(e=0),$(document).ready((function(){setTimeout((function(){HtmlUtils.elementScrolled("#"+t)?setTimeout(r,e):$(window).scroll((function(){HtmlUtils.elementScrolled("#"+t)&&setTimeout(r,e)}))}),1e3)}))},waitForIt:function(t,r,e,a){window[t]?r():(Utils.isDefined(a)||(a=500),0!==a?setTimeout((()=>{HtmlUtils.waitForIt(t,r,e,a-1)}),50):e&&e())},loadAndWait:function(t,r,e,a){if(!window[t]){$(r).appendTo("head")}HtmlUtils.waitForIt(t,e,a)},makeMessage:function(t,r){return"<div class='ramadda-message ramadda-message-plain ' id='messageblock'><table width='100%'><tbody><tr valign='top'><td width='5%'><div class='ramadda-message-icon'><span><i class='"+t+"' style='font-size:32pt;'></i></span></div></td><td><div class='ramadda-message-inner'><p>"+r+"</p></div></td></tr></tbody></table></div>"},makeErrorMessage:function(t){return HtmlUtils.makeMessage("fas fa-exclamation-triangle text-danger",t)},makeInfoMessage:function(t){return HtmlUtils.makeMessage("fas fa-info",t)},makeRunningMessage:function(t){return HtmlUtils.makeMessage("fas fa-spinner fa-spin",t)},makeSlides:function(t,r,e){if(Utils.isDefined(e)||(e=0),!HtmlUtils.loadSlides()){if(++e>10)return;console.log("MS-1"),setTimeout((()=>{HtmlUtils.makeSlides(t,r)}),1e3)}let a={dots:!0};if(r&&$.extend(a,r),!$("#"+t).slick){if(++e>10)return;setTimeout((()=>{HtmlUtils.makeSlides(t,r)}),500)}$("#"+t).slick(a),HtmlUtils.swapHtml("#"+t+"_headercontents","#"+t+"_header"),setTimeout((()=>{let r=$("#"+t+"_header"),e=r.find(".ramadda-slides-header-item");e.click((function(){let r=+$(this).attr("slideindex");$("#"+t).slick("slickGoTo",r)})),$("#"+t).on("afterChange",(function(t,a,n){e.removeClass("ramadda-slides-header-item-selected"),r.find(HtmlUtils.attrSelect("slideindex",n)).addClass("ramadda-slides-header-item-selected")}))}))},loadSlides:function(){if(!HtmlUtils.slidesLoaded){let t=ramaddaCdn+"/lib/slick/",r=HU.cssLink(t+"slick.css")+"\n"+HU.cssLink(t+"slick-theme.css")+"\n";return $(r).appendTo("head"),r=HU.javascriptLink(t+"slick.min.js"),$(r).appendTo("body"),HtmlUtils.slidesLoaded=!0,!1}return!0},loadKatex:function(t,r){if(!window.katex){$("<link rel='preload' href='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/fonts/KaTeX_Main-Regular.woff2' as='font' type='font/woff2' crossorigin='anonymous'>\n<link rel='preload' href='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/fonts/KaTeX_Math-Italic.woff2' as='font' type='font/woff2' crossorigin='anonymous'>\n<link rel='preload' href='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/fonts/KaTeX_Size2-Regular.woff2' as='font' type='font/woff2' crossorigin='anonymous'>\n<link rel='preload' href='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/fonts/KaTeX_Size4-Regular.woff2' as='font' type='font/woff2' crossorigin='anonymous'/>\n<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Lato:300,400,700,700i'>\n<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css' crossorigin='anonymous'>\n<script defer src='https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js' crossorigin='anonymous'><\/script>").appendTo("head")}HtmlUtils.waitForIt("katex",t,r)},applyMarkdown:function(t,r){let e="<script src='"+ramaddaCdn+"/lib/showdown.min.js'/>";HtmlUtils.loadAndWait("showdown",e,(()=>{let e=$("#"+t).html();try{var a=(new showdown.Converter).makeHtml(e);$("#"+r).html(a)}catch(t){$("#"+r).html("Error processing markdown:"+t)}}),(()=>{$("#"+r).html("Error loading showdown")}))},applyLatex:function(t,r){HtmlUtils.loadKatex((()=>{let e=$("#"+t).html();try{var a=katex.renderToString(e,{throwOnError:!0});$("#"+r).html(a)}catch(t){$("#"+r).html("Error processing markdown:"+t)}}),(()=>{$("#"+r).html("Error loading katex")}))},isFontAwesome:function(t){return t.startsWith("fa-")||t.startsWith("fas ")||t.startsWith("far ")||t.startsWith("fab ")},getIconImage:function(t,r,e){if(HtmlUtils.isFontAwesome(t)){let a;return a=t.startsWith("fa-solid")||t.startsWith("fas ")||t.startsWith("fab ")||t.startsWith("far")?["class",t]:["class","fas "+t],e&&(a=Utils.mergeLists(a,e)),HtmlUtils.span(r,HtmlUtils.tag("i",a))}return HtmlUtils.image(t,r)},getObjectURL:function(t){return(window.URL||window.webkitURL).createObjectURL(t)},getErrorDialog:function(t){return'<div class="ramadda-message"><table><tr valign=top><td><div class="ramadda-message-link"><img border="0"  src="/repository/icons/error.png"  /></div></td><td><div class="ramadda-message-inner">'+t+"</div></td></tr></table></div>"},getWikiEditor:function(t){return this.wikiEditors?this.wikiEditors[t]:null},handleWikiEditorSubmit:function(){if(this.wikiEditors)for(a in this.wikiEditors){this.wikiEditors[a].handleSubmit()}},addWikiEditor:function(t,r){this.wikiEditors||(this.wikiEditors={}),r=r||t.getId(),this.wikiEditors[r]=t},makeBreadcrumbsInit:function(t){if(Utils.getPageLoaded())HtmlUtils.makeBreadcrumbs(t);else{let r=t;Utils.addLoadFunction((()=>{HtmlUtils.makeBreadcrumbs(r)}))}},makeBreadcrumbs:function(t){let r=jQuery("#"+t),e=4;r.find("li").length>5&&(e=0),r.jBreadCrumb({previewWidth:0,easing:"easeOutQuad",beginingElementsToLeaveOpen:0,endElementsToLeaveOpen:e})},tooltipInit:function(t,r){$("#"+r).dialog({autoOpen:!1,minWidth:650,hide:{effect:"blind",duration:250}}),$("#"+t).click((function(){$("#"+r).dialog("open")}))},join:function(t,r){t.forEach||(t=[t]);let e="";return t.forEach(((t,a)=>{a>0&null!=r&&(e+=r),e+=t})),e},qt:function(t){return'"'+t+'"'},sqt:function(t){return"'"+t+"'"},getUniqueId:function(t){return window.uniqueCnt||(window.uniqueCnt=(new Date).getTime()),(t||"id_")+window.uniqueCnt++},inset:function(t,r,e,a,n){var i="";return r&&(i+="padding-top: "+r+"px; "),e&&(i+="padding-left: "+e+"px; "),a&&(i+="padding-bottom: "+a+"px; "),n&&(i+="padding-right: "+n+"px; "),HtmlUtils.div(["style",i],t)},makeAccordion:function(t,r){null==r&&(r={});var e={header:"iconClosed",activeHeader:"iconOpen"};$((function(){$(t+" .ramadda-accordion-contents").css("display","block");var a={animate:200,icons:e,collapsible:!0,heightStyle:"content",active:0,decorate:!0,activate:function(){window.ramaddaDisplayCheckLayout&&ramaddaDisplayCheckLayout()}};($.extend(a,r),a.decorate)||$(t+" .ui-accordion-header").css("padding","0em 0em 0em 0em");a.active<0&&(a.active="none");let n=$(t).accordion(a),i=function(t,r){r.stopPropagation();let e=t.closest(".ui-accordion-header");e.find(":checkbox").is(":checked")?e.css("background","#fffeec"):e.css("background","transparent")},g=function(t){i($(this),t)};n.find(".accordion-toolbar").find(":checkbox").click(g),n.find(".accordion-toolbar").find("label").click(g),n.find(".accordion-toolbar").find(":checkbox").change((function(t){i($(this),t)}))}))},buttons:function(t){let r=Utils.wrap(t,"<div style='display:inline-block;margin-right:4px;'>","</div>");return HU.div(["class","ramadda-button-bar"],r)},hbox:function(t){let r=HtmlUtils.openTag("tr",["valign","top"]);return r+=Utils.wrap(t,"<td align-left>","<td>"),r+="</tr>",this.tag("table",["border","0","cellspacing","0","cellpadding","0"],r)},vbox:function(t){let r=HtmlUtils.join(t,"<br>");return this.div([STYLE,HU.css("display","inline-block")],r)},leftRight:function(t,r,e,a){return null==e&&(e="6"),null==a&&(a="6"),this.div(["class","row"],this.div(["class","col-md-"+e],t)+this.div(["class","col-md-"+a,"style","text-align:right;"],r))},leftCenterRight:function(t,r,e,a,n,i,g,l){return g||(g={}),g.valign||(g.valign="top"),l||(l=""),this.tag("table",["border",0,"width","100%","cellspacing","0","cellpadding","0"],this.tr(["valign",g.valign],this.td(["align","left","width",a,STYLE,l],t)+this.td(["align","center","width",n,STYLE,l],r)+this.td(["align","right","width",i,STYLE,l],e)))},row:function(){let t="<table cellpadding=0 cellspacing=0 border=0 width=100%><tr valign=center>";return Array.from(arguments).forEach((r=>{Array.isArray(r)?t+=HtmlUtils.tag("td",r[0],r[1]):t+=HtmlUtils.tag("td",[],r)})),t+="</tr></table>",t},hrow:function(){let t="";return Array.from(arguments).forEach((r=>{t+=HtmlUtils.div(["style","display:inline-block"],r)})),t},leftRightTable:function(t,r,e,a,n){n||(n={}),n.valign||(n.valign="top");var i=["align","left"],g=["align","right"];return e&&(i.push("width"),i.push(e)),a&&(g.push("width"),g.push(a)),this.tag("table",["border","0","width","100%","cellspacing","0","cellpadding","0"],this.tr(["valign",n.valign],this.td(i,t)+this.td(g,r)))},heading:function(t){return this.tag("h3",[],t)},bootstrapClasses:["col-md-12","col-md-6","col-md-4","col-md-4","col-md-4","col-md-2"],getBootstrapClass:function(t){return t-=1,(t=Math.max(t,0))<this.bootstrapClasses.length?this.bootstrapClasses[t]:"col-md-1"},initWikiEditor(t,r,e,a){var n=e+"_block",i=r+"_block";$("#"+a).click((()=>{var t=HtmlUtils.getWikiEditor(r);if($("#"+a).is(":checked")){$("#"+n).css("display","none"),$("#"+i).css("display","block");var g=$("#"+e).val();t.getEditor().setValue(g,8),$("#"+r).focus()}else{g=t.getEditor().getValue();$("#"+e).val(g),$("#"+n).css("display","block"),$("#"+i).css("display","none"),$("#"+e).focus()}}))},toggleDialogs:{},makeDialog:function(args){HtmlUtils.hidePopupObject();let opts={modal:!1,modalContentsCss:"",sticky:!1,content:null,contentId:null,anchor:null,draggable:!1,decorate:!0,header:!1,remove:!0,my:"left top",at:"left bottom",animate:!1,animateSpeed:300,title:"",inPlace:!0,fit:!0},parentId,html;if(args&&(""==args.at&&delete args.at,""==args.my&&delete args.my,$.extend(opts,args)),opts.toggleid&&this.toggleDialogs[opts.toggleid]){let t=this.toggleDialogs[opts.toggleid];if(t.is(":visible"))return t.hide(),void(this.toggleDialogs[opts.toggleid]=null)}opts.anchor&&"string"==typeof opts.anchor&&(opts.anchor=$("#"+opts.anchor)),opts.anchor&&0==opts.anchor.length&&(console.log("Utils.makeDialog: Invalid anchor"),opts.anchor=null),opts.content&&(opts.inPlace=!1),opts.inPlace?(opts.remove=!1,parentId=HtmlUtils.getUniqueId(),html=HU.div([ID,parentId,STYLE,HU.css()],HU.SPACE)):(html=opts.content,null==html&&(html=opts.contentId?$("#"+opts.contentId).html():"No html provided"));let id=HtmlUtils.getUniqueId();if(opts.header&&(html=HU.div([CLASS,"ramadda-popup-inner"],html)),opts.header){let t=HU.div([TITLE,"Close",CLASS,"ramadda-popup-close"],HU.jsLink("",HtmlUtils.getIconImage(icon_close),[ID,id+"_close",STYLE,HU.css("cursor","pointer")])),r=HU.div([CLASS,"ramadda-popup-title"],opts.title),e=t+r,a=HtmlUtils.div([STYLE,HU.css("text-align","left"),CLASS,"ramadda-popup-header"],e);html=a+html}(opts.decorate||opts.header)&&(html=HU.div([CLASS,"ramadda-popup"],html));let innerId=HU.getUniqueId("model_inner");opts.modal&&(html=HU.div([ID,innerId,STYLE,opts.modalContentsCss,CLASS,"ramadda-modal-contents"],html),html=HU.div([CLASS,"ramadda-modal"],html));let popup=$(html).appendTo("body");if(opts.remove&&popup.attr("removeonclose","true"),opts.inPlace){let t=$("#"+opts.contentId),r=$("#"+parentId);r.css("display","block").css("width","fit-content").css("height","fit-content"),t.appendTo(r),t.show()}if(opts.anchor&&(opts.width&&popup.css("width",opts.width),popup.position({of:opts.anchor,my:opts.my,at:opts.at,collision:opts.fit?"fit fit":null})),opts.animate&&"false"!==opts.animate)if(opts.animateSpeed=+opts.animateSpeed,popup.hide(),opts.slideLeft){let t="right bottom";popup.position({of:opts.anchor,my:opts.my,at:t,collision:opts.fit?"fit fit":null}),popup.show("slide",{direction:"right"},+opts.animateSpeed)}else popup.show(opts.animateSpeed);else popup.show();return opts.draggable?opts.modal?$("#"+innerId).draggable():popup.draggable():opts.sticky||opts.toggleid||HtmlUtils.setPopupObject(popup),opts.header&&$("#"+id+"_close").click((function(){popup.hide(),opts.callback&&opts.callback(popup),opts.remove&&popup.remove()})),opts.initCall&&("string"==typeof opts.initCall?eval(opts.initCall):opts.initCall()),opts.toggleid&&(this.toggleDialogs[opts.toggleid]=popup),popup},addToDocumentUrl:function(t,r,e){if(Utils.isPost())return;let a=String(window.location);e?(a.includes("?")||(a+="?"),a+="&"+HtmlUtils.urlArg(t,r)):(a=new URL(a),null===r?a.searchParams.delete(t):a.searchParams.set(t,r));try{window.history.replaceState&&window.history.replaceState("","",a)}catch(t){console.log("err:"+t),console.trace()}return a},initSearchPopup:function(t,r){let e=HU.input("","",["id",t+"_input",CLASS,"input","placeholder","Search","style",HU.css("width","200px")]);e=HU.center(e);let a=e+HU.div([CLASS,"ramadda-select-search-results","id",t+"_results"]);$("#"+t).html(a);let n=$("#"+t+"_results");$("#"+t+"_input").keyup((function(t){let e=$(this).val();if(""==e)return n.hide(),void n.html("");if(13==(t.keyCode?t.keyCode:t.which)){let t=ramaddaBaseUrl+"/search/do?text="+encodeURIComponent(e)+"&output=json";n.html(HU.getIconImage(icon_wait)+" Searching..."),n.show();var a={entryListChanged:function(t){let e=t.getEntries();if(0==e.length)return n.show(),void n.html("Nothing found");let a="";e.forEach(((t,r)=>{a+=HU.div(["index",r,"class","ramadda-clickable"],t.getIconImage()+" "+t.getName())})),n.html(a),n.find(".ramadda-clickable").click((function(){let t=e[$(this).attr("index")];selectClick(r,t.getId(),t.getName(),{entryName:t.getName(),icon:t.getIconUrl(),entryType:t.getType().id})})),n.show(400)},handleSearchError:function(t,r){n.html("An error occurred:"+r)}};new EntryList(getGlobalRamadda(),t,a,!1).doSearch()}}))},removeFromDocumentUrl:function(t){try{var r=String(window.location);r=r.replace("&?"+t+"=[^&]+&?",""),window.history.replaceState&&window.history.replaceState("","",r)}catch(t){console.log("err:"+t)}},getUrlArgument:function(t){return new URLSearchParams(window.location.search).get(t)},pre:function(t,r){return this.tag("pre",t,r)},div:function(t,r){return this.tag("div",t,r)},center:function(t,r){return this.tag("center",r,t)},span:function(t,r){return this.tag("span",t,r)},movie:function(t,r){let e="";return r&&(e=HU.attrs(r)),"<video src='"+t+"' "+e+" controls='controls'></video>"},image:function(t,r){return"<img "+this.attrs(["src",t,"border","0"])+" "+this.attrs(r)+"/>"},swapHtml:function(t,r){$(document).ready((function(){let e=$(t),a=$(r);e.appendTo(a)}))},table:function(t,r){return HU.tag("table",t,r)},tr:function(t,r){return this.tag("tr",t,r)},css:function(...t){1==t.length&&Array.isArray(t[0])&&(t=t[0]);let r="";for(let e=0;e<t.length;e+=2)r+=t[e]+":"+t[e+1]+";";return r},h2:function(t){return HU.tag("h2",[],t)},h3:function(t){return HU.tag("h3",[],t)},cssTag:function(t){return'<style type="text/css">\n'+t+"</style>"},cssLink:function(t){return"<link href='"+t+"'  rel='stylesheet'  type='text/css' />"},javascriptLink:function(t){return"<script type='text/javascript' src='"+t+"'><\/script>"},BR_ENTITY:"&#10;",makeMultiline:function(t){return Utils.join(t,HtmlUtils.BR_ENTITY)},getDimension:t=>t?((t=String(t).trim()).match("calc")&&(t=(t=t.replace(/calc *\(/,"calc(").replace(/-/," - ").replace(/\+/," + ")).replace(/([0-9]) *\)/,"$1px)")),t.endsWith(")")||t.endsWith("%")||t.endsWith("px")||t.endsWith("vh")?t:t+"px"):null,td:function(t,r){return this.tag("td",t,r)},tds:function(t,r){if(!r)return"";Array.isArray(r)||(r=[r]);for(var e="",a=0;a<r.length;a++)e+=this.td(t,r[a]);return e},ths:function(t,r){for(var e="",a=0;a<r.length;a++)e+=this.th(t,r[a]);return e},onReturnEvent:function(t,r){"string"==typeof t&&(t=$(t)),t.keyup((function(t){13==(t.keyCode?t.keyCode:t.which)&&r($(this),t)}))},formatTable:function(t,r,e){HtmlUtils.loadJqueryLib("DataTable",[ramaddaCdn+"/lib/datatables/src/jquery.dataTables.min.css"],[ramaddaCdn+"/lib/datatables/src/jquery.dataTables.min.js"],t,(()=>{$(t).each((function(){$.fn.dataTable.isDataTable(this)||(HtmlUtils.formatTableInner($(this),r),e&&e($(this)))}))}))},formatTableInner:function(t,r){let e={paging:!1,ordering:!1,info:!1,searching:!1,scrollCollapse:!0,retrieve:!0,fixedHeader:!1};r&&$.extend(e,r);let a=e.height||t.attr("table-height");a&&(e.scrollY=a);let n=t.attr("table-ordering");n&&(e.ordering="true"==n);let i=t.attr("table-searching");i&&(e.searching="true"==i);let g=t.attr("table-paging");if(g&&(e.paging="true"==g),Utils.isDefined(e.scrollY)){(""+e.scrollY).endsWith("px")||(e.scrollY+="px")}t.DataTable(e)},th:function(t,r){return this.tag("th",t,r)},attrSelect:function(t,r){return"["+t+'="'+r+'"]'},scrollToAnchor:function(t,r){Utils.isDefined(r)||(r=-50);var e=$("a[name='"+t+"']");r||(r=0),r=+r,Utils.scrollToAnchorTime=new Date,$("html,body").animate({scrollTop:e.offset().top+r},"slow"),location.hash=t},scrollVisible:function(t,r,e){if(0==r.length||0==t.length)return;let a=r.offset().top-t.offset().top;Utils.isDefined(e)||(e=1e3),t.animate({scrollTop:a+t.scrollTop()},e)},initNavPopup:function(t,r){let e={align:"left"};r&&$.extend(e,r),$("#"+t).click((function(){let r,a,n=HtmlUtils.setPopupObject($("#"+t+"-popup"));"right"==e.align?(r="right top",a="right top"):(r="left top",a="right+5 top"),n.show(),n.position({of:n.parent(),my:r,at:a,collision:"fit fit"})}))},navLinkClicked:function(t,r){$(".ramadda-nav-left-link").removeClass("ramadda-nav-link-active"),$("#"+t+"_href").parent().addClass("ramadda-nav-link-active"),HtmlUtils.scrollToAnchor(t,r)},initNavLinks:function(t){let r={leftOpen:!0,showToggle:!0,leftWidth:"250px"};t&&$.extend(r,t);let e=$(".ramadda-nav-left"),a=$(".ramadda-nav-right");if(r.showToggle){let t=HU.div(["toggle-state",r.leftOpen?"open":"closed",TITLE,"Toggle left",ID,"ramadda-nav-left-toggle",CLASS,"ramadda-nav-left-toggle"],HtmlUtils.getIconImage("fa-bars"));$(t).appendTo(a),$("#ramadda-nav-left-toggle").click((function(){let t="closed"===$(this).attr("toggle-state");t?(e.show(),a.animate({"margin-left":r.leftWidth})):(e.hide(),a.animate({"margin-left":"0px"})),$(this).attr("toggle-state",t?"open":"closed")}))}let n=$(".ramadda-nav-left-links");n.mouseenter((function(){Utils.linksMouseIn=!0})),n.mouseleave((function(){Utils.linksMouseIn=!1}));let i=$(".ramadda-nav-anchor"),g=$(".ramadda-nav-left-link"),l=null;$(window).scroll((function(){if(Utils.linksMouseIn)return;let t=!1;if(Utils.scrollToAnchorTime){t=(new Date).getTime()-Utils.scrollToAnchorTime.getTime()<2e3}let r=$(window).scrollTop(),e=r+$(window).height(),a=null,n=null;if(i.each((function(){let t=$(this).offset().top,i=t+$(this).outerHeight(!0);(t<=e&&t>=r||i<=e&&i>=r||i>=e&&t<=r)&&(null==n||t<n)&&(n=t,a=$(this))})),!a)return;if(l&&l.attr("name")==a.attr("name"))return;l=a,g.removeClass("ramadda-nav-link-active");let o=null;g.each((function(){$(this).attr("navlink")==a.attr("name")&&($(this).addClass("ramadda-nav-link-active"),o=$(this))})),!t&&o&&HtmlUtils.scrollVisible(o.parent(),o,100)}))},setFormValue:function(t,r){$("#"+t).val(r)},setHtml:function(t,r){$("#"+t).html(r)},formTable:function(){return this.openTag("table",["class","formtable","cellspacing","0","cellspacing","0"])},formTableClose:function(){return this.closeTag("table")},formEntryTop:function(t,r,e){return e?HU.tag("tr",["valign","top"],HU.tag("td",["class","formlabel","align","right"],t)+HU.tag("td",[],r)+HU.tag("td",[],e)):this.tag("tr",["valign","top"],this.tag("td",["class","formlabel","align","right"],t)+this.tag("td",[],r))},formEntry:function(t,r){return this.tag("tr",[],this.tag("td",["class","formlabel","align","right"],t)+this.tag("td",[],r))},appendArg:function(t,r,e){return t.indexOf("?")<0?t+="?":t+="&",t+=HtmlUtils.urlArg(r,e)},getUrl:function(t,r){r.length>0&&(t+="?");for(var e=0;e<r.length;e+=2)e>0&&(t+="&"),t+=this.urlArg(r[e],r[e+1]);return t},b:function(t){return this.tag("b",[],t)},td:function(t,r){return this.tag("td",t,r)},th:function(t,r){return this.tag("th",t,r)},tag:function(t,r,e){e||"string"!=typeof r||(e=r,r=null);var a="<"+t+" "+this.attrs(r)+">";return null!=e&&(a+=e),a+="</"+t+">"},openTag:function(t,r){return"<"+t+" "+this.attrs(r)+">"},open:function(t,r,e){let a="<"+t+" "+this.attrs(r)+">";return e&&(a+=e),a},openRow:function(){return this.openTag("div",["class","row"])},closeRow:function(){return this.closeTag("div")},openDiv:function(t){return this.openTag("div",t)},closeDiv:function(){return this.closeTag("div")},closeTag:function(t){return"</"+t+">\n"},close:function(...t){let r="";return t.forEach((t=>{r+="</"+t+">\n"})),r},urlArg:function(t,r){return t+"="+encodeURIComponent(r)},attrSelect:function(t,r){return Utils.isDefined(r)?"["+t+"='"+r+"']":"["+t+"]"},space:function(t){let r="";for(let e=0;e<t;e++)r+="&nbsp;";return r},attr:function(t,r){return null==r?" "+t+" ":" "+t+"="+this.qt(r)+" "},attrs:function(t){if(!t)return"";var r="";if(null==t)return r;if(1==t.length)return t[0];for(var e=0;e<t.length;e+=2){var a=t[e];if(a){var n=t[e+1];r+=null==n?" "+a+" ":this.attr(a,n)}}return r},styleAttr:function(t){return this.attr("style",t)},classAttr:function(t){return this.attr("class",t)},makeFullScreen:function(t){if(null==t)return console.log("HtmlUtils.makeFullScreen: null elem argument"),void console.trace();t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():console.err("No full screen")},makeExpandable:function(t,r){let e=HtmlUtils.getIconImage("fa-expand-arrows-alt"),a=HtmlUtils.getUniqueId(),n=HtmlUtils.div(["id",a,"title","Expand","class","ramadda-expandable-link","style","display:none;cursor:pointer;text-align:right;position:absolute;right:10px;top:0px;margin-top:0px;"],e);$(t).append(n);let i=$("#"+a),g=$(t).hasClass("ramadda-expand-now");i.attr("data-expanded",g);let l=$(t).css("background");$(t).mouseenter((function(){i.css("display","block")})),$(t).mouseleave((function(){i.css("display","none")}));let o=function(){let e,a="true"==$(this).attr("data-expanded");if(a)e=HtmlUtils.getIconImage("fa-expand-arrows-alt"),$(this).attr("title","Expand"),$(t).css("left","").css("right","").css("top","").css("bottom","").css("position","relative").css("height","").css("z-index","").css("background",l||""),i.css("display","none"),$(t).find(".ramadda-expandable-target").each((function(){$(this).attr("isexpanded","false"),$(this).css("height",$(this).attr("original-height"))}));else{let a=$(window).height();e=HtmlUtils.getIconImage("fa-compress-arrows-alt");$(t).offset().top;if($(this).attr("title","Contract"),r){let r=$(t).find(".ramadda-expandable");return r.css("background","#fff"),void HtmlUtils.makeFullScreen(r.get(0))}$(t).css("left","50px").css("right","5px").css("top","5px").css("position","fixed").css("z-index","2000").css("background","#fff").css("height",a+"px"),$(t).find(".ramadda-expandable-target").each((function(){$(this).attr("original-height",$(this).css("height")),$(this).attr("isexpanded","true");let t=$(this).attr("expandable-height");(t||-1!=t)&&$(this).css("height",t||"95vh")})),i.css("display","block")}$(this).attr("data-expanded",!a+""),$(this).html(e),window.ramaddaDisplayCheckLayout&&ramaddaDisplayCheckLayout(),window.ramaddaMapCheckLayout&&ramaddaMapCheckLayout()};$("#"+a).click(o),g&&o()},makeDraggable:function(t){$(t).draggable({zIndex:1e3,drag:function(t,r){},start:function(t,r){if(!$(this).attr("started")){$(this).attr("started",!0);let t=$(this).offset();$(this).attr("oleft",t.left),$(this).attr("otop",t.top),$(this).css("position","absolute").css("left",t.left+"px").css("top",t.top+"px"),console.log("start:"+t.left+" "+t.top)}}})},idAttr:function(t){return this.attr("id",t)},link:function(t,r,e){null==e&&(e=[]);var a=[];for(i in e)a.push(e[i]);return(e=a).push("url"),e.push(t),e.push("class"),e.push("ramadda-link"),e.style?e.style+="display:inline-block;":e.style="style='display:inline-block;'",this.div(e,r)},getEntryImage:function(t,r){if(r.indexOf("::")>=0){var e=r.split("::");e[0].trim().length>0&&(t=e[0].trim());var a=e[1].trim();return ramaddaBaseUrl+"/metadata/view/"+a+"?entryid="+t}return r},jsLink:function(t,r,e){return e=e||[],HU.href("javascript:noop();",r,e)},url:function(t,r){let e=t;for(let t=0;t<r.length;t+=2){0==t&&e.indexOf("?")<0?e+="?":e+="&";let a=r[t],n=r[t+1];e+=encodeURIComponent(a)+"="+encodeURIComponent(n)}return e},href:function(t,r,e){null==e&&(e=[]);let a=[];for(let t in e)a.push(e[t]);return(e=a).push("href"),e.push(t),Utils.isDefined(r)&&""!=r||(r=t),this.tag("a",e,r)},onClick:function(t,r,e){let a=["onclick",t,"style","color:black;   cursor:pointer;"];if(null!=e)for(let t=0;t<e.length;t++)a.push(e[t]);return this.tag("a",a,r)},checkbox:function(t,r,e,a){(r=r||[]).push("id"),r.push(t),r.push("type"),r.push("checkbox"),r.includes("value")||(r.push("value"),r.push("true")),e&&(r.push("checked"),r.push(null));let n=this.tag("input",r);return a&&(n+="&nbsp;"+HU.tag("label",["for",t],a)),n},radio:function(t,r,e,a,n,i){i||(i="");var g="<input id='"+t+"'  class='"+e+"' name='"+r+"' type=radio value='"+a+"' ";return n&&(g+=" checked "),g+=" "+i,g+="/>"},handleFormChangeShowUrl:function(t,r,e,n,i,g){null==n&&(n=[".*OpenLayers_Control.*","authtoken"]);var l=$("#"+r).attr("action")+"?",o=$("#"+r+" :input"),s=0,b={},d=[];let c="";o.each((function(t,r){if(""!=r.name&&null!=r.value&&""!=r.value&&"-all-"!=r.value&&("submit"!=r.type||"Cancel"!=r.value)&&("checkbox"!=r.type||r.checked)&&("radio"!=r.type||r.checked)&&(!r.attributes||!r.attributes.default||r.attributes.default.value!=r.value)){if(r.name&&b[r.name],r.name&&(b[r.name]=!0),null!=n)for(t=0;t<n.length;t++){var e=n[t];if(r.name.match(e))return}if("formurl"!=r.id){var i=[];if("select-multiple"==r.type&&r.selectedOptions)for(a in r.selectedOptions)option=r.selectedOptions[a],Utils.isDefined(option.value)&&i.push(option.value);else i.push(r.value);for(v in 1==i.length&&i.forEach((t=>{c+=r.name+"="+t+"\n"})),i)s>0&&(l+="&"),s++,value=i[v],d.push({item:r,value:value}),l+=encodeURIComponent(r.name)+"="+encodeURIComponent(value)}}}));let u=window.location.protocol+"//"+window.location.host;l=u+l;let h=HtmlUtils.input("formurl",l,["size","80","id","formurl"]),f="<p>"+HtmlUtils.div(["class","ramadda-form-url"],h+SPACE2+(g?HU.span(["id","argscopy","class","ramadda-clickable","title","Copy json for subset action"],HtmlUtils.getIconImage("fas fa-earth-americas"))+SPACE2:"")+HU.span(["id","clipboard","class","ramadda-clickable","title","Copy URL to clipboard"],HtmlUtils.getIconImage("fas fa-clipboard"))+SPACE2+HtmlUtils.href(l,HtmlUtils.getIconImage("fas fa-link")));i&&(f+=i({entryId:t,formId:r,inputs:o,itemValuePairs:d})),$("#"+e).html(f),jqid("argscopy").click((()=>{Utils.copyToClipboard(c),alert("args for subset are copied to clipboard")})),jqid("clipboard").click((()=>{Utils.copyToClipboard(jqid("formurl").val()),alert("URL copied to clipboard")}))},makeUrlShowingForm:function(t,r,e,a,n,i){$("#"+r+" :input").change((function(){HtmlUtils.handleFormChangeShowUrl(t,r,e,a,n,i)})),HtmlUtils.handleFormChangeShowUrl(t,r,e,a,n,i)},select:function(t,r,e,a,n,i){var g=this.openTag("select",r);return g+=HU.makeOptions(e,a,n,i),g+=this.closeTag("select")},makeOptions:function(t,r,e,a){let n="";return t.forEach((t=>{let a=t;Array.isArray(t)&&(a=t[1],t=t[0]);let i=a;e&&a.length>e&&(a=a.substring(0,e)+"...");var g="";r&&Array.isArray(r)?r.indexOf(t)>=0&&(g=" selected "):r==t&&(g=" selected ");let l=i;t!=l&&(l=l+HU.getTitleBr()+t),n+=HU.tag("option",["title",l,g,null,"value",t],a)})),n},datePicker:function(t,r,e){return e.push("size"),e.push("8"),HtmlUtils.input(t,r,e)},datePickerInit:function(t){$("#"+t).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,constrainInput:!1,yearRange:"1900:2100"})},rangeInput:function(t,r){var e='<form><div><input type="text" class="ramadda-slider-value sliderValue" data-index="0" value="10" /> <input type="text" class="ramadda-slider-value  sliderValue" data-index="1" value="90" /></div>'+HtmlUtils.div(["id",r])+"</form>";return console.log(e),e},rangeInputInit:function(t){$("#"+t).slider({min:0,max:100,step:1,values:[10,90],slide:function(t,r){for(var e=0;e<r.values.length;++e)$("input.sliderValue[data-index="+e+"]").val(r.values[e])}}),$("input.sliderValue").change((function(){var t=$(this);$("#slider").slider("values",t.data("index"),t.val())}))},input:function(t,r,e){return"<input "+HtmlUtils.attrs(e)+HtmlUtils.attrs(["name",t,"value",r])+">"},hidden:function(t,r,e){return"<input type=hidden "+HtmlUtils.attrs(e)+HtmlUtils.attrs(["name",t,"value",r])+">"},textarea:function(t,r,e){return"<textarea "+HtmlUtils.attrs(e)+HtmlUtils.attrs(["name",t])+">"+r+"</textarea>"},initSelect:function(t,r){if(0==t.length)return;let e={showEffect:"fadeIn",showEffectSpeed:400,hideEffect:"fadeOut",hideEffectSpeed:400,autoWidth:!1};r&&$.extend(e,r),$(document).ready((function(){HtmlUtils.loadJqueryLib("selectBoxIt",[ramaddaCdn+"/lib/selectboxit/stylesheets/jquery.selectBoxIt.css"],[ramaddaCdn+"/lib/selectboxit/javascripts/jquery.selectBoxIt.min.js"],t,(()=>{setTimeout((()=>{$(t).selectBoxIt(e)}),2)}))}))},valueDefined:function(t){return""!=t&&0!=t.indexOf("--")},squote:function(t){return"'"+t+"'"},makeToggle:function(t,r,e){null===e&&(e=!0);let a=ramaddaCdn+"/icons/togglearrowdown.gif",n=ramaddaCdn+"/icons/togglearrowright.gif";$("#"+t).attr("state","open"),$("#"+t).attr("src",a),$("#"+t).css("cursor","pointer");let i=t=>{t.attr("state","close"),t.attr("src",n),$("#"+r).hide()};$("#"+t).click((function(t){var e;"open"==$(this).attr("state")?i($(this)):((e=$(this)).attr("state","open"),e.attr("src",a),$("#"+r).show()),t.preventDefault()})),e||i($("#"+t))},makeSplash:function(t,r){let e={width:"50%",style:"",showOk:!0};if(r&&$.extend(e,r),e.src&&(t=$("#"+e.src).html()),null==t||""==t.trim())return;t=HU.div([STYLE,"margin:10px;"],t);let a=Utils.getUniqueId("close_"),n=HU.div([ID,a,CLASS,"ramadda-clickable",STYLE,HU.css("position","absolute","right","10px","top","10px")],HU.getIconImage("far fa-window-close"))+t;e.showOk&&(n+=HU.center(HU.div([ID,a+"_button"],"OK"))),n=HU.div([CLASS,"ramadda-shadow-box ramadda-splash",STYLE,HU.css("width",e.width)+e.style],n);let i=$(HU.div([CLASS,"ramadda-splash-container"],n)).appendTo($("body"));$("body").addClass("ramadda-splash-body");let g=()=>{$("body").removeClass("ramadda-splash-body"),i.remove()};i.click((t=>{})),$("#"+a).click((()=>{g()})),$("#"+a+"_button").button().click((()=>{g()}))},makeToggleImage:function(t,r){return r=r||"",HU.div([STYLE,HU.css("display","inline-block","min-width","10px")],HtmlUtils.getIconImage(t,["align","bottom"],[STYLE,r]))},toggleBlockListeners:{},toggleBlockVisibility:function(t,r,e,a){let n=!0;toggleVisibility(t,"block")?HU.isFontAwesome(e)?$("#"+r).html(HU.makeToggleImage(e)):$("#"+r).attr("src",e):(n=!1,HU.isFontAwesome(e)?$("#"+r).html(HU.makeToggleImage(a)):$("#"+r).attr("src",a)),Utils.ramaddaUpdateMaps(),HtmlUtils.toggleBlockListeners[t]&&HtmlUtils.toggleBlockListeners[t](t,n)},toggleBlock:function(t,r,e,a){let n={headerClass:"ramadda-noselect entry-toggleblock-label ramadda-hoverable ramadda-clickable",headerStyle:""};a&&$.extend(n,a);let i=Utils.getUniqueId("block_"),g=i+"_img",l="fas fa-caret-down",o="fas fa-caret-right",s="HtmlUtils.toggleBlockVisibility("+HtmlUtils.join([HtmlUtils.squote(i),HtmlUtils.squote(g),HtmlUtils.squote(l),HtmlUtils.squote(o)],",")+");",b=HU.span([ID,g],HU.makeToggleImage(e?l:o)),d=HtmlUtils.div([STYLE,n.headerStyle,"class",n.headerClass,"onClick",s],b+" "+t),c=e?"display:block;visibility:visible":"display:none;",u=HtmlUtils.div(["class","hideshowblock","id",i,"style",c],r);return n.separate?{header:d,body:u,id:i}:d+u},toggleBlockNew:function(t,r,e,a){Utils.isDefined(e)||(e=!1);let n={headerClass:"ramadda-noselect ramadda-toggleblock-label ramadda-clickable",headerStyle:""};a&&$.extend(n,a);let i=Utils.getUniqueId("block_"),g=i+"_img",l=HU.span([ID,g],HU.makeToggleImage(e?"fas fa-caret-down":"fas fa-caret-right")),o=["toggle-block-id",i,"toggle-block-visible",e,STYLE,n.headerStyle,"class",n.headerClass];n.extraAttributes&&(o=Utils.mergeLists(o,n.extraAttributes));let s=HtmlUtils.div(o,l+" "+t),b=e?"display:block;visibility:visible":"display:none;",d=HtmlUtils.div(["class","hideshowblock","id",i,"style",b],r);return n.separate?{header:s,body:d,id:i}:s+d},initToggleBlock:function(t,r){t.find("[toggle-block-id]").click((function(){let t=$(this).attr("toggle-block-id"),e=t+"_img",a="true"===$(this).attr("toggle-block-visible");a=!a,$(this).attr("toggle-block-visible",""+a),$("#"+e).html(HU.makeToggleImage(a?"fas fa-caret-down":"fas fa-caret-right")),a?$("#"+t).show():$("#"+t).hide(),r&&r(t,a,$(this))}))}},StringUtil={endsWith:function(t,r){return t.length>=r.length&&t.lastIndexOf(r)+r.length==t.length},startsWith:function(t,r){return t.length>=r.length&&0===t.lastIndexOf(r,0)}},blockCnt=0,SU;function DomObject(t){this.obj=null,document.getElementById?(this.obj=document.getElementById(t),this.obj&&(this.style=this.obj.style)):document.all?(this.obj=document.all[t],this.obj&&(this.style=this.obj.style)):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t]),this.obj&&(this.id=this.obj.id,this.id||(this.id="obj"+blockCnt++))}function pageIsUnloading(){GuiUtils.pageUnloading=!0,window.onbeforeunload=confirmExit}function confirmExit(){return null}function Div(t,r){this.id=HtmlUtils.getUniqueId(),this.contents=t||"",this.extra="",this.clazz=r,this.setHidden=function(){},this.toString=function(){return HtmlUtils.div(["class",r||"","id",this.id],this.contents)},this.getId=function(){return this.id},this.jq=function(){return $("#"+this.id)},this.set=function(t,r){return r&&(this.extra=HtmlUtils.attrs(r)),this.contents=t,this.jq().html(t),this},this.append=function(t){this.content?this.content+=t:this.content=t,$("#"+this.id).append(t)},this.msg=function(t){return this.set(HtmlUtils.div([ATTR_CLASS,"display-message"],t))}}function TextMatcher(t){this.regexps=[],t&&(t=t.trim()),t&&t.length>0&&((t=t.replace(/\./g,"\\.")).startsWith('"')&&t.endsWith('"')?(t=(t=t.replace(/^"/,"")).replace(/"$/,""),this.regexps.push(new RegExp("("+t+")","ig"))):t.split(" ").map((t=>{t=t.trim(),this.regexps.push(new RegExp("("+t+")","ig"))}))),$.extend(this,{pattern:t,hasPattern:function(){return this.regexps.length>0},highlight:function(t){for(var r=0;r<this.regexps.length;r++)t=t.replace(this.regexps[r],"<span style=background:yellow;>$1</span>");return t},matches:function(t){if(0==this.regexps.length)return!0;t=t.toLowerCase();for(var r=0;r<this.regexps.length;r++)if(!t.match(this.regexps[r]))return!1;return!0}})}function number_format(t,r,e){let a,n=t<0,i=Utils.roundDecimals(t,r,!1);n?(a=Math.ceil(i),a=Math.abs(a)):a=Math.floor(i);let g=String(i).match(/\.(.*)/),l=g?g[1]:"",o=String(a).replace(/(.)(?=(\d{3})+$)/g,"$1,");return""!=l&&(o+="."+l),e&&console.log("number:"+t+" n:"+i+" i:"+a+" s:"+o),n&&0==a||n?"-"+o:o}$.widget("custom.iconselectmenu",$.ui.selectmenu,{_renderItem:function(t,r){var e=$("<li>"),a=$("<span>");r.disabled&&e.addClass("ui-state-disabled");let n=r.label,i=r.element.attr("img-src");i?(i=i.startsWith("fa")?HU.getIconImage(i):HU.image(i,[STYLE,r.element.attr("data-style")||"","width",64,"class","ui-icon "+r.element.attr("data-class")]),$(i).appendTo(a)):r.element.attr("isheader")||(n=HU.span([STYLE,HU.css("margin-left","36px")],n));let g=r.element.attr("label-class");return g&&(n=HU.div([STYLE,HU.css("width","100%"),"class",g],n)),a.append(n),e.append(a).appendTo(t)}}),window.onbeforeunload=pageIsUnloading,function(t,r){t.fn.getCursorPosition=function(){var r=t(this).get(0),e=0;if("selectionStart"in r)e=r.selectionStart;else if("selection"in document){r.focus();var a=document.selection.createRange(),n=document.selection.createRange().text.length;a.moveStart("character",-r.value.length),e=a.text.length-n}return e}}(jQuery);var SvgUtils=SU={translate:function(t,r){return" translate("+t+","+r+") "},scale:function(t){return" scale("+t+") "},rotate:function(t){return" rotate("+t+") "},skewX:function(t){return" skewX("+t+") "},transform:function(t,...r){return t.attr("transform",r.join(" ")),t},makeBlur:function(t,r,e){return t.append("defs").append("filter").attr("id",r).append("feGaussianBlur").attr("stdDeviation",e)}},dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,a=function(t,r){for(t=String(t),r=r||2;t.length<r;)t="0"+t;return t};return function(n,i,g){var l=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(i=n,n=void 0),n=n?new Date(n):new Date,isNaN(n))throw SyntaxError("invalid date");"UTC:"==(i=String(l.masks[i]||i||l.masks.default)).slice(0,4)&&(i=i.slice(4),g=!0);var o=g?"getUTC":"get",s=n[o+"Date"](),b=n[o+"Day"](),d=n[o+"Month"](),c=n[o+"FullYear"](),u=n[o+"Hours"](),h=n[o+"Minutes"](),f=n[o+"Seconds"](),m=n[o+"Milliseconds"](),p=g?0:n.getTimezoneOffset(),y={d:s,dd:a(s),ddd:l.i18n.dayNames[b],dddd:l.i18n.dayNames[b+7],m:d+1,mm:a(d+1),mmm:l.i18n.monthNames[d],mmmm:l.i18n.monthNames[d+12],yy:String(c).slice(2),yyyy:c,h:u%12||12,hh:a(u%12||12),H:u,HH:a(u),M:h,MM:a(h),s:f,ss:a(f),l:a(m,3),L:a(m>99?Math.round(m/10):m),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:g?"UTC":(String(n).match(r)||[""]).pop().replace(e,""),o:(p>0?"-":"+")+a(100*Math.floor(Math.abs(p)/60)+Math.abs(p)%60,4),S:["th","st","nd","rd"][s%10>3?0:(s%100-s%10!=10)*s%10]};return i.replace(t,(function(t){return t in y?y[t]:t.slice(1,t.length-1)}))}}(),RamaddaUtils,RamaddaUtil;function jqid(t){return HtmlUtils.jqid(t)}dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},RamaddaJsonUtil={init:function(t){let r=jqid(t).find(".ramadda-json-openbracket");r.each((function(){$(this).append(HU.span(["visible","true","class","ramadda-json-toggle"],HU.getIconImage(icon_folderopen)))}));let e=r.find(".ramadda-json-toggle");e.css("cursor","pointer"),e.click((function(){let t=$(this).closest(".ramadda-json-openbracket").next(".ramadda-json-block"),r="true"==$(this).attr("visible");r=!r,$(this).attr("visible",r),r?(t.show(500),$(this).html(HU.getIconImage(icon_folderopen))):(t.hide(500),$(this).html(HU.getIconImage(icon_folderclosed)))}))}},Date.prototype.format=function(t,r){return dateFormat(this,t,r)},$(document).ready((function(){HU.documentReady=!0,Utils.checkForResize()})),Utils.areDisplaysReady();var Ramadda=RamaddaUtils=RamaddaUtil={contents:{},currentRamaddaBase:null,getEntryUrl:function(t){return ramaddaBaseUrl+"/entry/show?entryid="+t},fileDrops:{},doSave:function(t,r,e,a,n){(e=e||{}).entryid=t,e.authtoken=r,e.response="json";let i=ramaddaBaseUrl+"/entry/change";$.post(i,e,(t=>{a&&a(t)})).fail((t=>{try{let r=JSON.parse(t.responseText);if(r.error)return void(t?t(r.error):alert("Error:"+r.error))}catch(t){}n?n(t.responseText):alert("Error:"+t.responseText)}))},initEntryTable:function(t,r,e){let a={};Utils.isDefined(r.details)&&0==r.details&&(r.simple=!0);let n=r.simple,i=!n,g={actions:[],showCrumbs:!1,showHeader:i,showDate:i,showCreateDate:i,showSize:i,showType:i,showIcon:i,showThumbnails:i,showArrow:i,showForm:i};$.extend(g,r);let l=e.map(((t,r)=>{let e=new Entry(t);return a[e.getId()]=e,e})),o="",s=[];if(s.push({id:"name",label:"Name"}),g.showDate&&s.push({id:"fromdate",label:"Date",width:120}),g.showCreateDate&&s.push({id:"createdate",label:"Create Date",width:120}),g.showSize&&s.push({id:"size",label:"Size",width:100}),g.showType&&s.push({id:"type",label:"Type",width:120}),g.showHeader){o+="<table cellspacing=0 cellpadding=0 width=100% class=entry-list-header><tr>";let r=["class","entry-list-header-column ramadda-clickable"];s.forEach(((e,a)=>{let n=r,i=e.width;0==a&&g.showForm&&(o+=HU.td(["style","padding-left:3px;","width","10"],HU.div(["style","width:15px","id",t+"_formarrow","title","Click to show entry form","class","ramadda-clickable"],HU.getIconImage("fas fa-caret-right"))),i-=10),Utils.isDefined(e.width)&&(n=Utils.mergeLists(n,["width",e.width])),n=Utils.mergeLists(n,["orderby",e.id,"title","Sort by "+e.label]);let l=e.label;e.id==g.orderby&&Utils.isDefined(g.ascending)&&(l=g.ascending?HU.getIconImage("fas fa-arrow-up")+SPACE+l:HU.getIconImage("fas fa-arrow-down")+SPACE+l),o+=HU.td(n,l)})),o+="</table>"}else n||(o+=HU.div(["class","entry-list-noheader"]));let b=Utils.getUniqueId(),d=Utils.getUniqueId(),c=n?"entry-list-simple":"entry-list",u=["id",b,"class",c];if(o+=HU.open("div",u),g.showForm){o+=HU.open("form",["method","post","action",ramaddaBaseUrl+"/entry/getentries"]);let r=HU.checkbox("",["style",HU.css("margin-left","3px"),"title","Toggle all","id",t+"_form_cbx"],!1),e=[["","Apply action"]];g.actions.forEach((t=>{e.push([t.id,t.label])})),r+=SPACE1,r+=HU.select("",["name","output","id",t+"_form_action"],e),r+=SPACE1,r+=HU.open("input",["name","getselected","type","submit","value","Selected","class","submit ui-button ui-corner-all ui-widget","id","getselected1338","role","button"]),r+=SPACE1,r+=HU.open("input",["name","getall","type","submit","value","All","class","submit ui-button ui-corner-all ui-widget","id","getall1337","role","button"]),g.canDelete&&(r+=SPACE1+HU.span(["target-type","repository.delete","title","Shift-drag-and-drop entries to delete","class","ramadda-entry-target ramadda-clickable ramadda-hoverable"],HU.getIconImage("fas fa-trash"))),g.canExport&&(r+=SPACE1+HU.span(["target-type","zip.export","title","Shift-drag-and-drop entries to export","class","ramadda-entry-target ramadda-clickable ramadda-hoverable"],HU.getIconImage("fas fa-file-export"))),o+=HU.div(["class",c+"-row","id",t+"_form","style","display:none;width:100%"],r)}let h=["id",d];g.maxHeight&&h.push("style",HU.css("max-height",g.maxHeight,"overflow-y","auto")),o+=HU.open("div",h),o+="</div>",o+="</form>",o+="</div>";let f=jqid(t);f.html(o),f.find(".entry-list-header-column").click((function(){let t,r=$(this).attr("orderby");g.orderby==r?Utils.isDefined(g.ascending)?g.ascending?t=HU.addToDocumentUrl("ascending",!1):(t=HU.addToDocumentUrl("ascending",null),t=HU.addToDocumentUrl("orderby",null)):(t=HU.addToDocumentUrl("orderby",r),t=HU.addToDocumentUrl("ascending",!0)):(t=HU.addToDocumentUrl("ascending",!0),t=HU.addToDocumentUrl("orderby",r)),window.location=t}));let m=!1;$("#"+t+"_form_cbx").click((function(){let r=$(this).is(":checked");jqid(t).find(".entry-form-select").prop("checked",r)}));$("#"+t+"_formarrow").click((function(){m=!m,m?(jqid(t+"_form").show(),jqid(t).find(".entry-form-select").show(),$(this).html(HU.getIconImage("fas fa-caret-down"))):(jqid(t+"_form").hide(),jqid(t).find(".entry-form-select").hide(),$(this).html(HU.getIconImage("fas fa-caret-right")))})),Ramadda.showEntryTable(d,g,s,t,a,(t=>{m&&jqid(t).find(".entry-form-select").show()}),l)},showEntryTable:function(t,r,e,a,n,i,g){let l=$("#"+a),o="",s=r.simple?"entry-list-simple-row":"entry-list-row entry-list-row-data";if(g.forEach((t=>{let a=Utils.getUniqueId("row_"),n=HU.open("div",["entryid",t.getId(),"id",a]);n+=HU.open("div",["entryid",t.getId(),"id",a,"class",s]);let i=Utils.getUniqueId();n+=HU.open("table",["cellspacing","0","cellpadding","border","width","100%","class","entry-row-table","entryid",t.getId()]),n+="<tr valign=top>",e.forEach(((g,l)=>{let o=l==e.length-1,s=[],b=t.getProperty(g.id),d=null;if("name"==g.id){r.showIcon&&(b=t.getIconImage()+SPACE+b),b=t.getLink(b);let e=[],n=Utils.getUniqueId("entry_");if(r.showForm&&e.push(HU.hidden("allentry",t.getId())+HU.checkbox(n,["rowid",a,"name","selentry","value",t.getId(),"class","entry-form-select","style",HU.css("margin-right","2px","display","none")],!1)),e.push(HU.div(["style",HU.css("min-width","10px"),"innerid",i,"entryid",t.getId(),"title","Click to show contents","class","entry-arrow ramadda-clickable"],HU.getIconImage("fas fa-caret-right"))),r.showThumbnails){let r=t.getThumbnail();r&&e.push(HU.div(["class","ramadda-thumbnail","style",HU.css("max-height","100px","overflow-y","auto")],HU.image(r,["loading","lazy","class","ramadda-clickable ramadda-thumbnail-image","title","Click to enlarge","style",HU.css("width","100px")])))}if(r.showCrumbs&&t.breadcrumbs){let r=Utils.getUniqueId();b=HU.span(["id","breadcrumbtoggle_"+r,"breadcrumbid",r,"title","Show breadcrumbs","class","ramadda-clickable ramadda-breadcrumb-toggle"],HU.getIconImage("fas fa-plus-square"))+SPACE2+HU.span(["style",HU.css("display","none"),"id",r],t.breadcrumbs+"&nbsp;&raquo;&nbsp;")+b}e.push(b),r.simple||(d="Right-click to see entry menu. Shift-drag to copy/move"),b=HU.table([],HU.tr(["valign","top"],HU.tds([],e)))}else{"type"==g.id&&(b=HU.href(ramaddaBaseUrl+"/search/type/"+t.getType().id,b,["title","Search for entries of type "+b]));let r=g.width-20;r=g.width,b=HU.div(["style",HU.css("padding-left","5px","white-space","nowrap","width",HU.getDimension(g.width),"text-align","right","max-width",HU.getDimension(r),"overflow-x","hidden")+(o?HU.css("padding-right","4px"):"")],b),s.push("align","right")}Utils.isDefined(g.width)&&s.push("width",HU.getDimension(g.width)),d&&s.push("title",d),n+=HU.td(s,b)})),n+="</tr></table>",n+="</div>",n+=HU.div(["id",i,"style",HU.css("margin-left","20px")]),n+="</div>",o+=n})),o+=HU.close("div"),$("#"+t).html(o),$("#"+t).find(".ramadda-breadcrumb-toggle").click((function(){let t=$(this).attr("breadcrumbid"),r=$("#"+t);"none"==r.css("display")?($("#breadcrumbtoggle_"+t).html(HU.getIconImage("fas fa-minus-square")),r.css("display","inline")):($("#breadcrumbtoggle_"+t).html(HU.getIconImage("fas fa-plus-square")),r.css("display","none"))})),$("#"+t).find(".entry-arrow").click((function(){let t=$(this).attr("entryid"),g=$(this).attr("innerid"),l=$("#"+g),o=$(this).attr("filled"),s=$(this).attr("open");if(s?$(this).html(HU.getIconImage("fas fa-caret-right")):$(this).html(HU.getIconImage("fas fa-caret-down")),o)return void(s?(l.hide(),$(this).attr("open",!1)):(l.show(),$(this).attr("open",!0)));let b=n[t];$(this).attr("filled",!0),$(this).attr("open",!0);let d=ramaddaBaseUrl+"/entry/show?output=json&includeproperties=false&includedescription=false&includeservices=false&children=true&entryid="+t;$.getJSON(d,(function(t,l,o){if(GuiUtils.isJsonError(t))return;let s=t.map(((t,r)=>{let e=new Entry(t);return n[e.getId()]=e,e}));if(s.length>0)Ramadda.showEntryTable(g,r,e,a,n,i,s);else{let t=HU.open("table",["class","formtable"]);if(b.getIsUrl())t+=HU.formEntry("URL:",HU.href(b.getResourceUrl(),b.getResourceUrl()));else if(b.getIsFile()){let r=b.getResourceUrl();t+=HU.formEntry("File:",HU.href(r,b.getFilename())+"  ("+b.getFormattedFilesize()+") "+HU.href(r,HU.getIconImage("fas fa-download")))}t+=HU.formEntry("Kind:",HU.href(ramaddaBaseUrl+"/search/type/"+b.getType().id,b.typeName,["title","Search for entries of type "+b.typeName]));let r=ramaddaBaseUrl+"/search/type/"+b.getType().id+"?user_id="+b.creator+"&search.submit=true",e=HU.href(r,b.creator,["title","Search for entries of this type created by "+b.creator]);t+=HU.formEntry("Created by:",e),t+=HU.formEntry("Created:",b.createDateFormat),b.startDate&&b.startDate.getTime()!=b.createDate.getTime()&&(t+=HU.formEntry("Date:",b.startDateFormat)),b.startDate&&b.endDate&&b.startDate.getTime()!=b.endDate.getTime()&&(console.log(b.startDate),console.log(b.endDate),t+=HU.formEntry("To Date:",b.endDateFormat)),t+="</table>",HU.jqid(g).html(t)}}))})),r.simple)return;$("#"+t).find(".entry-form-select").click((function(t){$(this).is(":checked"),$("#"+$(this).attr("rowid"));HU.checkboxClicked(t,"entry_",$(this).attr("id")),l.find(".entry-form-select").each((function(){let t=$(this).is(":checked"),r=$("#"+$(this).attr("rowid"));t?r.addClass("entry-list-row-selected"):r.removeClass("entry-list-row-selected")}))})),$("#"+t).find(".ramadda-thumbnail-image").click((function(){let t=$(this).attr("src");HU.makeDialog({content:HU.image(t),my:"left top",at:"left bottom",anchor:this,header:!0,draggable:!0})}));let b=$("#"+t).find(".entry-list-row");b.bind("contextmenu",(function(t){let r=$(this),e=n[$(this).attr("entryid")];if(!e)return;eventX=GuiUtils.getEventX(t);let a=ramaddaBaseUrl+"/entry/show?entryid="+e.getId()+"&output=metadataxml";if(GuiUtils.loadXML(a,(function(t){let a=t.responseXML.documentElement;text=getChildText(a),HU.makeDialog({content:text,my:"left top",at:"left bottom",title:e.getIconImage()+" "+e.getName(),anchor:r,header:!0})}),this),!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()})),Ramadda.initDragAndDropEntries(b,n,a),i(t)},initDragAndDropEntries:function(t,r,e){function a(t){return t.hasClass("ramadda-entry-target")}t.mousedown((function(t){if(!t.shiftKey||!r)return;let a=r[$(this).attr("entryid")];if(!a)return;let n=$(this),i=[a];if($("#"+e).find(".entry-list-row-selected").each((function(){let t=r[$(this).attr("entryid")];t&&t.getId()!=a.getId()&&i.push(t)})),Utils.entryDragInfo={dragSource:n.attr("id"),entry:a,getIds:function(){return i.map((t=>t.getId())).join(",")},hasEntry:function(t){return i.includes(t)},getHtml:function(){let t="";return i.forEach((r=>{""!=t&&(t+="<br>"),t+=HU.image(r.getIconUrl())+SPACE+r.getName()})),t}},a){if(Utils.mouseIsDown=!0,!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}})),t.mouseover((function(t){let e="#C6E2FF";if(a($(this)))return void(Utils.mouseIsDown&&Utils.entryDragInfo&&$(this).css("background",e));let n=r[$(this).attr("entryid")];if(n&&Utils.mouseIsDown&&Utils.entryDragInfo){if(Utils.entryDragInfo.hasEntry(n))return;$(this).css("background",e)}})),t.mouseout((function(t){if(Utils.entryDragInfo){if(a($(this)))return void $(this).css("background","");let t=r[$(this).attr("entryid")];if(Utils.entryDragInfo.entry==t)return;$(this).css("background","")}})),t.mouseup((function(t){if(!Utils.entryDragInfo)return;if($(this).css("background",""),a($(this))){let t=ramaddaBaseUrl+"/entry/getentries?output="+$(this).attr("target-type");return Utils.entryDragInfo.getIds().split(",").forEach((r=>{t+="&selentry="+r})),void(document.location=t)}let e=r[$(this).attr("entryid")];e&&(Utils.entryDragInfo.hasEntry(e)||Utils.entryDragInfo.hasEntry(e)||(url=ramaddaBaseUrl+"/entry/copy?action=action.move&from="+Utils.entryDragInfo.getIds()+"&to="+e.getId(),document.location=url))}))},initFormTags:function(t){let r=$("#"+t),e=r.find(".metadata-tag-input");r.attr("autocomplete","off"),e.attr("autocomplete","off"),e.keyup((function(t){HtmlUtils.hidePopupObject();let r=$(this).val();if(""==r)return;let e=HU.getUrl(ramaddaBaseUrl+"/metadata/suggest",["value",r.trim()]),a=$(this);$.getJSON(e,(t=>{if(0==t.length)return;let r="";t.forEach((t=>{r+=HU.div([CLASS,"ramadda-clickable metadata-suggest","suggest",t],t)}));let e=HU.div([CLASS,"ramadda-search-popup",STYLE,HU.css("max-width","200px","padding","4px")],r);HU.makeDialog({content:e,my:"left top",at:"left bottom",anchor:a}).find(".metadata-suggest").click((function(){HtmlUtils.hidePopupObject(),a.val($(this).attr("suggest"))}))})).fail((t=>{console.log("url failed:"+e+"\n"+t)}))}));let a=$("#"+t).find(".metadata-tag");a.attr("title","Click to remove"),a.click((function(){let t=r.find("#"+$(this).attr("metadata-id"));$(this).hasClass("metadata-tag-deleted")?($(this).removeClass("metadata-tag-deleted"),t.val("")):($(this).addClass("metadata-tag-deleted"),t.val("delete"))}))},initFormUpload:function(t,r){let e=$("#"+t),a=e.closest("form"),n=HU.div([TITLE,"Click to select a file",ID,t+"_filewrapper",CLASS,"fileinput_wrapper"],HU.getIconImage("fas fa-cloud-upload-alt")+" "+HU.div([ID,t+"_filename",CLASS,"fileinput_label"]));e.after(n),e.hide();let i=$("#"+t+"_filewrapper");$("#"+t+"_filename");i.click((()=>{e.trigger("click")}));let g=()=>{let r=e[0].files?e[0].files[0]:null,a=r?r.name:e.val(),n=a.lastIndexOf("\\");n<0&&(n=a.lastIndexOf("/")),n>=0&&(a=a.substring(n+1)),r&&(a=a+" ("+Utils.formatFileLength(r.size)+")"),""==a&&(a=HU.span([CLASS,"fileinput_label_empty"],"Please select a file")),$("#"+t+"_filename").html(a)};if(e.bind("change",g),g(),Utils.stringDefined(r)){let e=$("#"+r),n={files:{},cnt:0,added:!1};e.append(HU.div([CLASS,"ramadda-dnd-target-files",ID,t+"_dnd_files"]));let i=$("#"+t+"_dnd_files");Utils.initDragAndDrop(e,(t=>{}),(t=>{}),((r,e,g,l)=>{n.cnt++;let o=e.name;if(!o){let t=e.type&&e.type.match("image/.*");if(o=prompt("Entry file name:",t?"image":"file"),!o)return;if(e.type)if("text/plain"==e.type)o.endsWith(".txt")||(o+=".txt");else{o=o+"."+e.type.replace(/.*\//,"")}}let s=t+"_list"+n.cnt,b=t+"_file"+n.cnt,d=t+"_file_name"+n.cnt,c="upload_file_"+n.cnt,u="upload_name_"+n.cnt;n.files[b]=g;let h=HU.span([CLASS,"ramadda-clickable",ID,s+"_trash"],HU.getIconImage(icon_trash)),f=Utils.isDefined(e.size)?Utils.formatFileLength(e.size):"";i.append(HU.div([ID,s],h+" "+o+" "+f)),a.append(HU.tag("input",["type","hidden","name",c,"id",b])),a.append(HU.tag("input",["type","hidden","name",u,"id",d])),$("#"+b).val(g),$("#"+d).val(o),$("#"+s+"_trash").click((function(){$("#"+s).remove(),$("#"+b).remove(),$("#"+d).remove()}))}),null,!0)}},handleDropEvent:function(t,r,e,a,n){let i=r.type.match("^image.*"),g=ramaddaBaseUrl+"/entry/addfile",l=r.name;if(!l&&(l=prompt("Entry Name:"),!l))return;let o=r.name,s=r.type.replace(/image\//,"");o||(o=l+"."+s);let b,d=new FormData;d.append("filename",o),d.append("filetype",r.type),d.append("group",a),d.append("description",""),d.append("file",e),$.ajax({url:g,cache:!1,contentType:!1,processData:!1,method:"POST",type:"POST",data:d,success:t=>{b.remove(),"ok"==t.status?n&&n(t,t.entryid,t.name,i):alert("An error occurred creating entry: "+t.message)},error:function(t){b.remove(),alert("An error occurred creating entry: "+t)}});let c=HU.div(["style",HU.css("text-align","center","padding","5px")],"Creating entry<br>"+HU.image(ramaddaCdn+"/icons/mapprogress.gif",["width","50px"]));b=HU.makeDialog({content:c,anchor:$(document),my:"center top",at:"center top+100"})},inherit:function(t,r){return $.extend(t,r),r.getThis=function(){return t},t.getThis=function(){return t},t.mysuper=r,t},initMembers:function(t,r){return $.extend(t,r),t},defineMembers:function(t,r){return $.extend(t,r),t},showEntryPopup:function(t,r,e){let a=RamaddaUtils.contents[r];if(a)RamaddaUtils.showEntryPopupInner(t,r,e,a);else{let a=ramaddaBaseUrl+"/entry/menu?entryid="+r;$.ajax({url:a,dataType:"text",success:function(a){RamaddaUtils.contents[r]=a,RamaddaUtils.showEntryPopupInner(t,r,e,a)}}).fail(((t,r,e)=>{console.log("/entry/menu failed:"+e),alert("Failed to contact the server")}))}},showEntryPopupInner:function(t,r,e,a){let n=$("#"+t);HU.makeDialog({content:a,my:"left top",at:"left bottom",title:e,anchor:n,draggable:!0,header:!0,inPlace:!1})},initEntryListForm:function(t){let r=Utils.entryGroups[t];r&&(r.on=0,r.setVisbility())},hideEntryPopup:function(){HtmlUtils.getTooltip().hide()},originalImages:new Array,changeImages:new Array,folderClick:function(t,r,e){Ramadda.changeImages[t]=e;let a=$("#"+t);if(0==a.length)return;let n=$("#img_"+t);"none"!=a.css("display")?(e&&n.html(HU.getIconImage("fa-caret-right")),a.hide()):(Ramadda.originalImages[t]=n.html(),a.show(),n.html(HU.getIconImage("fa-caret-down")),(r+="&orderby=entryorder&ascending=true").startsWith("/")&&Ramadda.currentRamaddaBase&&(r=Ramadda.currentRamaddaBase+r),GuiUtils.loadXML(r,Ramadda.handleFolderList,t))},handleFolderList:function(request,uid){if(null!=request.responseXML){let xmlDoc=request.responseXML.documentElement,script,html;for(i=0;i<xmlDoc.childNodes.length;i++){let t=xmlDoc.childNodes[i];"javascript"==t.tagName?script=getChildText(t):"content"==t.tagName&&(html=getChildText(t))}html||(html=getChildText(xmlDoc)),html&&($("#"+uid).html("<div>"+html+"</div>"),Utils.checkTabs(html)),script&&eval(script)}Ramadda.changeImages[uid]?$("#img_"+uid).attr("src",icon_folderopen):$("#img_"+uid).attr("src",Ramadda.originalImages[uid])},Components:{init:function(t){let r=$("#"+t),e=$("#"+t+"_header"),a=!1,n=!1,i=r.find(".ramadda-component"),g={},l={},o={};i.each((function(){let t=$(this).attr("component-date");if(!t)return;let r,e=Utils.parseDate(t);$(this).attr("component-day",r=Utils.formatDateWithFormat(e,"mmmm d yyyy")),o[r]=!0,$(this).attr("component-month",r=Utils.formatDateWithFormat(e,"mmmm yyyy")),l[r]=!0,$(this).attr("component-year",r=Utils.formatDateWithFormat(e,"yyyy")),g[r]=!0,$(this).attr("component-latitude")&&(n=!0),Utils.stringDefined($(this).attr("component-tags"))&&(a=!0)})),e.css("text-align","center");let s=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar ramadda-button-on","layout","grid"],"Grid");Object.keys(g).length>1&&(s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","year"],"Year")),Object.keys(l).length>1&&(s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","month"],"Month")),Object.keys(o).length>1&&(s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","day"],"Day")),s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","title"],"Title"),a&&(s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","tags"],"Tag")),s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","author"],"Author"),n&&(s+=HU.div([STYLE,HU.css("display","inline-block"),CLASS,"ramadda-button ramadda-button-bar","layout","map"],"Map")),e.append(HU.div([],s));let b=e.find(".ramadda-button");b.click((function(){b.removeClass("ramadda-button-on"),$(this).addClass("ramadda-button-on");let t=$(this).attr("layout");"grid"==t?Ramadda.Components.layout(r,i,null):Ramadda.Components.layout(r,i,"component-"+t)}))},layout:function(t,r,e){if(t.find(".ramadda-group").each((function(){$(this).detach()})),t.mapId&&$("#"+t.mapId).detach(),t.ramaddaMap&&(ramaddaMapRemove(t.ramaddaMap),t.ramaddaMap=null),null==e)return r.show(),void r.each((function(){$(this).detach(),t.append($(this))}));if("component-map"==e){r.hide();let e=Utils.getUniqueId();t.mapId=e,t.append(HU.div([ID,e,STYLE,HU.css("width","100%","height","400px")]));let a=new RepositoryMap(e,{});t.ramaddaMap=a,a.initMap(!1),r.each((function(){let t=$(this).attr("component-url"),r=+$(this).attr("component-latitude"),e=+$(this).attr("component-longitude");if(!Utils.isNumber(r))return;let n=$(this).attr("component-image"),i=HU.center(HU.b($(this).attr("component-title")));n&&(i+=HU.image(n,[WIDTH,"300px"])),t&&(i=HU.href(t,i));let g=new MapUtils.createLonLat(e,r);a.addPoint("",g,{pointRadius:6,strokeWidth:1,strokeColor:"#000",fillColor:"blue"},i)})),a.centerOnMarkers()}else{r.show();let a="component-day"==e||"component-month"==e||"component-year"==e,n=[],i={};r.each((function(){let t=$(this).attr(e)||"";if("component-tags"==e){let r=t.split(",");t=r[0]}if(!i[t]){i[t]=[];if(a){let r=$(this).attr("component-date"),e=r?Utils.parseDate(r):null;n.push([t,e])}else n.push(t)}i[t].push($(this))})),n=a?n.sort(((t,r)=>(t=t[1],r=r[1],t&&r?t?r?r.getTime()-t.getTime():-1:1:0))):n.sort(),n.forEach((r=>{a&&(r=r[0]);let e=t.append($(HU.div([CLASS,"ramadda-group"],HU.div([CLASS,"ramadda-group-header"],r))));i[r].forEach((t=>{e.append(t)}))}))}}}};function EntryRow(t,r,e,a,n,i){i||(i={showIcon:!0}),this.args=i,i.entryId=t,Utils.globalEntryRows[t]=this,Utils.globalEntryRows[r]=this,Utils.globalEntryRows[e]=this,this.entryId=t,this.showIcon=i.showIcon,this.onColor="#FFFFCC",this.overColor="#f4f4f4",this.rowId=r,this.cbxId=e,this.cbxWrapperId=a,this.showDetails=n,this.getRow=function(){return $("#"+this.rowId)},this.getCbx=function(){return $("#"+this.cbxId)};let g=this.getCbx().closest("form");if(g.length){let t=Utils.entryGroups[g.attr("id")];t&&t.addEntryRow(this)}else this.getCbx().hide();this.setCheckbox=function(t){this.getCbx().prop("checked",t),this.setRowColor()},this.isSelected=function(){return this.getCbx().is(":checked")},this.setRowColor=function(){this.getRow().removeClass("entry-row-hover"),this.isSelected()?this.getRow().addClass("entry-list-row-selected"):this.getRow().removeClass("entry-list-row-selected")},this.mouseOver=function(t){$("#entrymenuarrow_"+r).attr("src",icon_menuarrow),this.getRow().addClass("entry-row-hover")},this.mouseOut=function(t){$("#entrymenuarrow_"+r).attr("src",icon_blank),this.setRowColor()},this.mouseClick=function(r){eventX=GuiUtils.getEventX(r);let e=this.getRow().offset();if(eventX-e.left<150)return;this.lastClick=eventX;let a=ramaddaBaseUrl+"/entry/show?entryid="+t+"&output=metadataxml";this.showDetails?a+="&details=true":a+="&details=false",this.showIcon?a+="&showIcon=true":a+="&showIcon=false",GuiUtils.loadXML(a,this.handleTooltip,this)},this.handleTooltip=function(t,r){let e=t.responseXML.documentElement;text=getChildText(e);let a=r.getRow().offset().left,n=(r.lastClick,HU.jsLink("",HU.getIconImage(icon_close),["onmousedown","RamaddaUtil.hideEntryPopup();","id","tooltipclose"])),i=HU.image(r.args.icon)+SPACE+r.args.name,g=HU.div([CLASS,"ramadda-popup-header"],n+SPACE2+i),l=HU.div([CLASS,"ramadda-popup",STYLE,"display:block;"],g+"<table>"+text+"</table>"),o=HtmlUtils.getTooltip();o.html(l),o.draggable(),Utils.checkTabs(text);let s=r.getRow().offset(),b=(r.getRow().outerWidth(),r.getRow().outerHeight()),d=HtmlUtils.getTooltip().outerWidth(),c=$(window).width(),u=r.lastClick;r.lastClick+d>c&&(u-=r.lastClick+d-c);let h=u+"px",f=3+s.top+b+"px";o.css({position:"absolute",zIndex:5e3,left:h,top:f}),o.show()}}var selectors=new Array,currentSelector;function Selector(t,r,e,a,n,i,g,l,o){let s=this;this.id=r,this.domId=HU.getUniqueId("selector_"),this.props=o||{},this.elementId=e,this.localeId=i,this.entryType=g,this.allEntries=a,this.selecttype=n,this.textComp=GuiUtils.getDomObject(this.elementId),this.ramaddaUrl=l||ramaddaBaseUrl,this.getTextComponent=function(){let t="#"+this.elementId;return $(t)},this.getHiddenComponent=function(){let t="#"+this.elementId+"_hidden";return $(t)},this.cancel=function(t){!t&&this.pinned||jqid(this.domId).remove()},this.clearInput=function(){this.getHiddenComponent().val(""),this.getTextComponent().val("")},this.handleClick=function(t){let r=this.props.anchor;if(!r){if(this.props.eventSourceId&&(r=jqid(this.props.eventSourceId)),null!=r&&0!=r.length||t&&t.target&&(r=$(t.target)),null==r||0==r.length){r=jqid(this.id+"_selectlink")}null!=r&&0!=r.length||(r=jqid(this.id))}HtmlUtils.hidePopupObject(t);let e=$(HU.div(["style","position:relative;"])).appendTo("body");$(HU.div(["style",HU.css("min-width","200px","min-height","200px"),"class","ramadda-selectdiv","id",this.domId])).appendTo(e),this.div=jqid(this.domId),this.props.minWidth&&this.div.css("min-width",this.props.minWidth),this.div.draggable(),this.anchor=r,this.showDiv=()=>{this.div.show(),this.div.position({of:this.anchor,my:this.props.locationMy??"left top",at:this.props.locationAt??"left bottom",collision:this.props.collision??"fit fit"})};let a="/entry/show?output=selectxml&selecttype="+this.selecttype+"&allentries="+this.allEntries+"&target="+this.id+"&noredirect=true&firstclick=true";if(this.ramaddaUrl&&!this.ramaddaUrl.startsWith("/")){let t=new URL(this.ramaddaUrl).pathname,r=this.ramaddaUrl.replace(t,"");Ramadda.currentRamaddaBase=r,a=this.ramaddaUrl+a}else Ramadda.currentRamaddaBase=null,a=ramaddaBaseUrl+a;return this.localeId&&(a=a+"&localeid="+this.localeId),this.entryType&&(a=a+"&entrytype="+this.entryType),GuiUtils.loadXML(a,((t,r)=>{s.handleSelect(t,r)}),this.id),!1},this.handleClick(t)}function selectClick(t,r,e,a){selector=selectors[t];let n=getHandler(t);if(n||(n=getHandler(selector.elementId)),n)return n.selectClick(selector.selecttype,t,r,e),void selector.cancel();if("wikilink"==selector.selecttype){let t={entryId:r,name:e};a&&$.extend(t,a),insertAtCursor(selector.elementId,selector.textComp.obj,t)}else if("fieldname"==selector.selecttype)insertAtCursor(selector.elementId,selector.textComp.obj,e);else if("image"==selector.selecttype)insertAtCursor(selector.elementId,selector.textComp.obj,'{{image entry="'+r+'" caption="'+e+'" width=400px align=center}} ');else if("entryid"==selector.selecttype){let t=HU.getWikiEditor(selector.elementId);t?t.insertTags(r," ","importtype"):selector.props&&selector.props.callback?selector.props.callback(r,a):insertText(selector.elementId,r)}else"entry:entryid"==selector.selecttype?HU.getWikiEditor(selector.elementId).insertTags("entry:"+r," ","importtype"):(selector.getHiddenComponent().val(r),selector.getTextComponent().val(e));selector.cancel()}function selectCreate(t,r,e,a,n,i,g,l,o){let s=r+(l||"");return selectors[r]=selectors[s]=new Selector(t,r,e,a,n,i,g,l,o)}function selectInitialClick(t,r,e,a,n,i,g,l,o){return currentSelector&&currentSelector.cancel(),currentSelector=selectCreate(t,r,e,a,n,i,g,l,o),!1}function clearSelect(t){if(selector=selectors[t],selector)selector.clearInput();else{let r=GuiUtils.getDomObject(t),e=GuiUtils.getDomObject(t+"_hidden");e&&(e.obj.value=""),r&&(r.obj.value="")}}function getChildText(t){let r="";for(childIdx=0;childIdx<t.childNodes.length;childIdx++)r+=t.childNodes[childIdx].nodeValue;return r}function toggleBlockVisibility(t,r,e,a){HtmlUtils.toggleBlockVisibility(t,r,e,a)}function toggleInlineVisibility(t,r,e,a){let n,i=GuiUtils.getDomObject(r);n=toggleVisibility(t,"inline")?e:a,StringUtil.startsWith(n,"fa-")?$("#"+r).html(HtmlUtils.getIconImage(n,[])):i&&(i.obj.src=n),Utils.ramaddaUpdateMaps()}function toggleVisibility(t,r){let e=$("#"+t).css("display");return $("#"+t).toggle(),"block"!=e}function hide(t){$("#"+t).hide()}function hideObject(t){return t?($("#"+t.id).hide(),1):0}function showObject(t,r){if(!t)return 0;$("#"+t.id).show()}function toggleVisibilityOnObject(t,r){if(!t)return 0;$("#"+t.id).toggle()}Selector.prototype={handleSelect:function(t,r){let e=this,a=t.responseXML.documentElement;text=getChildText(a);let n=this.domId+"-pin",i=HU.jsLink("",HtmlUtils.getIconImage(icon_pin),["class","ramadda-popup-pin","id",n]),g=HtmlUtils.getIconImage(icon_close,[]),l=r+"_close",o=HU.span(["id",l,"class","ramadda-clickable"],g),s=(this.props?this.props.title:"")??"",b=(this.props?this.props.extra:"")??"";Utils.stringDefined(s)&&(s=HU.span(["style","margin-left:5px;"],s));let d=HtmlUtils.div(["style","text-align:left;","class","ramadda-popup-header"],SPACE+o+SPACE+i+s),c=HtmlUtils.div(["id",r+"-popup"],d+b+text);this.div.html(c),this.showDiv(),jqid(l).click((()=>{this.cancel(!0)})),$("#"+n).click((function(){e.pinned=!e.pinned,e.pinned?$(this).addClass("ramadda-popup-pin-pinned"):$(this).removeClass("ramadda-popup-pin-pinned")})),this.props&&this.props.initCallback&&this.props.initCallback()}};var OUTPUT_JSON="json",OUTPUT_CSV="default.csv",OUTPUT_ZIP="zip.tree",OUTPUT_EXPORT="zip.export",DEFAULT_MAX=100,OUTPUTS=[{id:OUTPUT_ZIP,name:"Download Zip"},{id:OUTPUT_EXPORT,name:"Export"},{id:OUTPUT_JSON,name:"JSON"},{id:OUTPUT_CSV,name:"CSV"}];function getRamadda(t){t||(t=ramaddaBaseUrl);let r=t.split(";"),e=null;r.length>1&&(t=r[0].trim(),e=r[1].trim());let a=null,n=new RegExp("^(.*)\\((.+)\\).*$").exec(t);if(n&&(t=n[1].trim(),a=n[2]),"this"==t)return getGlobalRamadda();null==window.globalRamaddas&&(window.globalRamaddas={});let i=window.globalRamaddas[t];if(null!=i)return i;let g=window[t];return null==g&&(g=window[t+"Repository"]),g&&(i=new Object,g.call(i,e,a)),null==i&&(i=new RamaddaRepository(t),null!=e&&(i.name=e)),addRepository(i),i}function addRepository(t){null==window.globalRamaddas&&(window.globalRamaddas={}),window.globalRamaddas[t.repositoryRoot]=t}function getGlobalRamadda(){return getRamadda(ramaddaBaseUrl)}function Repository(t){let r=null,e=t.match("^(http.?://[^/]+)/");e&&e.length>0&&(r=e[1]),RamaddaUtil.defineMembers(this,{repositoryRoot:t,baseEntry:null,hostname:r,name:null,getId:function(){return this.repositoryRoot},getSearchMessage:function(){return"Searching "+this.getName()},getSearchLinks:function(t){return null},getSearchUrl:function(t){return null},getId:function(){return this.repositoryRoot},getIconUrl:function(t){return ramaddaCdn+"/icons/page.png"},getEntryTypes:function(t){return new Array},getEntryType:function(t){return null},getMetadataCount:function(t,r){return 0},getEntryUrl:function(t,r){return null},getBaseEntry:function(t){if(null!=this.baseEntry)return this.baseEntry},getRoot:function(){return this.repositoryRoot},getHostname:function(){return this.hostname},canSearch:function(){return!0},getName:function(){if(this.children)return"Search all repositories";if(null!=this.name)return this.name;if(0==this.repositoryRoot.indexOf("/"))return this.name="This RAMADDA";let t=this.repositoryRoot,r=document.createElement("a");r.href=t;let e=r.hostname,a=r.pathname;return"/repository"==a?e:this.name=e+": "+a}})}function RepositoryContainer(t,r){let e;this._id="CONTAINER",RamaddaUtil.inherit(this,e=new Repository(t)),RamaddaUtil.defineMembers(this,{name:r,children:[],canSearch:function(){return!1},getSearchMessage:function(){return"Searching "+this.children.length+" repositories"},addRepository:function(t){this.children.push(t)},getEntryTypes:function(t){if(null!=this.entryTypes)return this.entryTypes;this.entryTypes=[];let r={};for(let t=0;t<this.children.length;t++){let e=this.children[t].getEntryTypes();if(null!=e)for(let t=0;t<e.length;t++){let a=e[t];if(null==r[a.getId()]){let t={};t=$.extend(t,a),r[a.getId()]=t,this.entryTypes.push(t)}else r[a.getId()].entryCount+=a.getEntryCount()}}return this.entryTypes}})}function RamaddaRepository(t){let r;null==t&&(t=ramaddaBaseUrl),RamaddaUtil.inherit(this,r=new Repository(t)),RamaddaUtil.defineMembers(this,{entryCache:{},entryTypes:null,entryTypeMap:{},toString:function(){return"ramadda:"+this.getId()},canSearch:function(){return!0},getJsonUrl:function(t){return this.repositoryRoot+"/entry/show?entryid="+t+"&output=json"},createEntriesFromJson:function(t){let r=new Array;for(let e=0;e<t.length;e++){let a=t[e];a.baseUrl=this.getRoot();let n=new Entry(a);this.addEntry(n),r.push(n)}return r},getEntryType:function(t){return this.entryTypeMap[t]},entryTypeCallPending:!1,entryTypeCallbacks:null,getEntryTypes:function(t,r){if(null!=this.entryTypes)return this.entryTypes;if(this.entryTypeCallPending){let r=this.entryTypeCallbacks;return null==r&&(r=[]),r.push(t),this.entryTypeCallbacks=r,this.entryTypes}let e=this,a=this.repositoryRoot+"/entry/types";r&&(a=a+"?types="+r),this.entryTypeCallPending=!0,this.entryTypeCallbacks=null;$.getJSON(a,(function(r){if(GuiUtils.isJsonError(r))return;e.entryTypes=[];for(let t=0;t<r.length;t++){let a=new EntryType(r[t]);e.entryTypeMap[a.getId()]=a,e.entryTypes.push(a)}null!=t&&t(e,e.entryTypes);let a=e.entryTypeCallbacks;if(e.entryTypeCallPending=!1,e.entryTypeCallbacks=null,a)for(let t=0;t<a.length;t++)a[t](e,e.entryTypes)})).done((function(t,r,a){e.entryTypeCallPending=!1})).always((function(t,r,a){e.entryTypeCallPending=!1})).fail((function(t,r,n){e.entryTypeCallPending=!1;let i="";n&&n.length>0&&(i+=":  "+n),GuiUtils.handleError("An error has occurred reading entry types"+i,"URL: "+a,!1)}));return this.entryTypes},metadataCache:{},metadataCachePending:{},metadataCacheCallbacks:{},getMetadataCount:function(t,r){let e=t.getType(),a=this.metadataCache[e];if(null!=a)return r(t,a),null;if(this.metadataCachePending[e]){let t=this.metadataCacheCallbacks[e];return null==t&&(t=[]),t.push(r),this.metadataCacheCallbacks[e]=t,null}this.metadataCacheCallbacks[e]=null,this.metadataCachePending[e]=!0;let n=this.repositoryRoot+"/metadata/list?metadata_type="+t.getType()+"&response=json",i=this;$.getJSON(n,(function(a){let n=i.metadataCacheCallbacks[e];if(i.metadataCachePending[e]=!1,!GuiUtils.isJsonError(a)&&(i.metadataCache[e]=a,r(t,a),n))for(let r=0;r<n.length;r++)n[r](t,a)})).fail((function(t,r,a){i.metadataCachePending[e]=!1;let g=r+", "+a;GuiUtils.handleError("Error getting metadata count: "+g,n,!1)}));return null},getEntryUrl:function(t,r){let e;e="string"==typeof t?t:t.id;let a=this.getRoot()+"/entry/show?entryid="+e;return null!=r&&(StringUtil.startsWith(r,"&")||(a+="&"),a+=r),a},getEntryDownloadUrl:function(t,r){let e;e="string"==typeof t?t:t.id;let a=this.getRoot()+"/entry/get?entryid="+e;return null!=r&&(StringUtil.startsWith(r,"&")||(a+="&"),a+=r),a},getSearchLinks:function(t){let r=[];for(let e=0;e<OUTPUTS.length;e++)r.push(HtmlUtils.href(this.getSearchUrl(t,OUTPUTS[e].id),OUTPUTS[e].name));return r},getUrlRoot:function(){return this.repositoryRoot},getSearchUrl:function(t,r,e){let a=this.repositoryRoot+"/search/do?output="+r;for(let r=0;r<t.types.length;r++){a+="&type="+t.types[r]}null!=t.parent&&t.parent.length>0&&(a+="&group="+t.parent),null!=t.provider&&t.provider.length>0&&(a+="&provider="+t.provider),null!=t.text&&t.text.length>0&&(a+="&text="+t.text),null!=t.name&&t.name.length>0&&(a+="&name="+t.name),t.startDate&&t.startDate.length>0&&(a+="&datadate.from="+t.startDate),t.endDate&&t.endDate.length>0&&(a+="&datadate.to="+t.endDate),t.createstartDate&&t.createstartDate.length>0&&(a+="&createdate.from="+t.createstartDate),t.createendDate&&t.createendDate.length>0&&(a+="&createdate.to="+t.createendDate),t.entries&&t.entries.length>0&&(a+="&entries="+t.entries),t.orderBy&&(a+="&orderby="+t.orderBy,Utils.isDefined(t.ascending)&&(a+="&ascending="+(t.ascending?"true":"false"))),t.getAreaContains()&&(a+="&areamode=contains"),isNaN(t.getNorth())||(a+="&maxlatitude="+t.getNorth()),isNaN(t.getWest())||(a+="&minlongitude="+t.getWest()),isNaN(t.getSouth())||(a+="&minlatitude="+t.getSouth()),isNaN(t.getEast())||(a+="&maxlongitude="+t.getEast()),t.ancestor&&(a+="&ancestor="+encodeURIComponent(t.ancestor));for(let r=0;r<t.metadata.length;r++){let e=t.metadata[r];a+="&metadata_attr1_"+e.type+"="+encodeURIComponent(e.value)}return a+="&max="+t.getMax(),a+="&skip="+t.getSkip(),t.rootEntry&&(a+="&rootEntry="+encodeURIComponent(t.rootEntry)),a+=t.getExtra(),a},addEntry:function(t){this.entryCache[t.getId()]=t},getEntry:async function(t,r){let e=!1;if(null==t)return console.log("Error in getEntry: entry id is null"),console.trace(),null;let a=this.entryCache[t];if(null!=a)return Utils.call(r,a);if(window.globalRamaddas)for(let e=0;e<window.globalRamaddas.length;e++){let a=window.globalRamaddas[e].entryCache[t];if(null!=a)return Utils.call(r,a)}if(null==r)return null;let n=this,i=this.getJsonUrl(t)+"&ancestors=true";await $.getJSON(i,(function(t){if(GuiUtils.isJsonError(t))return void 0;let e=createEntriesFromJson(t,n),a=null;e.length>0&&(a=e[0]),Utils.call(r,a,e)})).fail((function(t,r,e){let a=r+", "+e;GuiUtils.handleError("Error getting entry information: "+a,i,!1)}))}})}function createEntriesFromJson(t,r){return null==r&&(r=getGlobalRamadda()),r.createEntriesFromJson(t)}var metadataTypeCount=-1,metadataColorPalette=["#FDF5E6","#F0FFFF","#FFE3D5","#a7d0cd","#fbeeac","#dbe3e5","#e8e9a1"],metadataColors={};function getMetadataColor(t){return t.color?t.color:metadataColors[t]?metadataColors[t]:metadataColorPalette[0]}function MetadataType(t,r,e){$.extend(this,{type:t,label:r,value:e}),this.color=Utils.getEnumColor(t),$.extend(this,{getType:function(){return this.type},getColor:function(){return this.color},getLabel:function(){return null!=this.label?this.label:this.type},getValue:function(){return this.value}})}function EntryTypeColumn(t){$.extend(this,t),RamaddaUtil.defineMembers(this,{getName:function(){return this.name},getLabel:function(){return this.label},getType:function(){return this.type},getValues:function(){return this.values},getSuffix:function(){return this.suffix},getSearchArg:function(){return"search."+this.namespace+"."+this.name},getCanSearch:function(){return this.cansearch},getCanShow:function(){return this.canshow},isEnumeration:function(){return"enumeration"==this.getType()||"enumerationplus"==this.getType()},isNumeric:function(){return"double"==this.getType()||"int"==this.getType()},isUrl:function(){return"url"==this.getType()}})}function EntryType(t){let r=t.columns;null==r&&(r=[]);let e=[];for(let t=0;t<r.length;t++)e.push(new EntryTypeColumn(r[t]));t.columns=e,$.extend(this,t),RamaddaUtil.defineMembers(this,{getIsGroup:function(){return this.isgroup},getIcon:function(){return this.icon},getLabel:function(){return this.label||this.name},getId:function(){return null!=this.type?this.type:this.id},getCategory:function(){return this.category},getEntryCount:function(){return this.entryCount},getIncludeInSearch:function(){return this.includeInSearch},getColumns:function(){return this.columns}})}function Entry(t){null==t.repositoryId&&(t.repositoryId=t.baseUrl),null==t.repositoryId&&(t.repositoryId=ramaddaBaseUrl);let r=-9999;if(t.typeObject)t.type=new EntryType(t.typeObject);else if(t.type){let r={id:t.type,name:null!=t.typeName?t.typeName:t.type};t.type=new EntryType(r)}if($.extend(this,{id:null,name:null,description:null,bbox:null,geometry:null,services:[],properties:[],childrenEntries:null,startDate:null,endDate:null}),$.extend(this,t),this.domId=Utils.cleanId(this.id),this.createDate=Utils.parseDate(t.createDate),this.startDate=Utils.parseDate(t.startDate),this.endDate=Utils.parseDate(t.endDate),this.endDate&&this.startDate&&this.endDate.getTime()<this.startDate.getTime()){let t=this.startDate;this.startDate=this.endDate,this.endDate=t}this.attributes=[],this.metadata=[];for(let t=0;t<this.properties.length;t++){let r=this.properties[t];"attribute"==r.type?this.attributes.push(r):this.metadata.push(r)}RamaddaUtil.defineMembers(this,{getId:function(){return this.id},getIdForDom:function(){return this.domId},canEdit:function(){return this.canedit},isSynth:function(){return this.id.startsWith("synth:")},getFullId:function(){return this.getRamadda().getRoot()+","+this.id},doSave:function(t,r,e,a){RamaddaUtil.doSave(this.getId(),t,r,e,a)},getDisplayName:function(){return this.displayName?this.displayName:this.getName()},getCreateDate:function(){return this.createCreate},getStartDate:function(){return this.startDate},getEndDate:function(){return this.endDate},getIsGroup:function(){return this.isGroup},getProperty:function(t){return"name"==t?this.getName():"fromdate"==t?HU.span(["class","ramadda-datetime","title",this.startDate],this.startDateFormat):"createdate"==t?HU.span(["class","ramadda-datetime","title",this.createDate],this.createDateFormat):"size"==t?this.getFilesize()?this.getFormattedFilesize():"---":"type"==t?this.typeName:"Unknown:"+t},getRoot:async function(t,r){let e=this;for(;;){let r;if(await e.getParentEntry((t=>r=t)),!r)return Utils.call(t,e);e=r}},map:async function(t,r){let e;await this.getChildrenEntries((t=>{e=t})),e.map(t),Utils.call(r)},getParentName:function(){return this.parentName},getParentEntry:async function(t,r){return this.parent?this.parentEntry?Utils.call(t,this.parentEntry):void await this.getRamadda().getEntry(this.remoteParent||this.parent,(r=>{this.parentEntry=r,Utils.call(t,r)})):Utils.call(t,null)},getChildrenEntries:async function(t,r){if(null!=this.childrenEntries)return Utils.call(t,this.childrenEntries);new EntrySearchSettings({parent:this.getId()});let e=this.getRamadda().getJsonUrl(this.getAbsoluteId())+"&justchildren=true";null!=r&&(e+="&"+r);let a={entryListChanged:function(r){t(r.getEntries())}},n=new EntryList(this.getRamadda(),e,a,!1);await n.doSearch()},getType:function(){return this.typeObject,this.type},getThumbnail:function(){if(!this.metadata)return null;for(let t=0;t<this.metadata.length;t++){let r=this.metadata[t];if("content.thumbnail"==r.type&&Utils.stringDefined(r.value.attr1)){if(r.value.attr1.startsWith("http"))return r.value.attr1;return"8aace8e1-df60-4c72-b19a-9da6c676f083"==this.getAbsoluteId()&&console.log(this.getAbsoluteId()+"  "+r.value.attr1+" id:"+r.id),this.getRamadda().getRoot()+"/metadata/view/"+r.value.attr1+"?element=1&entryid="+this.getAbsoluteId()+"&metadata_id="+r.id}}return null},getMetadata:function(){return this.metadata},getRamadda:function(){return this.remoteRepository?getRamadda(this.remoteRepository.url):getRamadda(this.repositoryId)},getLocationLabel:function(){return"n: "+this.getNorth()+" w:"+this.getWest()+" s:"+this.getSouth()+" e:"+this.getEast()},getServices:function(){return this.services},getService:function(t){for(let r=0;r<this.services.length;r++)if(this.services[r].relType==t)return this.services[r];return null},goodLoc:function(t){return!isNaN(t)&&t!=r},hasBounds:function(){return this.goodLoc(this.getNorth())&&this.goodLoc(this.getWest())&&this.goodLoc(this.getSouth())&&this.goodLoc(this.getEast())},hasLocation:function(){return this.goodLoc(this.getNorth())},getNorth:function(){return this.bbox?this.bbox[3]:this.geometry?this.geometry.coordinates[1]:r},getWest:function(){return this.bbox?this.bbox[0]:this.geometry?this.geometry.coordinates[0]:r},getSouth:function(){return this.bbox?this.bbox[1]:this.geometry?this.geometry.coordinates[1]:r},getEast:function(){return this.bbox?this.bbox[2]:this.geometry?this.geometry.coordinates[0]:r},getLatitude:function(){return this.geometry?this.geometry.coordinates[1]:this.getNorth()},getLongitude:function(){return this.geometry?this.geometry.coordinates[0]:this.getWest()},getIconUrl:function(){if(null==this.icon)return this.getRamadda().getIconUrl(this);if(this.icon.match("^http.*"))return this.icon;let t,r=this.getRamadda().getHostname();return t=r?r+this.icon:this.icon,t},getIconImage:function(t){return this.iconRelative?HtmlUtils.image(this.iconRelative,t):HtmlUtils.image(this.getIconUrl(),t)},getColumns:function(){return null==this.type.getColumns()?new Array:this.type.getColumns()},getAttributes:function(){return this.attributes},getAttribute:function(t){for(let r=0;r<this.attributes.length;r++){let e=this.attributes[r];if(e.id==t)return e}return null},getAttributeValue:function(t){let r=this.getAttribute(t);return null==r?null:r.value},getAttributeNames:function(){let t=[];for(let r=0;r<this.attributes.length;r++){let e=this.attributes[r];t.push(e.id)}return t},getAttributeLabels:function(){let t=[];for(let r=0;r<this.attributes.length;r++){let e=this.attributes[r];e.label?t.push(e.label):t.push(e.id)}return t},getName:function(){return null==this.name||""==this.name?"no name":this.name},getSnippet:function(t){return null==this.snippet?t:this.snippet},getDescription:function(t){return null==this.description?t:this.description},getFilesize:function(){let t=parseInt(this.filesize);return t==t?t:0},getFormattedFilesize:function(){return GuiUtils.size_format(this.getFilesize())},getEntryUrl:function(t){return this.remoteUrl?this.remoteUrl:this.getRamadda().getEntryUrl(this,t)},getFilename:function(){return this.filename},isImage:function(){return!!(this.url&&this.url.search(/(\.png|\.jpg|\.jpeg|\.gif)/i)>=0)||(!!(this.hasResource()&&this.getFilename().search(/(\.png|\.jpg|\.jpeg|\.gif)/i)>=0)||!!this.getThumbnail())},getImageUrl:function(){if(this.url&&this.url.search(/(\.png|\.jpg|\.jpeg|\.gif)/i)>=0)return this.url;if(this.hasResource()&&this.getFilename().search(/(\.png|\.jpg|\.jpeg|\.gif)/i)>=0)return this.getResourceUrl();let t=this.getThumbnail();return t||null},getIsUrl:function(){return this.isurl},getIsFile:function(){return this.isfile},hasResource:function(){return null!=this.getFilename()},getAbsoluteId:function(){if(this.remoteRepository&&this.remoteUrl){let t=this.remoteUrl.match("entryid=(.*)");if(t&&t.length>1)return t[1]}return this.id},getResourceUrl:function(){if(this.url)return this.url;if(this.remoteRepository)return this.remoteRepository.url+"/entry/get?entryid="+this.getAbsoluteId();let t=this.getRamadda().getRoot()+"/entry/get";return null!=this.getFilename()&&(t+="/"+this.getFilename()),t+"?entryid="+this.id},getLink:function(t,r,e){return t||(t=this.getName()),(e=e||[]).push("href",this.getEntryUrl()),r&&(t=this.getIconImage()+SPACE+t),HtmlUtils.tag("a",e,t)},getResourceLink:function(t){return t||(t=this.getName()),HtmlUtils.tag("a",["href",this.getResourceUrl()],t)},toString:function(){return"entry:"+this.getName()+" id:"+this.getId()}})}function EntryList(t,r,e,a){$.extend(this,{repository:t,url:r,listener:e,haveLoaded:!1,entries:[],map:{},getRepository:function(){return this.repository},setEntries:function(t){this.entries=t,this.haveLoaded=!0},getEntry:async function(t,r){let e=this.map[t];if(null!=e)return Utils.call(r,e);await this.getRepository().getEntry(t,(t=>{Utils.call(r,t)}))},getEntries:function(){return this.entries},createEntries:function(t,r,e){this.entries=createEntriesFromJson(t,this.getRepository());for(let t=0;t<this.entries.length;t++){let r=this.entries[t];this.map[r.getId()]=r}null==r&&(r=this.listener),e?e(this):r&&r.entryListChanged&&r.entryListChanged(this)},doSearch:async function(t,r,e){null==t&&(t=this.listener);let a=this;await $.getJSON(this.url,(function(e,n,i){GuiUtils.isJsonError(e)||(a.haveLoaded=!0,a.createEntries(e,t,r))})).fail((function(r,n,i){GuiUtils.handleError("An error occurred doing search: "+i,a.url,!0),e?e(i):t&&t.handleSearchError&&t.handleSearchError(a.url,i)}))}}),a&&this.doSearch()}function EntrySearchSettings(t){$.extend(this,{types:[],parent:null,max:DEFAULT_MAX,skip:0,metadata:[],extra:"",orderBy:"",entries:null,startDate:null,endDate:null,north:NaN,west:NaN,north:NaN,east:NaN,areaContains:!1,getMax:function(){return this.max},getSkip:function(){return this.skip},toString:function(){return"n:"+this.north+" w:"+this.west+" s:"+this.south+" e:"+this.east},getAreaContains:function(){return this.areaContains},setAreaContains:function(t){this.areaContains=t},getNorth:function(){return this.north},getSouth:function(){return this.south},getWest:function(){return this.west},getEast:function(){return this.east},setDateRange:function(t,r){this.startDate=t,this.endDate=r},setCreateDateRange:function(t,r){this.createstartDate=t,this.createendDate=r},setBounds:function(t,r,e,a){this.north=null==t||0==t.toString().length?NaN:parseFloat(t),this.west=null==r||0==r.toString().length?NaN:parseFloat(r),this.south=null==e||0==e.toString().length?NaN:parseFloat(e),this.east=null==a||0==a.toString().length?NaN:parseFloat(a)},getTypes:function(){return this.types},hasType:function(t){return this.types.indexOf(t)>=0},getExtra:function(){return this.extra},setExtra:function(t){this.extra=t},clearAndAddType:function(t){return this.types=[],this.addType(t),this},addType:function(t){if(null!=t&&0!=t.length&&!this.hasType(t))return this.types.push(t),this}}),null!=t&&$.extend(this,t)}function EntryListHolder(t){let r;RamaddaUtil.inherit(this,r=new EntryList(t,null)),$.extend(this,{entryLists:[],addEntryList:function(t){this.entryLists.push(t)},doSearch:function(t){let r=this;null==t&&(t=this.listener);for(let e=0;e<this.entryLists.length;e++){let a=this.entryLists[e];if(!a.getRepository().canSearch())continue;let n={entryListChanged:function(e){t&&t.entryListChanged(r,e)}};a.doSearch(n)}},getEntry:async function(t){for(let r=0;r<this.entryLists.length;r++){let e,a=this.entryLists[r];if(await a.getEntry(t,(t=>{e=t})),null!=e)return e}return null},getEntries:function(){let t=[];for(let r=0;r<this.entryLists.length;r++){let e=this.entryLists[r].getEntries();for(let r=0;r<e.length;r++)t.push(e[r])}return t}})}
